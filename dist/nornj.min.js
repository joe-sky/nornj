!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.NornJ=e()}}(function(){return function e(t,n,r){function o(i,s){if(!n[i]){if(!t[i]){var c="function"==typeof require&&require;if(!s&&c)return c(i,!0);if(a)return a(i,!0);var l=new Error("Cannot find module '"+i+"'");throw l.code="MODULE_NOT_FOUND",l}var u=n[i]={exports:{}};t[i][0].call(u.exports,function(e){var n=t[i][1][e];return o(n?n:e)},u,u.exports,e,t,n,r)}return n[i].exports}for(var a="function"==typeof require&&require,i=0;i<r.length;i++)o(r[i]);return o}({1:[function(e,t,n){"use strict";function r(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;t.exports=Object.assign||function(e,t){for(var n,i,s=r(e),c=1;c<arguments.length;c++){n=Object(arguments[c]);for(var l in n)o.call(n,l)&&(s[l]=n[l]);if(Object.getOwnPropertySymbols){i=Object.getOwnPropertySymbols(n);for(var u=0;u<i.length;u++)a.call(n,i[u])&&(s[i[u]]=n[i[u]])}}return s}},{}],2:[function(e,t,n){"use strict";var r=e("./core"),o=e("./utils/utils"),a=o.setComponentEngine,i=e("./compiler/compile"),s=e("./checkElem/checkStringElem");r.setComponentEngine=a,r.compile=i.compile,r.compileComponent=i.compileComponent,r.compileTagComponent=i.compileTagComponent,r.renderTagComponent=i.renderTagComponent,r.registerComponent=o.registerComponent,r.registerFilter=o.registerFilter,r.compileStringTmpl=s,o.createTagNamespace(),"undefined"!=typeof React&&a("react",React,"undefined"!=typeof ReactDOM?ReactDOM:null);var c="undefined"!=typeof self?self:this;t.exports=c.NornJ=c.nj=r},{"./checkElem/checkStringElem":4,"./compiler/compile":6,"./core":9,"./utils/utils":15}],3:[function(e,t,n){"use strict";function r(e,t){var n={},r=t.hasElse?"contentElse":"content";if(!a.isArray(e))return void(a.isString(e)&&(n.type="nj_plaintext",n.content=[a.compiledParam(e)],t[r].push(n)));var i=e[0];if(a.isString(i)){var s,c,l,i=i,u=e.length,p=e[u-1],f=!1,m=a.getXmlOpenTag(i),g=!1;if(m)c=m[1],a.isXmlSelfCloseTag(i)?n.selfCloseTag=!0:g=a.isXmlCloseTag(p,c),f=!0;else if(s=a.isControl(i)){var v=s[0].toLowerCase(),d=s[1];l=a.isTmpl(v),n.type="nj_"+v,null!=d&&(n.refer=a.compiledProp(d)),a.isControlCloseTag(p,v)&&(g=!0),f=!0}else{var h=a.getOpenTag(i);h&&(c=h[0],a.isSelfCloseTag(i)?(n.selfCloseTag=!0,f=!0):(g=a.isCloseTag(p,c),g&&(f=!0)))}if(f){var y=!1,C=-1,T=!0,b=e[1];if(a.isObject(b)){if(s){var j=a.getInsideBraceParam(b.refer);n.refer=a.compiledProp(j?j[1]:b.refer)}else n.params=a.compiledParams(b);y=!0}if(s)l?(T=!1,a.addTmpl(n,t)):C=a.inArray(e,"$else");else{n.type=c;var O=a.getInsideBraceParam(c);O&&(n.typeRefer=a.compiledProp(O[1]));var x=a.getOpenTagParams(i,!m);x&&(n.params||(n.params=a.lightObj()),a.each(x,function(e){n.params[e.key]=a.compiledParam(e.value)},!1,!0))}T&&t[r].push(n);var E=u-(g?1:0),P=e.slice(y?2:1,0>C?E:C);if(P&&P.length&&o(P,n),C>=0){var w=e.slice(C+1,E);n.hasElse=!0,w&&w.length&&o(w,n)}}else o(e,t)}else a.isArray(i)&&o(e,t)}function o(e,t){t.content||(t.content=[]),t.hasElse&&!t.contentElse&&(t.contentElse=[]),a.each(e,function(e){r(e,t)},!1,!0)}var a=(e("../core"),e("../utils/tools")),i=e("./checkTagElem");t.exports={checkElem:r,checkTagElem:i}},{"../core":9,"../utils/tools":14,"./checkTagElem":5}],4:[function(e,t,n){"use strict";function r(e){var t,n=u.isString(e);if(n)e=a(e),t=u.uniqueKey(e);else{var r="";u.each(e,function(e){r+=e},!1,!0),t=u.uniqueKey(a(r))}var i=l.strTmpls[t];if(i)return i;var s=e,c=arguments,p=0,f=[];i="",n&&(s=e.split(g));var m=s.length;return u.each(s,function(e,t){var n="";if(m-1>t){var r=c[t+1];u.isString(r)?n=r:(n="<nj-split_"+p+" />",f.push(r),p++)}i+=e+n},!1,!0),i=o(n?i:a(i),f),l.strTmpls[t]=i,i}function o(e,t){for(var n,r=[],o={elem:r,elemName:"root",parent:null},a=null;n=m.exec(e);){var l=n[1],u=n[2],p=n[3],f=n[4];l&&(/\s/.test(l[l.length-1])&&(l=i(l)),o.elem.push(l)),u&&("/"===p[0]?p==="/"+o.elemName&&(o=o.parent):"/"===u[u.length-2]?o.elem.push(c(u,p,t)):(a=o,o={elem:[],elemName:p,parent:a},a.elem.push(o.elem),o.elem.push(s(u,p)))),f&&(/\s/.test(f[0])&&(f=i(f)),o.elem.push(f))}return r}function a(e){return e.replace(p,"").replace(f,">$1<").trim()}function i(e){return e.replace(/\n/g,"").trim()}function s(e,t){switch(t){case"$if":case"$each":return e.substring(1,e.length-1);default:return e}}function c(e,t,n){return t.indexOf("nj-split")>=0?n[t.split("_")[1]]:"$else"===t?e.substr(1,5):[s(e,t)]}var l=e("../core"),u=e("../utils/tools"),p=/<!--[\s\S]*?-->/g,f=/>\s+([^\s<]*)\s+</g,m=/([^>]*)(<([a-z{\/$][-a-z0-9_:.{}$]*)[^>]*>)([^<]*)/gi,g=/\$\{\d+\}/;l.strTmpls={},t.exports=r},{"../core":9,"../utils/tools":14}],5:[function(e,t,n){"use strict";function r(e,t){var n={},r=e.nodeType,i=a.trim(e.nodeValue),s=t.hasElse?"contentElse":"content";if(3===r){if(""===i)return;return n.type="nj_plaintext",n.content=[a.compiledParam(i)],void t[s].push(n)}if(1===r){var c,l=a.getTagComponentName(e),u=a.getTagComponentAttrs(e),p=a.isTagControl(l),f=!0;if(p)if("else"!==l)if(n.type="nj_"+l,c=a.isTmpl(l))f=!1,a.addTmpl(n,t);else{var m=a.getInsideBraceParam(u.refer);n.refer=a.compiledProp(m?m[1]:u.refer)}else f=!1,n=t,n.hasElse=!0;else n.type=l,u&&(n.params=a.compiledParams(u));f&&t[s].push(n);var g=e.childNodes;g&&g.length&&o(g,n)}}function o(e,t){t.content||(t.content=[]),t.hasElse&&!t.contentElse&&(t.contentElse=[]),a.each(e,function(e){r(e,t)},!1,!0)}var a=(e("../core"),e("../utils/tools"));t.exports=r},{"../core":9,"../utils/tools":14}],6:[function(e,t,n){"use strict";function r(e,t,n,r){if(e){var o;return t&&(o=s.templates[t]),o||(c.isObject(e)&&"nj_root"===e.type?o=e:(o=c.lightObj(),o.type="nj_root",o.content=[],r?c.checkTagElem(e,o):c.checkElem(e,o)),t&&(s.templates[t]=o)),function(e){return e||(e={}),n?u.transformToComponent(o.content[0],e):l.transformContentToString(o.content,e)}}}function o(e,t){return r(e,t,!0)}function a(e,t){return r(e,t,!0,!0)}function i(e,t){var n=c.getTagComponents(t),r=[];return c.each(n,function(t){var n=a(t,t.getAttribute(s.tagId));r.push(s.componentLibDom[s.componentRender](n(e),t.parentNode))},!1,!0),r}var s=e("../core"),c=e("../utils/utils"),l=e("./transformToString"),u=e("./transformToComponent");t.exports={compile:r,compileComponent:o,compileTagComponent:a,renderTagComponent:i}},{"../core":9,"../utils/utils":15,"./transformToComponent":7,"./transformToString":8}],7:[function(e,t,n){"use strict";function r(e,t,n){var r=null,s=e.refer;if("nj_plaintext"===e.type)r=i.replaceParams(e.content[0],t,!0,!1,n),i.isObject(r)&&"nj_tmpl"===r.type&&(r=o(r.content,t,n));else if(null!=s){var c=i.getDataValue(t,s,n);switch(e.type){case"nj_if":r=o(c?e.content:e.contentElse,t,n);break;case"nj_each":c&&c.length?(r=[],i.each(c,function(a,s){var c=i.lightObj();c.data=a,c.parent=n,c.index=s,r.push(o(e.content,i.getItemParam(a,t),c))})):e.hasElse&&(r=o(e.contentElse,t,n))}}else{var l=a.componentClasses[e.type.toLowerCase()],u=l?l:e.type;if(e.typeRefer){var p=i.getDataValue(t,e.typeRefer,n);p&&(u=p)}var f=[u,i.transformParamsToObj(e.params,t,n)],m=o(e.content,t,n);m&&i.listPush(f,m),r=a.componentLibObj[a.componentPort].apply(a.componentLibObj,f)}return r}function o(e,t,n){if(!e)return null;!n&&t&&(n=i.lightObj(),n.data=i.isArray(t)?t[0]:t);var o=[];return i.each(e,function(e){o.push(r(e,t,n))},!1,!0),o}var a=e("../core"),i=e("../utils/utils");t.exports={transformToComponent:r,transformContentToComponent:o}},{"../core":9,"../utils/utils":15}],8:[function(e,t,n){"use strict";function r(e,t,n){var r="",i=e.refer;if("nj_plaintext"===e.type)r=a.replaceParams(e.content[0],t,!1,!1,n);else if(null!=i){var s=a.getDataValue(t,i,n);switch(e.type){case"nj_if":r=o(s?e.content:e.contentElse,t,n);break;case"nj_each":s&&s.length?a.each(s,function(i,s){var c=a.lightObj();c.data=i,c.parent=n,c.index=s,r+=o(e.content,a.getItemParam(i,t),c)}):e.hasElse&&(r=o(e.contentElse,t,n))}}else{var c=e.type;if(e.typeRefer){var l=a.escape(a.getDataValue(t,e.typeRefer,n));l&&(c=l)}var u="<"+c+a.transformParams(e.params,t,n);r=e.selfCloseTag?u+"/>":u+">"+o(e.content,t,n)+"</"+c+">"}return r}function o(e,t,n){var o="";return e?(!n&&t&&(n=a.lightObj(),n.data=a.isArray(t)?t[0]:t),a.each(e,function(e){o+=r(e,t,n)},!1,!0),o):o}var a=e("../utils/utils");t.exports={transformToString:r,transformContentToString:o}},{"../utils/utils":15}],9:[function(e,t,n){"use strict";function r(){return r.compileStringTmpl.apply(null,arguments)}r.componentLib=null,r.componentLibObj=null,r.componentLibDom=null,r.componentPort=null,r.componentRender=null,r.componentClasses={},r.tagNamespace="nj",r.tagId="nj-id",r.tagStyle="nj-style",r.tagClassName="nj-component",r.templates={},t.exports=r},{}],10:[function(e,t,n){"use strict";function r(e,t){return function(n){return null!=n?(""+n).replace(e,function(e){return t[e]}):void 0}}var o={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},a=/[&><"']/g,i={"(":"\\(",")":"\\)"},s=/[()]/g;t.exports={escape:r(a,o),escapeBrackets:r(s,i)}},{}],11:[function(e,t,n){"use strict";function r(e,t){var n=e;a.isArray(e)||(n=[{name:e,filter:t}]),a.each(n,function(e){o.filters[e.name.toLowerCase()]=e.filter},!1,!0)}var o=e("../core"),a=e("./tools");o.filters={prop:function(e,t){var n=e;return n&&a.each(t.split("."),function(e){n=n[e]},!1,!0),n},count:function(e){return e?e.length:0},item:function(e,t){return e?e[t]:null}},t.exports={registerFilter:r}},{"../core":9,"./tools":14}],12:[function(e,t,n){"use strict";function r(e,t){var n=e;s.isArray(e)||(n=[{name:e,obj:t}]),s.each(n,function(e){i.componentClasses[e.name.toLowerCase()]=e.obj},!1,!0)}function o(e){i.tagNamespace=e,a(),i.tagId=e+"-id",i.tagStyle=e+"-style",i.tagClassName=e+"-component"}function a(){if("undefined"!=typeof document){var e=document;e&&e.namespaces&&e.namespaces.add(i.tagNamespace,"urn:schemas-microsoft-com:vml","#default#VML")}}var i=e("../core"),s=e("./tools");t.exports={registerComponent:r,registerTagNamespace:o,createTagNamespace:a}},{"../core":9,"./tools":14}],13:[function(e,t,n){"use strict";function r(e,t,n,r,a){o.componentLib=e,o.componentLibObj=t,o.componentLibDom=n||t,"react"===e&&(r="createElement",a="render"),o.componentPort=r,o.componentRender=a}var o=e("../core");t.exports={setComponentEngine:r}},{"../core":9}],14:[function(e,t,n){"use strict";function r(e,t){return H.apply(e,t),e}function o(e){return Array.isArray(e)}function a(e){var t=typeof e;return!o(e)&&("function"===t||"object"===t&&!!e)}function i(e){return"[object String]"===Object.prototype.toString.call(e)}function s(e){return function(t){return null==t?void 0:t[e]}}function c(e){var t=Q(e);return"number"==typeof t&&t>=0}function l(e,t,n,r){if(e)if(null==r&&(r=c(e)),n=n?n:e,r)G.call(e,function(e,r,o){var a=t.call(n,e,r,o);return a===!1?a:!0});else{var o=Object.keys(e);G.call(o,function(r,a){var i=o[a],s=t.call(n,e[i],i,e);return s===!1?s:!0})}}function u(e,t){return e.indexOf(t)}function p(e){return e?e.trim():""}function f(e,t){if(!e)throw Error(t||e)}function m(e,t,n){var r="";return l(e,function(e,o){r+=" "+o+"='"+C(e,t,!1,!1,n)+"'"},!1,!1),r}function g(e,t,n){var r=e?{}:null;return l(e,function(e,o){C(e,t,r,o,n)},!1,!1),r}function v(e,t,n,r){var o;if(!r&&"react"===M.componentLib)switch(t){case"class":t="className";break;case"for":t="htmlFor";break;case"style":case M.tagStyle:t="style",o=q(n)}e[t]=null!=o?o:n}function d(e,t,n,o,a){if(e){var i=M.filters;l(e,function(e){var s,c=e.params,l=i[e.name],u=F();s=c?r([t],c):[t],u.data=n,u.parent=o,u.index=a,t=l.apply(u,s)},!1,!0)}return t}function h(e,t,n,r){if(null!=e){var a,i,s,c,u=o(e),p=t.name,m=t.filters,g=t.parentNum;if(n&&n.parent&&(s=n.parent.data,c=n.index),n&&g)for(var v=0;g>v;v++){var h=n.parent;f(h,"Parent data is undefined, please check the param path declare."),n=h,a=[n.data]}else a=u?e:[e];return"."===p?d(m,u?e[0]:e,a,s,c):"#"===p?d(m,c,a,s,c):(l(a,function(e){return e&&(i=e[p],i=d(m,i,a,s,c),null!=i)?!1:void 0},!1,!0),r&&null==i&&(i=""),i)}}function y(e,t){var n=e;return o(t)&&(n=r([e],t.slice(1))),n}function C(e,t,n,r,o){var i=e.props,s=e.strs,c=e.isAll,u=a(n),p=s[0];return i&&l(i,function(e,a){var i=h(t,e.prop,o,!n);i&&!n&&e.escape&&(i=U.escape(i)),c?(u&&v(n,r,i),p=i):p+=i+s[a+1]},!1,!0),u&&!c&&v(n,r,p),p}function T(e){for(var t,n;t=W.exec(e);)n||(n=[]),n.push(t);return n}function b(e){var t=F(),n=i(e)?e.split(Y):[e],r=null,o=!1;if(n.length>1){var a=T(e);r=[],l(a,function(t){var n=F();o=t[0]===e,n.prop=O(t[2]),n.escape=t[1].length<2,r.push(n)},!1,!0)}return t.props=r,t.strs=n,t.isAll=o,t}function j(e){var t=F();return l(e,function(e,n){t[n]=b(e)},!1,!1),t}function O(e){var t=F();if(e.indexOf(":")>=0){var n,r=[];n=e.split(":"),e=n[0],n=n.slice(1),l(n,function(e){var t=x(e),n=F(),o=t[1].toLowerCase();if(o){var a=t[3];if(a){var i=[];l(a.split(","),function(e){i[i.length]=e},!1,!0),n.params=i}n.name=o,r.push(n)}},!1,!0),t.filters=r}if(e.indexOf("../")>-1){var o=0;e=e.replace(/\.\.\//g,function(){return o++,""}),t.parentNum=o}return t.name=e,t}function x(e){return Z.exec(e)}function E(e){return ee.exec(e)}function P(e){return te.test(e)}function w(e,t){for(var n,r;n=ne.exec(e);){r||(r=[]);var o=n[1],a=n[2].replace(/['"]+/g,""),i=a.length;t||(a.lastIndexOf("/>")===i-2?a=a.replace(/\/>/,""):a.lastIndexOf(">")===i-1&&(a=a.replace(/>/,""))),r.push({key:o,value:a})}return r}function S(e,t){return i(e)&&e.toLowerCase()==="</"+t+">"}function N(e){return re.exec(e)}function k(e){return oe.test(e)}function L(e,t){return i(e)&&e.toLowerCase()==="/"+t.toLowerCase()}function A(e){return ae.exec(e)}function _(e){var t,n=ie.exec(e);if(n){t=[n[1]];var r=A(e);r&&t.push(r[1])}return t}function I(e,t){return i(e)&&e==="/$"+t}function $(e){return"tmpl"===e}function D(e,t){var n=t.params;n||(n=t.params={});var r=n.tmpls;n.tmpls||(r=n.tmpls=[]),r.push(e)}function R(e){var t=M.tagNamespace,n=e.tagName.toLowerCase();return 0===n.indexOf(t+":")?n=n.split(":")[1]:0===n.indexOf(t+"-")&&(n=n.split("-")[1]),n}function q(e){for(var t,n;t=se.exec(e);){var r=t[1].toLowerCase(),o=t[2];n||(n={}),r.indexOf("-")>-1&&(r=r.replace(/-\w/g,function(e){return e.substr(1).toUpperCase()})),n[r]=o}return n}function V(e){var t,n=e.attributes;return l(n,function(n){var r=n.nodeName;if(r!==M.tagId&&n.specified){var o=n.nodeValue;t||(t=F()),"style"===r?o=e.style.cssText:0===r.indexOf("on")&&(r=r.replace(/on\w/,function(e){return"on"+e.substr(2).toUpperCase()})),v(t,r,o,!0)}}),t}function z(e){return ce.test(e)}function X(e){return e||(e=document),e.querySelectorAll("."+M.tagClassName)}function B(e){var t=e.length;if(0==t)return e;var n,r,o=0;for(n=0,t=e.length;t>n;n++)r=e.charCodeAt(n),o=(o<<5)-o+r,o|=0;return o}function F(){return Object.create(null)}var M=e("../core"),U=e("./escape"),K=e("object-assign"),J=Array.prototype,G=J.every,H=J.push,Q=s("length"),W=/({{1,2})([^"'\s{}]+)}{1,2}/g,Y=/{{1,2}[^"'\s{}]+}{1,2}/g,Z=/([\w$]+)(\(([^()]+)\))*/,ee=/^<([a-z{][-a-z0-9_:.}]*)[^>]*>$/i,te=/^<[^>]+\/>$/i,ne=/([^\s=]+)=((['"][^"']+['"])|(['"]?[^"'\s]+['"]?))/g,re=/^[a-z{][-a-z0-9_:.}]*/i,oe=/\/$/i,ae=/{([^"'\s{}]+)}/i,ie=/^\$(if|each|tmpl)/i,se=/([^\s:]+)[\s]?:[\s]?([^\s;]+)[;]?/g,ce=/^(if|each|else|tmpl)$/i,le={isArray:o,isArrayLike:c,isObject:a,isString:i,each:l,inArray:u,trim:p,throwIf:f,replaceParams:C,transformParams:m,transformParamsToObj:g,getXmlOpenTag:E,isXmlCloseTag:S,getOpenTag:N,isCloseTag:L,getOpenTagParams:w,isXmlSelfCloseTag:P,isSelfCloseTag:k,getInsideBraceParam:A,isControl:_,isControlCloseTag:I,getTagComponentName:R,getTagComponentAttrs:V,isTagControl:z,getTagComponents:X,getDataValue:h,getItemParam:y,isTmpl:$,addTmpl:D,assign:K,uniqueKey:B,lightObj:F,listPush:r,compiledParam:b,compiledParams:j,compiledProp:O};K(le,U),M.isArray=o,M.isArrayLike=c,M.isObject=a,M.isString=i,M.each=l,M.inArray=u,M.trim=p,M.assign=K,t.exports=le},{"../core":9,"./escape":10,"object-assign":1}],15:[function(e,t,n){"use strict";var r=e("./tools"),o=e("../checkElem/checkElem"),a=e("./setComponentEngine"),i=e("./registerComponent"),s=e("./filter");t.exports=r.assign({},o,a,i,s,r)},{"../checkElem/checkElem":3,"./filter":11,"./registerComponent":12,"./setComponentEngine":13,"./tools":14}]},{},[2])(2)});