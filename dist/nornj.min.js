!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?exports.NornJ=r():e.NornJ=r()}(this,function(){return function(e){function r(n){if(t[n])return t[n].exports;var a=t[n]={exports:{},id:n,loaded:!1};return e[n].call(a.exports,a,a.exports,r),a.loaded=!0,a.exports}var t={};return r.m=e,r.c=t,r.p="",r(0)}([function(e,r,t){"use strict";var n=t(1),a=t(2),i=t(14),s=t(17),p=t(19),l=t(20);n.compileStringTmpl=s,n.tmplByKey=p,n.config=l,a.assign(n,i,a);var u="undefined"!=typeof self?self:this;e.exports=u.NornJ=u.nj=n},function(e,r){"use strict";function t(){return t.compileStringTmpl.apply(null,arguments)}t.createElement=null,t.components={},t.asts={},t.templates={},t.errorTitle="NornJ:",t.tmplRule={},e.exports=t},function(e,r,t){"use strict";var n=t(3),a=t(5),i=t(6),s=t(7),p=t(8),l=t(9),u=t(10),o=t(11),c=t(12),f=t(13);f(),e.exports=n.assign({escape:p,setTmplRule:f},l,u,o,c,n,a,i,s)},function(e,r,t){"use strict";function n(e,r){return y.apply(e,r),e}function a(e){return Array.isArray(e)}function i(e){var r=typeof e;return!a(e)&&("function"===r||"object"===r&&!!e)}function s(e){return"[object String]"===Object.prototype.toString.call(e)}function p(e){return function(r){return null==r?void 0:r[e]}}function l(e){var r=b(e);return"number"==typeof r&&r>=0}function u(e,r,t,n){if(e)if(null==n&&(n=l(e)),t=t?t:e,n)for(var a=0,i=e.length;i>a;a++){var s=r.call(t,e[a],a);if(s===!1)break}else for(var p=Object.keys(e),i=p.length,a=0;i>a;a++){var u=p[a],s=r.call(t,e[u],u,a,i);if(s===!1)break}}function o(e){var r=[],t=0;if(a(e))for(var n=0,i=b(e);i>n;n++){var s=e[n];s=o(s);var p=0,l=s.length;for(r.length+=l;l>p;)r[t++]=s[p++]}else r[t++]=e;return r}function c(){}function f(e,r,t){if(!e)switch(t){case"expr":throw Error(j+'Expression "'+r+'" is undefined, please check it has been registered.');default:throw Error(j+(r||e))}}function m(e,r){var t=j;switch(r){case"filter":t+='A filter called "'+e+'" is undefined.';default:t+=e}return t}function v(e,r){var t=e.length;if(0==t)return e;null==r&&(r=0);var n,a;for(n=0,t=e.length;t>n;n++)a=e.charCodeAt(n),r=(r<<5)-r+a,r|=0;return r}function h(){return Object.create(null)}function g(e,r){if(null!=e){var t;if(null==r){var n=e[0];"'"===n?t=O:'"'===n&&(t=S)}else t=r?S:O;return t&&(e=e.replace(t,"")),e}}function d(e){return e.indexOf("-")>-1&&(e=e.replace(/-\w/g,function(e){return e.substr(1).toUpperCase()})),e}var x=t(1),_=t(4),y=Array.prototype.push,j=x.errorTitle,b=p("length"),S=/["]+/g,O=/[']+/g,P={isArray:a,isArrayLike:l,isObject:i,isString:s,each:u,flatten:o,throwIf:f,assign:_,uniqueKey:v,lightObj:h,listPush:n,clearQuot:g,toCamelCase:d,warn:m,noop:c};e.exports=P},function(e,r){"use strict";function t(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function n(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var r={},t=0;10>t;t++)r["_"+String.fromCharCode(t)]=t;var n=Object.getOwnPropertyNames(r).map(function(e){return r[e]});if("0123456789"!==n.join(""))return!1;var a={};return"abcdefghijklmnopqrst".split("").forEach(function(e){a[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},a)).join("")}catch(e){return!1}}var a=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;e.exports=n()?Object.assign:function(e,r){for(var n,s,p=t(e),l=1;arguments.length>l;l++){n=Object(arguments[l]);for(var u in n)a.call(n,u)&&(p[u]=n[u]);if(Object.getOwnPropertySymbols){s=Object.getOwnPropertySymbols(n);for(var o=0;s.length>o;o++)i.call(n,s[o])&&(p[s[o]]=n[s[o]])}}return p}},function(e,r,t){"use strict";function n(e){return x.xmlOpenTag.exec(e)}function a(e){return _.test(e)}function i(e){return y[e.toLowerCase()]}function s(e){for(var r,t,n=x.openTagParams;r=n.exec(e);){var a=r[1];if("/"!==a){t||(t=[]);var i=r[6],s=null!=r[3];i=null!=i?g.clearQuot(i):a,/\/>$/.test(i)?i=i.substr(0,i.length-2):(/>$/.test(i)||/\/$/.test(i))&&(i=i.substr(0,i.length-1)),t.push({key:a,value:i,onlyBrace:s})}}return t}function p(e,r){return g.isString(e)&&e.toLowerCase()==="</"+r+">"}function l(e){return x.insideBraceParam.exec(e)}function u(e){var r,t=x.expr.exec(e);if(t){r=[t[1]];var n=s(e);n&&r.push(n)}return r}function o(e,r){return g.isString(e)&&e==="/"+x.exprRule+r}function c(e){return"tmpl"===e}function f(e,r,t){var n=r.params;n||(n=r.params=g.lightObj());var a=n.tmpls;if(a){var i=a.strs[0],s=i.length;null!=t?i[t]=e:(i[s]=e,i.length=++s)}else{var i={length:0};null!=t?i[t]=e:(i[0]=e,i.length=1),n.tmpls=d.compiledParam(i)}}function m(e){return"params"===e||"props"===e}function v(e,r){r.paramsExpr?g.listPush(r.paramsExpr.content,e.content):r.paramsExpr=e}var h=t(1),g=t(3),d=t(6),x=h.tmplRule,_=/^<[^>]+\/>$/i,y={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0};e.exports={getXmlOpenTag:n,isXmlSelfCloseTag:a,verifySelfCloseTag:i,getOpenTagParams:s,isXmlCloseTag:p,getInsideBraceParam:l,isExpr:u,isExprCloseTag:o,isTmpl:c,addTmpl:f,isParamsExpr:m,addParamsExpr:v}},function(e,r,t){"use strict";function n(e){var r=u.lightObj();return u.each(e,function(e,t){r[t]=p(e)},!1,!1),r}function a(e,r){var t=u.lightObj();if(!r&&e.indexOf(".")>-1&&(e=e.replace(/\.([^\s.|\/]+)/g,"|prop($1)")),e.indexOf("|")>=0){var n,a=[];n=e.split("|"),e=n[0].trim(),n=n.slice(1),u.each(n,function(e){var r=i(e.trim()),t=u.lightObj(),n=r[1].toLowerCase();if(n){var s=r[3];if(s){var p=[];u.each(s.split(","),function(e){p[p.length]=u.clearQuot(e).trim()},!1,!0),t.params=p}t.name=n,a.push(t)}},!1,!0),t.filters=a}if(!r&&e.indexOf("../")>-1){var s=0;e=e.replace(/\.\.\//g,function(){return s++,""}),t.parentNum=s}return t.name=e,r&&(t.isStr=!0),t}function i(e){return c.exec(e)}function s(e,r){for(var t,n,a=o.replaceParam(),i=0;t=a.exec(e);){n||(n=[]);var s=t[3],p=[t[0],t[1],null,!1,!0];i>0&&(p[4]=!1),s=s.trim(),f.indexOf(s[0])>-1&&(s=u.clearQuot(s),p[3]=!0),p[2]=s,n.push(p),i++}return n}function p(e){var r=u.lightObj(),t=u.isString(e)?e.split(o.replaceSplit):[e],n=null,i=!1;if(t.length>1){var p=s(e,t);n=[],u.each(p,function(r){var t=u.lightObj();i=!!r[4]&&r[0]===e,t.prop=a(r[2],r[3]),t.escape=r[1].split(o.startRule).length<3,n.push(t)},!1,!0)}if(r.props=n,r.strs=t,r.isAll=i,i){var l=n[0].prop;0===l.name.indexOf("!#")&&(l.name=l.name.substr(2),r.isTmplPlace=!0)}return r}var l=t(1),u=t(3),o=l.tmplRule,c=/([\w$]+)(\(([^()]+)\))*/,f=["'",'"'];e.exports={compiledParam:p,compiledParams:n,compiledProp:a}},function(e,r,t){"use strict";function n(e){if(m.isObject(e))return e;for(var r,t,n=/([^\s:]+)[\s]?:[\s]?([^\s;]+)[;]?/g;r=n.exec(e);){var a=r[1],i=r[2];t||(t={}),/^[A-Z-]+$/.test(a)&&(a=a.toLowerCase()),a=m.toCamelCase(a),t[a]=i}return t}function a(e,r){for(var t,n,a=0,i=e.length;i>a;a++)if(n=e[a],n&&(t=n[r],null!=t))return t}function i(e,r,t,n){var a=e;return null==t&&(t=m.isArray(r)),(t||n)&&(a=m.listPush([e],n?t?r:[r]:r.slice(1))),a}function s(e,r,t){var n=r.parent,a="item"in t,s={data:a?t.item:n.data,parent:t.fallback?n:n.parent,index:"index"in t?t.index:n.index},p=a?i(t.item,r.data,r.multiData,t.addData):r.data,l=!!t.addData||r.multiData;return{parent:s,data:p,multiData:l}}function p(e){switch(e){case"class":e="className";break;case"for":e="htmlFor"}return e}function l(e,r){var t="";for(var n in e)if(!r||!r[n]){var a=e[n];t+=" "+n+(n!==a?'="'+a+'"':" ")}return t}function u(e,r,t,n){return function(a){return t(e,r,a,n)}}function o(e,r){return function(){var t,n=arguments,a=n.length;if(0<a)if(1===a)t=n[0];else{t=[];for(var i=0;a>i;i++)t[t.length]=n[i]}else t={};return r(e,{data:t,parent:this&&this._njParent?this._njParent:null,multiData:m.isArray(t)})}}function c(e){var r={useString:e.useString,exprs:f.exprs,filters:f.filters,getDatasValue:f.getDatasValue,noop:f.noop,lightObj:f.lightObj,throwIf:f.throwIf,warn:f.warn,getNewData:f.getNewData,newContextVars:f.newContextVars,styleProps:f.styleProps,exprRet:f.exprRet};return r.useString?(r.assignStringProp=f.assignStringProp,r.escape=f.escape):(r.h=f.createElement,r.components=f.components),m.each(e,function(e,t){0===t.indexOf("main")?(r[t]=o(r,e),r["_"+t]=e):0===t.indexOf("fn")&&(r[t]=e)},!1,!1),r}var f=t(1),m=t(3);e.exports={getNewData:i,newContextVars:s,getDatasValue:a,fixPropName:p,styleProps:n,assignStringProp:l,exprRet:u,tmplWrap:o,template:c}},function(e,r){"use strict";function t(e){return null==e?"":e.replace?e.replace(/[&><"']/g,function(e){return n[e]}):e}var n={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"};e.exports=t},function(e,r,t){"use strict";function n(e,r){var t={},n=r.hasElse?"contentElse":"content";if(!s.isArray(e))return s.isObject(e)&&"_njShim"in e&&!s.isArray(e._njShim)&&(e=e._njShim),t.type="nj_plaintext",t.content=[p.compiledParam(e)],void r[n].push(t);var i=e[0];if(s.isString(i)){var o,c,f,m,v,i=i,h=e.length,g=e[h-1],d=!1,x=!1;if(o=l.isExpr(i)){var _=o[0].toLowerCase();c=o[1],m=l.isTmpl(_),v=l.isParamsExpr(_),t.type="nj_expr",t.expr=_,null==c||m||(t.refer=p.compiledParam(c.reduce(function(e,r){return e+(r.onlyBrace?" "+r.key:"")},""))),l.isExprCloseTag(g,_)&&(x=!0),d=!0}else{var y=l.getXmlOpenTag(i);y&&(f=y[1],l.isXmlSelfCloseTag(i)?t.selfCloseTag=!0:x=l.isXmlCloseTag(g,f),d=!0)}if(d){var j=-1,b=!0;if(o)m?(b=!1,l.addTmpl(t,r,c?c[0].value:null)):v?b=!1:j=e.indexOf(u.exprRule+"else");else{t.type=f;var S=l.getInsideBraceParam(f);S&&(t.typeRefer=p.compiledParam(S[0]));var O=l.getOpenTagParams(i);O&&(t.params||(t.params=s.lightObj()),s.each(O,function(e){t.params[e.key]=p.compiledParam(e.value)},!1,!0)),t.selfCloseTag||(t.selfCloseTag=l.verifySelfCloseTag(f))}b&&r[n].push(t);var P=h-(x?1:0),E=e.slice(1,0>j?P:j);if(E&&E.length&&a(E,t),j>=0){var w=e.slice(j+1,P);t.hasElse=!0,w&&w.length&&a(w,t)}v&&l.addParamsExpr(t,r)}else a(e,r)}else s.isArray(i)&&a(e,r)}function a(e,r){r.content||(r.content=[]),r.hasElse&&!r.contentElse&&(r.contentElse=[]),s.each(e,function(e){n(e,r)},!1,!0)}var i=t(1),s=t(3),p=t(6),l=t(5),u=i.tmplRule;e.exports={checkElem:n}},function(e,r,t){"use strict";function n(e,r){var t=e;return i.isObject(e)||(t={},t[e]=r),i.each(t,function(e,r){a.components[r.toLowerCase()]=e},!1,!1),r}var a=t(1),i=t(3);e.exports={registerComponent:n}},function(e,r,t){"use strict";function n(e){var r={data:!0,parent:!0,index:!0,useString:!0};return e&&(r=i.assign(r,e)),r}function a(e,r,t){var a=e;i.isObject(e)||(a={},a[e]={filter:r,options:t}),i.each(a,function(e,r){var t=r.toLowerCase();if(e){var a=e.filter,i=e.options;a||i?(a&&(s[t]=a),i&&(l[t]=n(i))):s[t]=e}},!1,!1)}var i=t(3),s={prop:function(e,r){var t=e;return t&&i.each(r.split("."),function(e){t=t[e]},!1,!0),t},count:function(e){return e?e.length:0},item:function(e,r){return e?e[r]:null},equal:function(e,r){return e==r},lt:function(e,r,t){var n;return e=parseFloat(e),r=parseFloat(r),n=t?r>e:r>=e},gt:function(e,r,t){var n;return e=parseFloat(e),r=parseFloat(r),n=t?e>r:e>=r},add:function(e,r,t){return e+(t?parseFloat(r):parseInt(r,10))},int:function(e){return parseInt(e,10)},float:function(e){return parseFloat(e)},bool:function(e){return"false"!==e&&!!e}},p={data:!1,parent:!1,index:!1},l={prop:n(p),count:n(p),item:n(p),equal:n(p),lt:n(p),gt:n(p),add:n(p),int:n(p),float:n(p),bool:n(p)};e.exports={filters:s,filterConfig:l,registerFilter:a}},function(e,r,t){"use strict";function n(e){var r={data:!0,parent:!0,index:!0,useString:!0,paramsExpr:!1,result:!0,inverse:!0,newContext:!1};return e&&(r=i.assign(r,e)),r}function a(e,r,t){var a=e;i.isObject(e)||(a={},a[e]={expr:r,options:t}),i.each(a,function(e,r){var t=r.toLowerCase();if(e){var a=e.expr,i=e.options;a||i?(a&&(s[t]=a),i&&(l[t]=n(i))):s[t]=e}},!1,!1)}var i=t(3),s={if:function(e,r){"false"===e&&(e=!1);var t,n;return t=r?!e:!!e,n=t?this.result():this.inverse(),this.useString&&null==n?"":n},unless:function(e){return s.if.call(this,e,!0)},each:function(e){var r,t=this,n=t.useString;return e?(r=n?"":[],i.each(e,function(e,a){var i=t.result({item:e,index:a,fallback:!0});n?r+=i:r.push(i)},!1,i.isArrayLike(e)),n||r.length||(r=null)):(r=t.inverse(),n&&null==r&&(r="")),r},param:function(){var e,r=this.result(),t="";i.each(arguments,function(e,r){t+=e},!1,!0),null!=r?i.isArray(r)?(e="",i.each(i.flatten(r),function(r){e+=null!=r?r:""},!1,!0)):e=r:e=!this.useString||t,this.paramsExpr[t]=e},spreadparam:function(e){if(e){var r=this;i.each(e,function(e,t){r.paramsExpr[t]=e},!1,!1)}},equal:function(e,r){var t;return t=e==r?this.result():this.inverse()},for:function(e,r){var t,n=this.useString;for(t=n?"":[],null==r&&(r=e,e=0),e=parseInt(e,10),r=parseInt(r,10);r>=e;e++){var a=this.result({index:e});n?t+=a:t.push(a)}return t},blank:function(){return this.result()}},p={data:!1,parent:!1,index:!1},l={if:n(p),unless:n(p),each:n(i.assign({newContext:!0},p)),param:n(i.assign({inverse:!1,paramsExpr:!0},p)),spreadparam:n(i.assign({useString:!1,result:!1,inverse:!1,paramsExpr:!0},p)),equal:n(i.assign({useString:!1},p)),for:n(i.assign({newContext:!0},p,{data:!0})),blank:n(i.assign({useString:!1,inverse:!1},p))};s.prop=s.p=s.param,l.prop=l.p=l.param,s.spread=s.spreadparam,l.spread=l.spreadparam,e.exports={exprs:s,exprConfig:l,registerExpr:a}},function(e,r,t){"use strict";function n(e,r){return RegExp(e,r)}function a(e){for(var r,t="",n=0,a=e.length;a>n;n++)r=e[n],t.indexOf(r)<0&&(t+=r);return t}var i=t(1),s=t(3);e.exports=function(e,r,t,p,l,u){if(s.isObject(e)){var o=e;e=o.start,r=o.end,t=o.expr,p=o.external,l=o.prop,u=o.template}e||(e="{"),r||(r="}"),t||(t="#"),p||(p="$"),l||(l="@"),u||(u="template");var c=a(e+r),f=e[0],m=c.substr(1),v="#$@",h=a(t+v),g=t.replace(/\$/g,"\\$"),d=p.replace(/\$/g,"\\$");s.assign(i.tmplRule,{startRule:e,endRule:r,exprRule:t,externalRule:p,propRule:l,xmlOpenTag:n("^<([a-z"+f+h+"][-a-z0-9_|./"+m+"]*)[^>]*>$","i"),openTagParams:n("[\\s]+((("+e+"){1,2}[^"+c+"]+("+r+"){1,2})|[^\\s=>]+)(=(('[^']+')|(\"[^\"]+\")|([^\"'\\s]+)))?","g"),insideBraceParam:n("("+e+"){1,2}([^"+c+"]+)("+r+"){1,2}","i"),replaceBraceParam:function(){return n("[\\s]+("+e+"){1,2}([^"+c+"]+)("+r+"){1,2}","g")},replaceSplit:n("(?:"+e+"){1,2}[^"+c+"]+(?:"+r+"){1,2}"),replaceParam:function(){return n("(("+e+"){1,2})([^"+c+"]+)("+r+"){1,2}","g")},checkElem:function(){return n("([^>]*)(<([a-z"+f+"/"+h+"!][-a-z0-9_|."+c+h+"]*)([^>]*)>)([^<]*)","ig")},externalSplit:n(d+"\\{[^{}]*(?:\\{[^"+p+"]*\\})*[^{}]*\\}"),external:function(){return n(d+"\\{([^{}]*(\\{[^"+p+"]*\\})*[^{}]*)\\}","g")},expr:n("^"+g+"([^\\s]+)","i"),include:function(){return n("<"+g+"include([^>]*)>","ig")},template:u})}},function(e,r,t){"use strict";function n(e,r,t,n){if(e){if(l.isObject(r)){var i=r;r=i.tmplName,t=i.outputH,n=i.fileName}var s;if(r&&(s=p.templates[r]),!s){var c,f=l.isObject(e);if(f&&e.main)c=e;else{var m;if(r&&(m=p.asts[r]),!m){if(f&&"nj_root"===e.type)m=e;else{if(m=a(),l.isString(e)){var v=p.includeParser;v&&(e=v(e,n)),e=o(e)}l.checkElem(e,m)}r&&(p.asts[r]=m)}c=u(m.content,!t)}s=l.template(c),r&&(p.templates[r]=s)}return s.main}}function a(){var e=l.lightObj();return e.type="nj_root",e.content=[],e}function i(e,r){return n(e,r,!0)}function s(e,r){var t=a();return l.isString(e)&&(e=o(e)),l.checkElem(e,t),u(t.content,!r)}var p=t(1),l=t(2),u=t(15),o=t(17);e.exports={compile:n,compileH:i,precompile:s}},function(e,r,t){"use strict";function n(e,r,t,n,i){var s="",p=r.useString,l=f.isString(t),o=l||0===t,c=1===e.length?"1":"2",m={_type:0,_typeRefer:0,_params:0,_paramsE:0,_compParam:0,_dataRefer:0,_expr:0,_this:0,_value:0,_filter:0,_thisF:0,newContext:n};return p?m._children=0:m._compParam=0,o?(s+=a(),s+="if(!parent) {\n",s+="  if (data) parent = { data: multiData ? data[0] : data };\n",s+="  else parent = {};\n",s+="  p2.parent = parent;\n",s+="};\n"):n?(s+="var _p2 = p1.newContextVars(p1, p2, p3),\n",s+="  parent = _p2.parent,\n",s+="  data = _p2.data,\n",s+="  multiData = _p2.multiData;\n"):s+=a(),"2"===c&&(s+=p?"var ret = '';\n":"var ret = [];\n"),s+=u(e,r,m,c,i),"2"===c&&(s+="return ret;"),r[o?"main"+(l?t:""):"fn"+t]=Function("p1","p2","p3","p4",s),t}function a(){return"var parent = p2.parent,\n  data = p2.data,\n  multiData = p2.multiData;\n"}function i(e,r,t,n){var a,i=t.useString,p=!n&&e.escape;if(e.prop.isStr)a="'"+e.prop.name+"'";else{var l=e.prop.name,u=e.prop.parentNum,o="",c=!1;if("#"===l?(o="parent.index",c=!0):"."===l&&(o="parent.data",c=!0),u){o||(o="parent.data");for(var m=0;u>m;m++)o="parent."+o;c||(o+="['"+l+"']",c=!0)}a=c?o:"(!multiData ? data['"+l+"'] : p1.getDatasValue(data, '"+l+"'))"}var h=e.prop.filters;if(h){var g="_value"+r._value++,d="var "+g+" = "+a+";\n";return f.each(h,function(e){var t=r._filter++,n=r._thisF++,a=v[e.name],i=!a;d+="\nvar _filter"+t+" = p1.filters['"+e.name+"'];\n",d+="if (!_filter"+t+") {\n",d+="  p1.warn('"+e.name+"', 'filter');\n",d+="}\n",d+="else {\n",d+="  var _thisF"+n+" = p1.lightObj();\n",(i||a.useString)&&(d+="  _thisF"+n+".useString = p1.useString;\n"),(i||a.data)&&(d+="  _thisF"+n+".data = parent.data;\n",d+="  _thisF"+n+".datas = data;\n"),(i||a.parent)&&(d+="  _thisF"+n+".parent = parent.parent;\n"),(i||a.index)&&(d+="  _thisF"+n+".index = parent.index;\n"),d+="\n  "+g+" = _filter"+t+".apply(_thisF"+n+", ["+g+(e.params?e.params.reduce(function(e,r){return e+", '"+r+"'"},""):"")+"]);\n",d+="}\n"},!1,!0),{valueStr:s(g,i,p),filterStr:d}}return s(a,i,p)}function s(e,r,t){return r&&t?"p1.escape("+e+")":e}function p(e,r,t){var a=e.strs[0],s="",p="";return f.isString(a)?(s=e.isAll||""===a?"":"'"+a+"'",p="",f.each(e.props,function(n,l){var u,o=i(n,r,t);if(f.isString(o)?u=o:(u=o.valueStr,p+=o.filterStr),e.isAll)e.isTmplPlace&&(u+=".call({ _njParent: parent }, data)");else{var c=e.strs[l+1];u=(""===a&&0==l?"":" + ")+"("+u+")"+(""!==c?" + '"+c+"'":"")}if(s+=u,e.isAll)return!1},!1,!0)):f.isObject(a)&&null!=a.length?(s+="{\n",f.each(a,function(e,r,a,i){s+="length"!==r?'  "'+r+'": p1.main'+n(e.content,t,"T"+ ++t._noT):"  length: "+e,i-1>a&&(s+=","),s+="\n"},!1,!1),s+="}"):s=f.isObject(a)&&a._njEx?a._njEx:JSON.stringify(a._njShim?a._njShim:a),""===p?s:{valueStr:s,filterStr:p}}function l(e,r,t,a,s){var l="",c=r.useString;if("nj_plaintext"===e.type){var v,g=p(e.content[0],t,r);f.isObject(g)&&(v=g.filterStr,g=g.valueStr);var d=o(1,a,{text:g},r,s);v&&(d=v+d),l+=c?d:h(d)}else if("nj_expr"===e.type){var x=t._expr++,_=t._dataRefer++,y="";if(l+="\nvar _expr"+x+" = p1.exprs['"+e.expr+"'];\n",e.refer){y+="var _dataRefer"+_+" = [\n";var j=e.refer.props,b=j.length,v="";f.each(j,function(e,n){var a=i(e,t,r,!0);f.isObject(a)&&(v+=a.filterStr,a=a.valueStr),y+="  "+a+(b-1>n?",":"")},!1,!0),y+="\n];\n",""!==v&&(y=v+y),l+=y}l+="p1.throwIf(_expr"+x+", '"+e.expr+"', 'expr');\n";var S=t._this++,O=m[e.expr],P=!O,E=!!O&&O.newContext,w=t.newContext;l+="\nvar _this"+S+" = p1.lightObj();\n",(P||O.useString)&&(l+="_this"+S+".useString = p1.useString;\n"),(P||O.data)&&(l+="_this"+S+".data = parent.data;\n",l+="_this"+S+".datas = data;\n"),(P||O.parent)&&(l+="_this"+S+".parent = parent.parent;\n"),(P||O.index)&&(l+="_this"+S+".index = parent.index;\n");var R="p4";a&&a._paramsE&&(R=a._paramsE),(P||O.paramsExpr)&&(l+="_this"+S+".paramsExpr = "+R+";\n"),(P||O.result)&&(l+="_this"+S+".result = "+(e.content?"p1.exprRet(p1, "+(w?"_":"")+"p2, p1.fn"+n(e.content,r,++r._no,E,s)+", "+R+")":"p1.noop")+";\n"),(P||O.inverse)&&(l+="_this"+S+".inverse = "+(e.contentElse?"p1.exprRet(p1, "+(w?"_":"")+"p2, p1.fn"+n(e.contentElse,r,++r._no,E,s)+", "+R+")":"p1.noop")+";\n"),l+=o(2,a,{_expr:x,_dataRefer:""!==y?_:"none",_this:S},r,s)}else{var C,T=t._type++;C=e.typeRefer?e.typeRefer.props[0].prop.name:e.type.toLowerCase();var k;if(k=c?"'"+C+"'":"p1.components['"+C+"'] ? p1.components['"+C+"'] : '"+C+"'",e.typeRefer){var A=t._typeRefer++,N=p(e.typeRefer,t,r);f.isObject(N)&&(l+=N.filterStr,N=N.valueStr),l+="\nvar _typeRefer"+A+" = "+N+";\n",l+="var _type"+T+" = _typeRefer"+A+" ? _typeRefer"+A+" : ("+k+");\n"}else l+="\nvar _type"+T+" = "+k+";\n";var D=e.params,F=e.paramsExpr,$="";if(D||F){var I=t._params++;if($="var _params"+I+" = ",F){var L=t._paramsE++;if($+=(c?"''":"null")+";\n",$+="var _paramsE"+L+" = {};\n",$+=u(F.content,r,t,{_paramsE:"_paramsE"+L}),c){var K="";f.each(D,function(e,r,t,n){0==t&&(K+="{ "),K+=r+": 1",K+=n-1>t?", ":" }"},!1,!1),$+="_params"+I+" += p1.assignStringProp(_paramsE"+L+", "+(""===K?"null":K)+");\n"}else $+="\n_params"+I+" = _paramsE"+L+";\n"}if(D){var q=Object.keys(D),b=q.length,v="";c||F||($+="{\n"),f.each(q,function(e,n){var a=p(D[e],t,r);f.isObject(a)&&(v+=a.filterStr,a=a.valueStr),c||"style"!==e||(a="p1.styleProps("+a+")");var i=e,s="'"+i+"'"===a;c||(i=f.fixPropName(e)),$+=F?c?"_params"+I+" += ' "+i+(s?" '":"=\"' + "+a+" + '\"'")+";\n":"_params"+I+"['"+i+"'] = "+(s?"true":a)+";\n":c?(n>0?"  + ":"")+"' "+i+(s?" '":"=\"' + "+a+" + '\"'")+(n==b-1?";":"")+"\n":"  '"+i+"': "+(s?"true":a)+(b-1>n?",\n":"")},!1,!1),c||F||($+="\n};\n"),""!==v&&($=v+$)}l+=$}var B,V;c?(V=t._children++,l+="var _children"+V+" = '';\n"):(B=t._compParam++,l+="var _compParam"+B+" = [_type"+T+", "+(""!==$?"_params"+I:"null")+"];\n"),l+=u(e.content,r,t,c?{_children:"_children"+V}:{_compParam:"_compParam"+B},null!=s?s+1:s),l+=o(3,a,c?{_type:T,_params:""!==$?I:null,_children:V,_selfClose:e.selfCloseTag}:{_compParam:B},r,s)}return l}function u(e,r,t,n,a){var i="";return e?(f.each(e,function(e){i+=l(e,r,t,n,a)},!1,!0),i):i}function o(e,r,t,n,a){var i,s=n.useString;switch(e){case 1:i=c(a,s)+t.text+(s&&null!=a?" + '\\n'":"");break;case 2:i="_expr"+t._expr+".apply(_this"+t._this+("none"!==t._dataRefer?", _dataRefer"+t._dataRefer:"")+")";break;case 3:if(s){var p=c(a,s);i=p+"'<' + _type"+t._type+" + "+(null!=t._params?"_params"+t._params+" + ":""),t._selfClose?i+="' />\\n'":(i+="'>\\n'",i+=" + _children"+t._children+" + ",i+=p+"'</' + _type"+t._type+" + '>\\n'")}else i="p1.h.apply(null, _compParam"+t._compParam+")"}return"1"===r?"\nreturn "+i+";":"2"===r?s?"\nret += "+i+";\n":"\nret.push("+i+");\n":r._paramsE?"\n"+i+";\n":s?"\n"+r._children+" += "+i+";\n":"\n"+r._compParam+".push("+i+");\n"}function c(e,r){var t="";if(r&&null!=e&&e>0){t+="'";for(var n=0;e>n;n++)t+="  ";t+="' + "}return t}var f=(t(1),t(2)),m=f.exprConfig,v=f.filterConfig,h=t(16);e.exports=function(e,r){var t={useString:r,_no:0,_noT:0};return n(e,t,t._no,null,0),t}},function(e,r){"use strict";function t(e){return e.replace(a,function(e,r){return n[r]})}var n={nbsp:" ",ensp:" ",emsp:" ",thinsp:" ",zwnj:"‌",zwj:"‍",lt:"<",gt:">",amp:"&"},a=RegExp("&("+Object.keys(n).join("|")+");","g");e.exports=t},function(e,r,t){"use strict";function n(e){var r,t;if(this&&(r=this.tmplKey),r&&(t=v.strTmpls[r]))return t;var n,s=h.isString(e),l=e,u=arguments,o=0,c=[],f="";if(s){l=e.split(g.externalSplit);var x,_=g.external();for(n=[];x=_.exec(e);)n.push(x[1])}var y=l.length;return h.each(l,function(e,r){var t="";if(y-1>r){var a,i,p=e.length-1,l="@"===e[p];if(s){var m=n[r],v=m.match(/#(\d+)/);v&&null!=v[1]?a=u[parseInt(v[1],10)+1]:(a=m,l=i=!0)}else a=u[r+1];!h.isString(a)||l?(t="_nj-split"+o+"_",l&&(i?a=d({_njEx:a}):(e=e.substr(0,p),a=d(a))),c.push(a),o++):t=a}f+=e+t},!1,!0),f=i(f),null==r&&(r=h.uniqueKey(f+p(c)),t=v.strTmpls[r])?t:(t=a(f,c),m(t,r),v.strTmpls[r]=t,t)}function a(e,r){for(var t,n=[],a={elem:n,elemName:"root",parent:null},i=null,p=g.checkElem();t=p.exec(e);){var l=t[1],o=t[2],m=t[3],v=t[4],h=t[5];l&&"\n"!==l&&(l=s(l),f(l,a.elem,r)),o&&("/"===m[0]?m==="/"+a.elemName&&(a=a.parent):"/"===o[o.length-2]?c(o,m,v,a.elem,r):(i=a,a={elem:[],elemName:m,parent:i},i.elem.push(a.elem),u(o,m,v,a.elem,r))),h&&"\n"!==h&&(h=s(h),f(h,a.elem,r))}return n}function i(e){return e.replace(/<!--[\s\S]*?-->/g,"").replace(/>\s+([^\s<]*)\s+</g,">$1<").trim()}function s(e){return e.replace(/\n/g,"\\n").replace(/\r/g,"").trim()}function p(e){var r="";return h.each(e,function(e){r+=h.isArray(e)?"|"+l(e,!0):"|"+JSON.stringify(e)},!1,!0),r}function l(e,r){var t;if(r||h.isArray(e))if(null!=e.njKey)t="+"+e.njKey;else{t="";for(var n=0,a=e.length;a>n;n++)t+=l(e[n])}else t="+"+e;return t}function u(e,r,t,n,a,i){var s,p;if(r[0]===g.exprRule)s=e.substring(1,e.length-1);else if(0===r.indexOf(g.propRule))s=g.exprRule+"prop {'"+r.substr(g.propRule.length)+"'}"+t;else{var l=o(e,a);s=l.elem,p=l.params}if(i){var u=[s];p&&u.push(p),n.push(u)}else n.push(s),p&&n.push(p)}function o(e,r){var t,n=g.exprRule,a=g.startRule,i=g.endRule;return e=e.replace(/([^\s={}>]+)=['"]?_nj-split(\d+)_['"]?/g,function(e,s,p){return t||(t=[n+"params"]),t.push([n+"param "+a+"'"+s+"'"+i,r[p]]),""}),e=e.replace(g.replaceBraceParam(),function(e,r,s){s=s.trim();var p=s.replace(/\.\.\//g,"");return 0===p.indexOf("...")?(t||(t=[n+"params"]),t.push([n+"spreadParam "+a+s.replace(/\.\.\./g,"")+i+"/"])," "):" "+p+"="+e.trim()}),{elem:e,params:t}}function c(e,r,t,n,a){r===g.exprRule+"else"?n.push(e.substr(1,5)):u(e,r,t,n,a,!0)}function f(e,r,t){for(var n,a=/_nj-split(\d+)_/g,i=[];n=a.exec(e);)i.push(n[1]);i.length?h.each(e.split(/_nj-split(?:\d+)_/),function(e){""!==e&&r.push(e);var n=i.shift();null!=n&&r.push(t[n])},!1,!0):r.push(e)}function m(e,r){e.njKey=r,e.render=function(){return v.compile(this,this.njKey).apply(null,arguments)},e.renderH=function(){return v.compileH(this,this.njKey).apply(null,arguments)}}var v=t(1),h=t(3),g=(t(5),v.tmplRule),d=t(18);v.strTmpls={},e.exports=n},function(e,r){"use strict";e.exports=function(e){return{_njShim:e}}},function(e,r,t){"use strict";var n=t(17);e.exports=function(e){return function(){return n.apply({tmplKey:e},arguments)}}},function(e,r,t){"use strict";var n=t(1),a=t(13);e.exports=function(e){var r=e.delimiters,t=e.includeParser,i=e.createElement;r&&a(r),t&&(n.includeParser=t),i&&(n.createElement=i)}}])});
//# sourceMappingURL=nornj.min.js.map