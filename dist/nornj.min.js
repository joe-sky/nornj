!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.NornJ=n():e.NornJ=n()}(this,function(){return function(e){function n(t){if(r[t])return r[t].exports;var a=r[t]={exports:{},id:t,loaded:!1};return e[t].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}var r={};return n.m=e,n.c=r,n.p="",n(0)}([function(e,n,r){"use strict";var t=r(1),a=r(2),i=r(15),s=r(18),o=r(20),p=r(21);t.compileStringTmpl=s,t.tmplByKey=o,t.docReady=p,a.assign(t,i,a),"undefined"!=typeof React&&t.setComponentEngine("react",React,"undefined"!=typeof ReactDOM?ReactDOM:null);var l;"undefined"!=typeof self?(l=self,p(function(){t.componentLib&&t.renderTagComponent(t.initTagData,null,!0)})):l=this,e.exports=l.NornJ=l.nj=t},function(e,n){"use strict";function r(){return r.compileStringTmpl.apply(null,arguments)}r.componentLib=null,r.componentLibObj=null,r.componentLibDom=null,r.componentPort=null,r.componentRender=null,r.componentClasses={},r.asts={},r.templates={},r.errorTitle="NornJ:",r.tmplRule={},e.exports=r},function(e,n,r){"use strict";var t=r(3),a=r(5),i=r(6),s=r(7),o=r(8),p=r(9),l=r(10),u=r(11),c=r(12),f=r(13),m=r(14);m(),e.exports=t.assign({escape:o,setTmplRule:m},p,l,u,c,f,t,a,i,s)},function(e,n,r){"use strict";function t(e,n,r,t){return r&&!a(n)?(t&&null==n||(e[e.length]=n),e):(O.apply(e,n),e)}function a(e){return Array.isArray(e)}function i(e){var n=typeof e;return!a(e)&&("function"===n||"object"===n&&!!e)}function s(e){return"[object String]"===Object.prototype.toString.call(e)}function o(e){return function(n){return null==n?void 0:n[e]}}function p(e){var n=P(e);return"number"==typeof n&&n>=0}function l(e,n,r,t,a){if(e){var i;if(i=a?j:S,null==t&&(t=p(e)),r=r?r:e,t)i.call(e,function(e,t){var i=n.call(r,e,t);if(a)return i!==!1||i});else{var s=Object.keys(e),o=s.length;i.call(s,function(t,i){var s=n.call(r,e[t],t,i,o);if(a)return s!==!1||s})}}}function u(e,n){return e.indexOf(n)}function c(e){return e?e.trim():""}function f(){}function m(e,n,r){if(!e)switch(r){case"expr":throw Error(C+'Expression "'+n+'" is undefined, please check it has been registered.');default:throw Error(C+(n||e))}}function g(e,n){var r=C;switch(n){case"filter":r+='A filter called "'+e+'" is undefined.';default:r+=e}return r}function v(e,n){var r=e.length;if(0==r)return e;null==n&&(n=0);var t,a;for(t=0,r=e.length;r>t;t++)a=e.charCodeAt(t),n=(n<<5)-n+a,n|=0;return n}function h(){return Object.create(null)}function d(e){var n,r=e[0];return"'"===r?n=/[']+/g:'"'===r&&(n=/["]+/g),n&&(e=e.replace(n,"")),e}function x(e){return e.indexOf("-")>-1&&(e=e.replace(/-\w/g,function(e){return e.substr(1).toUpperCase()})),e}var _=r(1),y=r(4),b=Array.prototype,j=b.every,S=b.forEach,O=b.push,C=_.errorTitle,P=o("length"),E={isArray:a,isArrayLike:p,isObject:i,isString:s,each:l,inArray:u,trim:c,throwIf:m,assign:y,uniqueKey:v,lightObj:h,listPush:t,clearQuot:d,toCamelCase:x,warn:g,noop:f};e.exports=E},function(e,n){"use strict";function r(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function t(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var n={},r=0;10>r;r++)n["_"+String.fromCharCode(r)]=r;var t=Object.getOwnPropertyNames(n).map(function(e){return n[e]});if("0123456789"!==t.join(""))return!1;var a={};return"abcdefghijklmnopqrst".split("").forEach(function(e){a[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},a)).join("")}catch(i){return!1}}var a=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;e.exports=t()?Object.assign:function(e,n){for(var t,s,o=r(e),p=1;arguments.length>p;p++){t=Object(arguments[p]);for(var l in t)a.call(t,l)&&(o[l]=t[l]);if(Object.getOwnPropertySymbols){s=Object.getOwnPropertySymbols(t);for(var u=0;s.length>u;u++)i.call(t,s[u])&&(o[s[u]]=t[s[u]])}}return o}},function(e,n,r){"use strict";function t(e){return S.xmlOpenTag.exec(e)}function a(e){return O.test(e)}function i(e){return C[e.toLowerCase()]}function s(e,n){for(var r,t,a=/[\s]+([^\s={}>]+)(=(('[^']+')|("[^"]+")|([^"'\s]+)))?/g;r=a.exec(e);){var i=r[1];if("/"!==i&&"/>"!==i){t||(t=[]);var s,o=r[3];o=null!=o?b.clearQuot(o):i,s=o.length,n||(o.lastIndexOf("/>")===s-2?o=o.replace(/\/>/,""):o.lastIndexOf(">")===s-1&&(o=o.replace(/>/,""))),t.push({key:i,value:o})}}return t}function o(e,n){return b.isString(e)&&e.toLowerCase()==="</"+n+">"}function p(e){return S.openTag.exec(e)}function l(e){return P.test(e)}function u(e,n){return b.isString(e)&&e.toLowerCase()==="/"+n.toLowerCase()}function c(e){return S.insideBraceParam.exec(e)}function f(e){var n,r=S.expr.exec(e);if(r){n=[r[1]];var t=c(e);t&&n.push(t[0])}return n}function m(e,n){return b.isString(e)&&e==="/"+S.exprRule+n}function g(e){return"tmpl"===e}function v(e,n,r){var t=n.params;t||(t=n.params=b.lightObj());var a=t.tmpls;if(a){var i=a.strs[0],s=i.length;null!=r?i[r]=e:(i[s]=e,i.length=++s)}else{var i={length:0};null!=r?i[r]=e:(i[0]=e,i.length=1),t.tmpls=j.compiledParam(i)}}function h(e){return"params"===e||"props"===e}function d(e,n){n.paramsExpr?b.listPush(n.paramsExpr.content,e.content):n.paramsExpr=e}function x(e,n){return e||(e='script[type="text/nornj"]'+(n?"[autorender]":"")),document.querySelectorAll(e)}function _(e){for(var n=e.childNodes,r=n.length,t=0;r>t;t++)e.removeChild(e.firstChild)}var y=r(1),b=r(3),j=r(6),S=y.tmplRule,O=/^<[^>]+\/>$/i,C={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},P=/\/$/i;e.exports={getXmlOpenTag:t,isXmlSelfCloseTag:a,verifySelfCloseTag:i,getOpenTagParams:s,isXmlCloseTag:o,getOpenTag:p,isSelfCloseTag:l,isCloseTag:u,getInsideBraceParam:c,isControl:f,isControlCloseTag:m,isTmpl:g,addTmpl:v,isParamsExpr:h,addParamsExpr:d,getTagComponents:x,removeChildNode:_}},function(e,n,r){"use strict";function t(e){var n=l.lightObj();return l.each(e,function(e,r){n[r]=o(e)},!1,!1),n}function a(e,n){var r=l.lightObj();if(!n&&e.indexOf(".")>-1&&(e=e.replace(/\.([^\s.:\/]+)/g,":prop($1)")),e.indexOf(":")>=0){var t,a=[];t=e.split(":"),e=t[0].trim(),t=t.slice(1),l.each(t,function(e){var n=i(e.trim()),r=l.lightObj(),t=n[1].toLowerCase();if(t){var s=n[3];if(s){var o=[];l.each(s.split(","),function(e){o[o.length]=e.trim()},!1,!0),r.params=o}r.name=t,a.push(r)}},!1,!0),r.filters=a}if(!n&&e.indexOf("../")>-1){var s=0;e=e.replace(/\.\.\//g,function(){return s++,""}),r.parentNum=s}return r.name=e,n&&(r.isStr=!0),r}function i(e){return c.exec(e)}function s(e,n){for(var r,t,a,i,s=u.replaceParam(),o=/[^\s:]+([\s]?:[\s]?[^\s\(\)]+(\([^\(\)]+\))?(\.[^\s.]+)?){0,}/g,p=0;r=s.exec(e);){a||(a=[]);var c=0;for(i=r[3];t=o.exec(i);){var m=t[0],g=[r[0],r[1],m,!1,!0];m=m.trim(),f.indexOf(m[0])>-1&&(m=l.clearQuot(m),g[3]=!0),g[2]=m,a.push(g),c>0&&(g[4]=!1,n.splice(++p,0,"")),c++}p++}return a}function o(e){var n=l.lightObj(),r=l.isString(e)?e.split(u.replaceSplit):[e],t=null,i=!1;if(r.length>1){var o=s(e,r);t=[],l.each(o,function(n){var r=l.lightObj();i=!!n[4]&&n[0]===e,r.prop=a(n[2],n[3]),r.escape=n[1].split(u.beginRule).length<3,t.push(r)},!1,!0)}if(n.props=t,n.strs=r,n.isAll=i,i){var p=t[0].prop;0===p.name.indexOf("!#")&&(p.name=p.name.substr(2),n.isTmplPlace=!0)}return n}var p=r(1),l=r(3),u=p.tmplRule,c=/([\w$]+)(\(([^()]+)\))*/,f=["'",'"'];e.exports={compiledParam:o,compiledParams:t,compiledProp:a}},function(e,n,r){"use strict";function t(e){if(f.isObject(e))return e;for(var n,r,t=/([^\s:]+)[\s]?:[\s]?([^\s;]+)[;]?/g;n=t.exec(e);){var a=n[1],i=n[2];r||(r={}),/^[A-Z-]+$/.test(a)&&(a=a.toLowerCase()),a=f.toCamelCase(a),r[a]=i}return r}function a(e,n){for(var r,t,a=0,i=e.length;i>a;a++)if(t=e[a],t&&(r=t[n],null!=r))return r}function i(e,n,r){var t=e;return null==r&&(r=f.isArray(n)),r&&(t=f.listPush([e],n.slice(1))),t}function s(e){switch(e){case"class":e="className";break;case"for":e="htmlFor"}return e}function o(e,n){var r="";for(var t in e)n&&n[t]||(r+=" "+t+'="'+e[t]+'"');return r}function p(e,n,r,t,a){return function(i){return t(e,n,r,i,a)}}function l(e,n){return function(){var r,t=arguments,a=t.length;if(0<a)if(1===a)r=t[0];else{r=[];for(var i=0;a>i;i++)r[r.length]=t[i]}else r={};return n(e,{data:r,parent:this&&this._njParent?this._njParent:null},{multiData:c.isArray(r)})}}function u(e){var n={useString:e.useString,exprs:c.exprs,filters:c.filters,getDatasValue:c.getDatasValue,noop:c.noop,lightObj:c.lightObj,throwIf:c.throwIf,warn:c.warn,getItemParam:c.getItemParam,styleProps:c.styleProps,exprRet:c.exprRet};return n.useString?(n.assignStringProp=c.assignStringProp,n.escape=c.escape):(n.compPort=c.componentPort,n.compLib=c.componentLibObj,n.compClass=c.componentClasses),f.each(e,function(e,r){0===r.indexOf("main")?(n[r]=l(n,e),n["_"+r]=e):0===r.indexOf("fn")&&(n[r]=e)},!1,!1),n}var c=r(1),f=r(3);e.exports={getItemParam:i,getDatasValue:a,fixPropName:s,styleProps:t,assignStringProp:o,exprRet:p,tmplWrap:l,template:u}},function(e,n){"use strict";function r(e){return null==e?"":e.replace?e.replace(/[&><"']/g,function(e){return t[e]}):e}var t={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"};e.exports=r},function(e,n,r){"use strict";function t(e,n){var r={},t=n.hasElse?"contentElse":"content";if(!s.isArray(e))return s.isObject(e)&&"_njShim"in e&&!s.isArray(e._njShim)&&(e=e._njShim),r.type="nj_plaintext",r.content=[o.compiledParam(e)],void n[t].push(r);var i=e[0];if(s.isString(i)){var u,c,f,m,g,i=i,v=e.length,h=e[v-1],d=!1,x=p.getXmlOpenTag(i),_=!1;if(x)f=x[1],p.isXmlSelfCloseTag(i)?r.selfCloseTag=!0:_=p.isXmlCloseTag(h,f),d=!0;else if(u=p.isControl(i)){var y=u[0].toLowerCase();c=u[1],m=p.isTmpl(y),g=p.isParamsExpr(y),r.type="nj_expr",r.expr=y,null==c||m||(r.refer=o.compiledParam(c)),p.isControlCloseTag(h,y)&&(_=!0),d=!0}else{var b=p.getOpenTag(i);b&&(f=b[0],p.isSelfCloseTag(i)?(r.selfCloseTag=!0,d=!0):(_=p.isCloseTag(h,f),_&&(d=!0)))}if(d){var j=-1,S=!0;if(u)if(m){S=!1;var O=p.getInsideBraceParam(c);p.addTmpl(r,n,O?s.clearQuot(O[1]):null)}else g?S=!1:j=s.inArray(e,l.exprRule+"else");else{r.type=f;var C=p.getInsideBraceParam(f);C&&(r.typeRefer=o.compiledParam(C[0]));var P=p.getOpenTagParams(i,!x);P&&(r.params||(r.params=s.lightObj()),s.each(P,function(e){r.params[e.key]=o.compiledParam(e.value)},!1,!0)),r.selfCloseTag||(r.selfCloseTag=p.verifySelfCloseTag(f))}S&&n[t].push(r);var E=v-(_?1:0),T=e.slice(1,0>j?E:j);if(T&&T.length&&a(T,r),j>=0){var R=e.slice(j+1,E);r.hasElse=!0,R&&R.length&&a(R,r)}g&&p.addParamsExpr(r,n)}else a(e,n)}else s.isArray(i)&&a(e,n)}function a(e,n){n.content||(n.content=[]),n.hasElse&&!n.contentElse&&(n.contentElse=[]),s.each(e,function(e){t(e,n)},!1,!0)}var i=r(1),s=r(3),o=r(6),p=r(5),l=i.tmplRule;e.exports={checkElem:t}},function(e,n,r){"use strict";function t(e,n,r,t,s){a.componentLib=e,a.componentLibObj=n,r=r||n,a.componentLibDom=r,"react"===e&&(t="createElement",s="render"),a.componentPort=i.isString(t)?n[t]:t,a.componentRender=i.isString(s)?r[s]:s}var a=r(1),i=r(3);e.exports={setComponentEngine:t}},function(e,n,r){"use strict";function t(e,n){var r=e;return i.isObject(e)||(r={},r[e]=n),i.each(r,function(e,n){a.componentClasses[n.toLowerCase()]=e},!1,!1),n}var a=r(1),i=r(3);e.exports={registerComponent:t}},function(e,n,r){"use strict";function t(e){var n={data:!0,parent:!0,index:!0,useString:!0};return e&&(n=i.assign(n,e)),n}function a(e,n,r){var a=e;i.isObject(e)||(a={},a[e]={filter:n,options:r}),i.each(a,function(e,n){var r,a=n.toLowerCase();e&&e.filter?(s[a]=e.filter,r=e.options):s[a]=e,p[a]=t(r)},!1,!1)}var i=r(3),s={prop:function(e,n){var r=e;return r&&i.each(n.split("."),function(e){r=r[e]},!1,!0),r},count:function(e){return e?e.length:0},item:function(e,n){return e?e[n]:null},equal:function(e,n){return e==n},lt:function(e,n,r){var t;return e=parseFloat(e),n=parseFloat(n),t=r?n>e:n>=e},gt:function(e,n,r){var t;return e=parseFloat(e),n=parseFloat(n),t=r?e>n:e>=n},add:function(e,n,r){return e+(r?parseFloat(n):parseInt(n,10))},"int":function(e){return parseInt(e,10)},"float":function(e){return parseFloat(e)},bool:function(e){return"false"!==e&&!!e}},o={data:!1,parent:!1,index:!1},p={prop:t(o),count:t(o),item:t(o),equal:t(o),lt:t(o),gt:t(o),add:t(o),"int":t(o),"float":t(o),bool:t(o)};e.exports={filters:s,filterConfig:p,registerFilter:a}},function(e,n,r){"use strict";function t(e){var n={data:!0,parent:!0,index:!0,useString:!0,paramsExpr:!1,result:!0,inverse:!0,newContext:!1};return e&&(n=i.assign(n,e)),n}function a(e,n,r){var a=e;i.isObject(e)||(a={},a[e]={expr:n,options:r}),i.each(a,function(e,n){var r,a=n.toLowerCase();e&&e.expr?(s[a]=e.expr,r=e.options):s[a]=e,p[a]=t(r)},!1,!1)}var i=r(3),s={"if":function(e,n){"false"===e&&(e=!1);var r,t;return r=n?!e:!!e,t=r?this.result():this.inverse(),this.useString&&null==t?"":t},unless:function(e){return s.if.call(this,e,!0)},each:function(e){var n,r=this,t=r.useString;return e?(n=t?"":[],i.each(e,function(e,a){var i=r.result({item:e,index:a});t?n+=i:n.push(i)},!1,i.isArray(e)),t||n.length||(n=null)):(n=r.inverse(),t&&null==n&&(n="")),n},param:function(){var e,n=this.result(),r="";i.each(arguments,function(e,n){r+=e},!1,!0),null!=n?n.length>1?(e="",i.each(n,function(n){e+=n},!1,!0)):(e=n[0],e&&e._njShim&&(e=e._njShim)):e=r,this.paramsExpr[r]=e},spreadparam:function(e){if(e){var n=this;i.each(e,function(e,r){n.paramsExpr[r]=e},!1,!1)}},equal:function(e,n){var r;return r=e==n?this.result():this.inverse()},"for":function(e,n){var r,t=this.useString;for(r=t?"":[],null==n&&(n=e,e=0),e=parseInt(e,10),n=parseInt(n,10);n>=e;e++){var a=this.result({item:this.data,index:e});t?r+=a:r.push(a)}return r},blank:function(){return this.result()}},o={data:!1,parent:!1,index:!1},p={"if":t(o),unless:t(o),each:t(i.assign({newContext:!0},o)),param:t(i.assign({inverse:!1,paramsExpr:!0},o)),spreadparam:t(i.assign({useString:!1,result:!1,inverse:!1,paramsExpr:!0},o)),equal:t(i.assign({useString:!1},o)),"for":t(i.assign({newContext:!0},o,{data:!0})),blank:t(i.assign({useString:!1,inverse:!1},o))};s.prop=s.p=s.param,p.prop=p.p=p.param,s.spread=s.spreadparam,p.spread=p.spreadparam,e.exports={exprs:s,exprConfig:p,registerExpr:a}},function(e,n,r){"use strict";function t(e,n){return RegExp(e,n)}function a(e){for(var n,r="",t=0,a=e.length;a>t;t++)n=e[t],r.indexOf(n)<0&&(r+=n);return r}var i=r(1),s=r(3);e.exports=function(e,n,r){e||(e="{"),n||(n="}"),r||(r="#");var o=a(e+n),p=e[0],l=o.substr(1),u=a(r),c=r.replace(/\$/g,"\\$");s.assign(i.tmplRule,{beginRule:e,endRule:n,exprRule:r,xmlOpenTag:t("^<([a-z"+p+"][-a-z0-9_:./"+l+"]*)[^>]*>$","i"),openTag:t("^[a-z"+p+"][-a-z0-9_:./"+l+"]*","i"),insideBraceParam:t(e+"([^"+o+"]+)"+n,"i"),replaceBraceParam:function(){return t("[\\s]+("+e+"){1,2}([^"+o+"]+)("+n+"){1,2}","g")},replaceSplit:t("(?:"+e+"){1,2}[^"+o+"]+(?:"+n+"){1,2}"),replaceParam:function(){return t("(("+e+"){1,2})([^"+o+"]+)("+n+"){1,2}","g")},checkElem:function(){return t("([^>]*)(<([a-z"+p+"/"+u+"!][-a-z0-9_:."+o+u+"]*)[^>]*>)([^<]*)","ig")},expr:t("^"+c+"([^\\s]+)","i")})}},function(e,n,r){"use strict";function t(e,n,r){if(e){var t;if(n&&(t=l.templates[n]),!t){var i,s=u.isObject(e);if(s&&e.main)i=e;else{var o;n&&(o=l.asts[n]),o||(s&&"nj_root"===e.type?o=e:(o=a(),u.isString(e)&&(e=f(e)),u.checkElem(e,o)),n&&(l.asts[n]=o)),i=c(o.content,!r)}t=u.template(i),n&&(l.templates[n]=t)}return t.main}}function a(){var e=u.lightObj();return e.type="nj_root",e.content=[],e}function i(e,n){return t(e,n,!0)}function s(e,n,r){var t=u.getTagComponents(n,r),a=[];return u.each(t,function(n){var r=i(n.innerHTML,n.id),t=n.parentNode;"inferno"===l.componentLib&&u.removeChildNode(t),a.push(l.componentRender(r(e),t))},!1,!0),a}function o(e){l.initTagData=e}function p(e,n){var r=a();return u.checkElem(e,r),c(r.content,!n)}var l=r(1),u=r(2),c=r(16),f=r(18);e.exports={compile:t,compileComponent:i,renderTagComponent:s,setInitTagData:o,precompile:p}},function(e,n,r){"use strict";function t(e,n,r,t){var a="",i=n.useString,s=u.isString(r),o=s||0===r,l=1===e.length?"1":"2",c={_type:0,_typeRefer:0,_params:0,_paramsE:0,_compParam:0,_dataRefer:0,_expr:0,_this:0,_value:0,_filter:0,_thisF:0,newContext:t};return i?c._children=0:c._compParam=0,o?(a+="var parent = p2.parent;\n",a+="var data = p2.data;\n",a+="if(!parent) {\n",a+="  parent = p1.lightObj();\n",a+="  if (data) {\n",a+="    parent.data = p3.multiData ? data[0] : data;\n",a+="  }\n",a+="  p2.parent = parent;\n",a+="};\n"):t?(a+="var parent = p1.lightObj();\n",a+="parent.data = p4.item;\n",a+="parent.parent = p2.parent;\n",a+="parent.index = p4.index;\n",a+="var data = p1.getItemParam(p4.item, p2.data, p3.multiData);\n",a+="var _p2 = p1.lightObj();\n",a+="_p2.parent = parent;\n",a+="_p2.data = data;\n"):(a+="var parent = p2.parent;\n",a+="var data = p2.data;\n"),"2"===l&&(a+=i?"var ret = '';\n":"var ret = [];\n"),a+=p(e,n,c,l),"2"===l&&(a+="return ret;"),n[o?"main"+(s?r:""):"fn"+r]=Function("p1","p2","p3","p4","p5",a),r}function a(e,n,r,t){var a,s=r.useString,o=!t&&e.escape;if(e.prop.isStr)a="'"+e.prop.name+"'";else{var p=e.prop.name,l=e.prop.parentNum,c="",m=!1;if("#"===p?(c="parent.index",m=!0):"."===p&&(c="parent.data",m=!0),l){c||(c="parent.data");for(var g=0;l>g;g++)c="parent."+c;m||(c+="['"+p+"']",m=!0)}a=m?c:"(!p3.multiData ? data['"+p+"'] : p1.getDatasValue(data, '"+p+"'))"}var v=e.prop.filters;if(v){var h="_value"+n._value++,d="var "+h+" = "+a+";\n";return u.each(v,function(e){var r=n._filter++,t=n._thisF++,a=f[e.name],i=!a;d+="\nvar _filter"+r+" = p1.filters['"+e.name+"'];\n",d+="if (!_filter"+r+") {\n",d+="  p1.warn('"+e.name+"', 'filter');\n",d+="}\n",d+="else {\n",d+="  var _thisF"+t+" = p1.lightObj();\n",(i||a.useString)&&(d+="  _thisF"+t+".useString = p1.useString;\n"),(i||a.data)&&(d+="  _thisF"+t+".data = parent.data;\n"),(i||a.parent)&&(d+="  _thisF"+t+".parent = parent.parent;\n"),(i||a.index)&&(d+="  _thisF"+t+".index = parent.index;\n"),d+="\n  "+h+" = _filter"+r+".apply(_thisF"+t+", ["+h+(e.params?e.params.reduce(function(e,n){return e+", '"+n+"'"},""):"")+"]);\n",d+="}\n"},!1,!0),{valueStr:i(h,s,o),filterStr:d}}return i(a,s,o)}function i(e,n,r){return n&&r?"p1.escape("+e+")":e}function s(e,n,r){var i=e.strs[0],s="",o="";return u.isString(i)?(s=e.isAll||""===i?"":"'"+i+"'",o="",u.each(e.props,function(t,p){var l,c=a(t,n,r);if(u.isString(c)?l=c:(l=c.valueStr,o+=c.filterStr),e.isAll)e.isTmplPlace&&(l+=".call({ _njParent: parent }, data)");else{var f=e.strs[p+1];l=(""===i&&0==p?"":" + ")+"("+l+")"+(""!==f?" + '"+f+"'":"")}if(s+=l,e.isAll)return!1},!1,!0,!0)):u.isObject(i)&&i.length?(s+="{\n",u.each(i,function(e,n,a,i){s+="length"!==n?'  "'+n+'": p1.main'+t(e.content,r,"T"+ ++r._noT):"  length: "+e,i-1>a&&(s+=","),s+="\n"},!1,!1),s+="}"):s=JSON.stringify(i),""===o?s:{valueStr:s,filterStr:o}}function o(e,n,r,i){var o="",f=n.useString;if("nj_plaintext"===e.type){var g,v=s(e.content[0],r,n);u.isObject(v)&&(g=v.filterStr,v=v.valueStr);var h=l(1,i,{text:v},n);g&&(h=g+h),o+=f?h:m(h)}else if("nj_expr"===e.type){var d=r._expr++,x=r._dataRefer++,_="";if(o+="\nvar _expr"+d+" = p1.exprs['"+e.expr+"'];\n",e.refer){_+="var _dataRefer"+x+" = [\n";var y=e.refer.props,b=y.length,g="";u.each(y,function(e,t){var i=a(e,r,n,!0);u.isObject(i)&&(g+=i.filterStr,i=i.valueStr),_+="  "+i+(b-1>t?",":"")},!1,!0),_+="\n];\n",""!==g&&(_=g+_),o+=_}o+="p1.throwIf(_expr"+d+", '"+e.expr+"', 'expr');\n";var j=r._this++,S=c[e.expr],O=!S,C=!!S&&S.newContext,P=r.newContext;o+="\nvar _this"+j+" = p1.lightObj();\n",(O||S.useString)&&(o+="_this"+j+".useString = p1.useString;\n"),(O||S.data)&&(o+="_this"+j+".data = parent.data;\n"),(O||S.parent)&&(o+="_this"+j+".parent = parent.parent;\n"),(O||S.index)&&(o+="_this"+j+".index = parent.index;\n");var E="p5";i&&i._paramsE&&(E=i._paramsE),(O||S.paramsExpr)&&(o+="_this"+j+".paramsExpr = "+E+";\n"),(O||S.result)&&(o+="_this"+j+".result = "+(e.content?"p1.exprRet(p1, "+(P?"_":"")+"p2, p3, p1.fn"+t(e.content,n,++n._no,C)+", "+E+")":"p1.noop")+";\n"),(O||S.inverse)&&(o+="_this"+j+".inverse = "+(e.contentElse?"p1.exprRet(p1, "+(P?"_":"")+"p2, p3, p1.fn"+t(e.contentElse,n,++n._no,C)+", "+E+")":"p1.noop")+";\n"),o+=l(2,i,{_expr:d,_dataRefer:""!==_?x:"none",_this:j},n)}else{var T,R=r._type++;T=e.typeRefer?e.typeRefer.props[0].prop.name:e.type.toLowerCase();var w;if(w=f?"'"+T+"'":"p1.compClass['"+T+"'] ? p1.compClass['"+T+"'] : '"+T+"'",e.typeRefer){var L=r._typeRefer++,k=s(e.typeRefer,r,n);u.isObject(k)&&(o+=k.filterStr,k=k.valueStr),o+="\nvar _typeRefer"+L+" = "+k+";\n",o+="var _type"+R+" = _typeRefer"+L+" ? _typeRefer"+L+" : ("+w+");\n"}else o+="\nvar _type"+R+" = "+w+";\n";var A=e.params,N=e.paramsExpr,I="";if(A||N){var F=r._params++;if(I="var _params"+F+" = ",N){var D=r._paramsE++;if(I+=(f?"''":"null")+";\n",I+="var _paramsE"+D+" = {};\n",I+=p(N.content,n,r,{_paramsE:"_paramsE"+D}),f){var q="";u.each(A,function(e,n,r,t){0==r&&(q+="{ "),q+=n+": 1",q+=t-1>r?", ":" }"},!1,!1),I+="_params"+F+" += p1.assignStringProp(_paramsE"+D+", "+(""===q?"null":q)+");\n"}else I+="\n_params"+F+" = _paramsE"+D+";\n"}if(A){var K=Object.keys(A),b=K.length,g="";f||N||(I+="{\n"),u.each(K,function(e,t){var a=s(A[e],r,n);u.isObject(a)&&(g+=a.filterStr,a=a.valueStr),f||"style"!==e||(a="p1.styleProps("+a+")");var i;i=f?e:u.fixPropName(e),I+=N?f?"_params"+F+" += ' "+i+"=\"' + "+a+" + '\"';\n":"_params"+F+"."+i+" = "+a+";\n":f?(t>0?"  + ":"")+"' "+i+"=\"' + "+a+" + '\"'"+(t==b-1?";":"")+"\n":"  "+i+": "+a+(b-1>t?",\n":"")},!1,!1),f||N||(I+="\n};\n"),""!==g&&(I=g+I),o+=I}}var $,z;f?(z=r._children++,o+="var _children"+z+" = '';\n"):($=r._compParam++,o+="var _compParam"+$+" = [_type"+R+", "+(""!==I?"_params"+F:"null")+"];\n"),o+=p(e.content,n,r,f?{_children:"_children"+z}:{_compParam:"_compParam"+$}),o+=l(3,i,f?{_type:R,_params:""!==I?F:null,_children:z,_selfClose:e.selfCloseTag}:{_compParam:$},n)}return o}function p(e,n,r,t){var a="";return e?(u.each(e,function(e){a+=o(e,n,r,t)},!1,!0),a):a}function l(e,n,r,t){var a,i=t.useString;switch(e){case 1:a=r.text;break;case 2:a="_expr"+r._expr+".apply(_this"+r._this+("none"!==r._dataRefer?", _dataRefer"+r._dataRefer:"")+")";break;case 3:i?(a="'<' + _type"+r._type+" + "+(null!=r._params?"_params"+r._params+" + ":""),r._selfClose?a+="'/>'":(a+="'>'",a+=" + _children"+r._children+" + ",a+="'</' + _type"+r._type+" + '>'")):a="p1.compPort.apply(p1.compLib, _compParam"+r._compParam+")"}return"1"===n?"\nreturn "+a+";":"2"===n?i?"\nret += "+a+";\n":"\nret.push("+a+");\n":n._paramsE?"\n"+a+";\n":i?"\n"+n._children+" += "+a+";\n":"\n"+n._compParam+".push("+a+");\n"}var u=(r(1),r(2)),c=u.exprConfig,f=u.filterConfig,m=r(17);e.exports=function(e,n){var r={useString:n,_no:0,_noT:0};return t(e,r,r._no),r}},function(e,n){"use strict";function r(e){return e.replace(a,function(e,n){return t[n]})}var t={nbsp:" ",ensp:" ",emsp:" ",thinsp:" ",zwnj:"‌",zwj:"‍",lt:"<",gt:">"},a=RegExp("&("+Object.keys(t).join("|")+");","g");e.exports=r},function(e,n,r){"use strict";function t(e){var n,r;if(this&&(n=this.tmplKey),n&&(r=g.strTmpls[n]))return r;var t=v.isString(e),s=e,p=arguments,l=0,u=[],c="";t&&(s=e.split(h));var f=s.length;return v.each(s,function(e,n){var r="";if(f-1>n){var t=p[n+1],a=e.length-1,i="@"===e[a];!v.isString(t)||i?(r="_nj-split"+l+"_",i&&(e=e.substr(0,a),t=x(t)),u.push(t),l++):r=t}c+=e+r},!1,!0),c=i(c),null==n&&(n=v.uniqueKey(c+o(u)),r=g.strTmpls[n])?r:(r=a(c,u),m(r,n),g.strTmpls[n]=r,r)}function a(e,n){for(var r,t=[],a={elem:t,elemName:"root",parent:null},i=null,o=d.checkElem();r=o.exec(e);){var p=r[1],u=r[2],m=r[3],g=r[4];p&&"\n"!==p&&(p=s(p),f(p,a.elem,n)),u&&("/"===m[0]?m==="/"+a.elemName&&(a=a.parent):"/"===u[u.length-2]?c(u,m,a.elem,n):(i=a,a={elem:[],elemName:m,parent:i},i.elem.push(a.elem),l(u,m,a.elem,n))),g&&"\n"!==g&&(g=s(g),f(g,a.elem,n))}return t}function i(e){return e.replace(/<!--[\s\S]*?-->/g,"").replace(/>\s+([^\s<]*)\s+</g,">$1<").trim()}function s(e){return e.replace(/\n/g,"").trim()}function o(e){var n="";return v.each(e,function(e){n+=v.isArray(e)?"|"+p(e,!0):"|"+JSON.stringify(e)},!1,!0),n}function p(e,n){var r;if(n||v.isArray(e))if(null!=e.njKey)r="+"+e.njKey;else{r="";for(var t=0,a=e.length;a>t;t++)r+=p(e[t])}else r="+"+e;return r}function l(e,n,r,t,a){var i,s;if(n[0]===d.exprRule)i=e.substring(1,e.length-1);else{var o=u(e,t);i=o.elem,s=o.params}if(a){var p=[i];s&&p.push(s),r.push(p)}else r.push(i),s&&r.push(s)}function u(e,n){var r,t=d.exprRule,a=d.beginRule,i=d.endRule;return e=e.replace(/([^\s={}>]+)=['"]?_nj-split(\d+)_['"]?/g,function(e,s,o){return r||(r=[t+"params"]),r.push([t+"param "+a+"'"+s+"'"+i,n[o]]),""}),e=e.replace(d.replaceBraceParam(),function(e,n,s){s=s.trim();var o=s.replace(/\.\.\//g,"");return 0===o.indexOf("...")?(r||(r=[t+"params"]),r.push([t+"spreadParam "+a+s.replace(/\.\.\./g,"")+i+"/"])," "):" "+o+"="+e.trim()}),{elem:e,params:r}}function c(e,n,r,t){n===d.exprRule+"else"?r.push(e.substr(1,5)):l(e,n,r,t,!0)}function f(e,n,r){for(var t,a=/_nj-split(\d+)_/g,i=[];t=a.exec(e);)i.push(t[1]);i.length?v.each(e.split(/_nj-split(?:\d+)_/),function(e){""!==e&&n.push(e);var t=i.shift();null!=t&&n.push(r[t])},!1,!0):n.push(e)}function m(e,n){e.njKey=n,e.render=function(){return g.compile(this,this.njKey).apply(null,arguments)},e.renderComponent=function(){return g.compileComponent(this,this.njKey).apply(null,arguments)}}var g=r(1),v=r(3),h=(r(5),/\$\{\d+\}/),d=g.tmplRule,x=r(19);g.strTmpls={},e.exports=t},function(e,n){"use strict";e.exports=function(e){return{_njShim:e}}},function(e,n,r){"use strict";var t=r(18);e.exports=function(e){return function(){return t.apply({tmplKey:e},arguments)}}},function(e,n){"use strict";e.exports=function(e){var n=document;n.addEventListener?n.addEventListener("DOMContentLoaded",e,!1):self.attachEvent("onload",e)}}])});
//# sourceMappingURL=nornj.min.js.map