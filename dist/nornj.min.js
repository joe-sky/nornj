/*!
* NornJ template engine v5.0.0-alpha.6
* (c) 2016-2019 Joe_Sky
* Released under the MIT License.
*/
!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n(e.NornJ={})}(this,function(e){"use strict";function n(){return n["taggedTmpl"+(n.outputH?"H":"")].apply(null,arguments)}n.createElement=null,n.components={},n.componentConfig=new Map,n.preAsts={},n.asts={},n.templates={},n.errorTitle="[NornJ]",n.tmplRule={},n.outputH=!1,n.global="undefined"!=typeof self?self:global,n.textTag="nj-text",n.textMode=!1,n.noWsTag="nj-noWs",n.noWsMode=!1;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t=function(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e},a=function(){return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,n){var r=[],t=!0,a=!1,l=void 0;try{for(var i,o=e[Symbol.iterator]();!(t=(i=o.next()).done)&&(r.push(i.value),!n||r.length!==n);t=!0);}catch(e){a=!0,l=e}finally{try{!t&&o.return&&o.return()}finally{if(a)throw l}}return r}(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=Array.prototype.push,i=Array.prototype.slice,o=Object.prototype.hasOwnProperty,s=Object.prototype.toString,u=n.errorTitle,p=Object.defineProperty,c=Object.defineProperties;function f(e,n){return l.apply(e,n),e}function v(e,n,r){return i.call(e,n,r)}function m(e){return Array.isArray(e)}function d(e){var n=void 0===e?"undefined":r(e);return!m(e)&&("function"===n||"object"===n&&!!e)}function _(e){return"[object Number]"===s.call(e)}function g(e){return"[object String]"===s.call(e)}var x,h=(x="length",function(e){return null==e?void 0:e[x]});function y(e){var n=h(e);return"number"==typeof n&&n>=0}function b(e,n,r,t){if(e)if(null==t&&(t=y(e)),r=r||e,t)for(var a=0,l=e.length;l>a;a++){if(!1===n.call(r,e[a],a,l))break}else for(var i=Object.keys(e),o=i.length,s=0;o>s;s++){var u=i[s];if(!1===n.call(r,e[u],u,s,o))break}}var j=/(\n|\r)?[\s\xA0]+$/;function P(e){return e.replace(j,function(e,n){return n?"\n":""})}function S(){}function R(e,n,r){if(!e)switch(r){case"ex":throw Error(u+'Extension tag "'+n+'" is undefined, please check it has been registered.');default:throw Error(u+(n||e))}}function E(e,n){switch(n){case"f":e='A filter called "'+e+'" is undefined.'}console.warn(u+e)}function C(e){console.error(u+e)}function w(){return Object.create(null)}var O=/["]+/g,T=/[']+/g;function k(e,n){if(null!=e){var r=void 0;if(null==n){var t=e[0];"'"===t?r=T:'"'===t&&(r=O)}else r=n?O:T;return r&&(e=e.replace(r,"")),e}}function N(e){return e.indexOf("-")>-1&&(e=e.replace(/-\w/g,function(e){return e.substr(1).toUpperCase()})),e}var H=Object.assign||function(e){for(var n=1,r=arguments;r.length>n;n++){var t=r[n];for(var a in t)o.call(t,a)&&(e[a]=t[a])}return e};function A(e){return e[0].toUpperCase()+e.substr(1)}H(n,{defineProp:p,defineProps:c,arrayPush:f,arraySlice:v,isArray:m,isObject:d,isNumber:_,isString:g,isArrayLike:y,each:b,noop:S,throwIf:R,warn:E,obj:w,toCamelCase:N,assign:H,capitalize:A});var L=Object.freeze({defineProp:p,defineProps:c,arrayPush:f,arraySlice:v,isArray:m,isObject:d,isNumber:_,isString:g,isArrayLike:y,each:b,trimRight:P,noop:S,throwIf:R,warn:E,error:C,obj:w,clearQuot:k,toCamelCase:N,assign:H,capitalize:A});function $(e,r,t){var a=e,l=void 0;return d(e)||((a={})[e]={component:r,options:t}),b(a,function(e,r,t){if(null!=e){var a=e.component,i=e.options,o=r.toLowerCase(),s=a||e;n.components[o]=s,n.componentConfig.set(s,i)}0==t?l=e:(1==t&&(l=[l]),l.push(e))},!1,!1),l}function G(e,n){return RegExp(e,n)}function M(e){return e.replace(/\$/g,"\\$")}function I(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments[1],t=n.tmplRule,a=t.startRule,l=void 0===a?"{{":a,i=t.endRule,o=void 0===i?"}}":i,s=t.extensionRule,u=void 0===s?"#":s,p=t.propRule,c=void 0===p?"@":p,f=t.strPropRule,v=void 0===f?"@":f,m=t.templateRule,d=void 0===m?"template":m,_=t.tagSpRule,g=void 0===_?"#$@":_,x=t.commentRule,h=void 0===x?"#":x,y=e.start,b=e.end,j=e.extension,P=e.prop,S=e.strProp,R=e.template,E=e.tagSp,C=e.comment;y&&(l=y),b&&(o=b),j&&(u=j),P&&(c=P),S&&(v=S),R&&(d=R),E&&(g=E),null!=C&&(h=C);var w=l[0],O=o[o.length-1],T=function(e){for(var n="",r=0,t=e.length,a=void 0;t>r;r++)0>n.indexOf(a=e[r])&&(n+=a);return n}(u+c+v+g).replace(/\-/g,"\\-"),k=M(u),N=M(c),A=M(v),L=w+l,$=o+O,I=L+"[\\s\\S]+?"+$+"|"+l+"[\\s\\S]+?"+o,K={startRule:l,endRule:o,extensionRule:u,propRule:c,strPropRule:v,templateRule:d,tagSpRule:g,commentRule:h,firstChar:w,lastChar:O,braceParamStr:I,xmlOpenTag:G("^<([a-z"+w+T+"][^\\s>]*)[^>]*>$","i"),openTagParams:G("[\\s]+((("+L+"([\\s\\S]+?)"+$+")|("+l+"([\\s\\S]+?)"+o+"))|[^\\s=>]+)(=(('[^']+')|(\"[^\"]+\")|([^\"'\\s]+)))?","g"),exAttrs:G("[\\s]+((("+L+"([\\s\\S]+?)"+$+")|("+l+"([\\s\\S]+?)"+o+"))|((:?)("+k+")?([^\\s=>]+)))(=(('[^']+')|(\"[^\"]+\")|([^\"'\\s>]+)))?","g"),braceParam:G(I,"i"),braceParamG:G(I,"ig"),spreadProp:G("[\\s]+("+L+"[\\s]*(\\.\\.\\.[\\s\\S]+?)"+$+")|("+l+"[\\s]*(\\.\\.\\.[\\s\\S]+?)"+o+")","g"),replaceSplit:G(I),replaceParam:G("(("+L+")([\\s\\S]+?)"+$+")|(("+l+")([\\s\\S]+?)"+o+")","g"),checkElem:G("([^<>]+)|(<([a-z/!"+w+T+"][^\\s<>]*)([^<>]*)>|<)([^<]*)","ig"),extension:G("^"+k+"([^\\s]+)","i"),exAll:G("^([/]?)("+k+"|"+A+N+"|"+N+")([^\\s]+)","i"),include:G("<"+k+"include([^>]*)>","ig"),incompleteStart:G(l+"((?!"+o+")[\\s\\S])*$"),incompleteStartR:G(L+"((?!"+$+")[\\s\\S])*$"),incompleteEnd:G("^[\\s\\S]*?"+o),incompleteEndR:G("^[\\s\\S]*?"+$)};if(!r)return K;H(n.tmplRule,K)}I({},!0);var K={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},z=/[&><"']/g;var F={nbsp:" ",ensp:" ",emsp:" ",thinsp:" ",zwnj:"‌",zwj:"‍",lt:"<",gt:">",amp:"&",quot:'"',"#x27":"'"},W=RegExp("&("+Object.keys(F).join("|")+");","g");function D(e){return null==e?"":e.replace?e.replace(W,function(e,n){return F[n]}):e}H(n,{escape:function(e){return null==e?"":e.replace?e.replace(z,function(e){return K[e]}):e},unescape:D});var q=/^(-?([0-9]+[\.]?[0-9]+)|[0-9])$/;function B(e){if(d(e)||m(e)||_(e))return e;for(var n=/([^\s:]+)[\s]?:[\s]?([^;]+)[;]?/g,r=void 0,t=void 0;r=n.exec(e);){var a=r[1],l=r[2];t||(t={}),/^[A-Z-]+$/.test(a)&&(a=a.toLowerCase()),t[a=N(a)]=q.test(l)?+l:l}return t}function J(e,n,r){var t=void 0,a=void 0;n||(n=this.data);for(var l=0,i=n.length;i>l;l++)if((a=n[l])&&void 0!==(t=a[e]))return r?{_njCtx:a,val:t,prop:e}:t}function U(e,n){return null!=e&&null!=n.level&&(e+=n.level),e}function Z(e,n,r){return null==e?e:e.val._njTmpl?e.val.call({_njData:n.data,_njParent:n.parent,_njIndex:n.index,_njLevel:U(r,n),_njIcp:n.icp}):e.val.call(n.data[n.data.length-1],n)}function Q(e,n,r,t,a){var l=void 0;return t.icp&&(l=J(r,t.icp))||(l=n.cp[e]),null!=a&&l&&(l=l[a]),l||r}function X(e,n,r,t,a){return null!=e?g(e)?Q(e.toLowerCase(),r,e,a):e:Q(n,r,t,a)}function V(e,n){return null!=e&&""!==e?e:n}function Y(e,n){var r=e.args;if(r)for(var t=r.length;t--;)n.unshift(r[t])}function ee(e,n){return n?{data:n.data?f(n.data,e.data):e.data,parent:n.fallback?e:e.parent,root:e.root||e,index:"index"in n?n.index:e.index,item:"item"in n?n.item:e.item,level:e.level,getData:J,d:J,icp:e.icp}:e}function ne(e){switch(e){case"class":e="className";break;case"for":e="htmlFor"}return e}function re(){var e="",n=H.apply(L,arguments);for(var r in n){var t=n[r];e+=" "+r+(r!==t?'="'+t+'"':" ")}return e}function te(e,n,r,t,a){return function(l){return r(e,n,l,t,a)}}function ae(e,n){return function(r,t){var a=v(arguments);return n(e,{data:this&&this._njData?f(a,this._njData):a,parent:this?this._njParent:null,index:this?this._njIndex:null,item:this?this._njItem:null,level:this?this._njLevel:null,getData:J,d:J,icp:function(e,n){var r=void 0;return e&&e.components&&(m(r=e.components)||(r=[r])),n&&n._njIcp&&(r=r?f(r,n._njIcp):n._njIcp),r}(r&&r._njParam?t:r,this)})}}function le(e){if(null==e.level)return"";for(var n="",r=0;e.level>r;r++)n+="  ";return n}function ie(e){return null==e.index?"":0==e.index?"":"\n"}function oe(e){return n.createElement.apply(null,e)}function se(e){return e._njCtx?e.val.bind(e._njCtx):e}var ue={if:function(e,n){e&&e._njOpts&&(e=(n=e).props.condition),"false"===e&&(e=!1);var r=void 0;if(n.useUnless?!e:!!e)r=n.result();else{var t=n.props;if(t){var a=t.else;if(t.elseifs){var l=t.elseifs.length;b(t.elseifs,function(e,n){if(e.value)return r=e.fn(),!1;n===l-1&&a&&(r=a())},!1,!0)}else a&&(r=a())}}return n.useString&&null==r?"":r},else:function(e){return e.subExProps.else=e.result},elseif:function(e,n){e&&e._njOpts&&(e=(n=e).props.condition||n.props.value);var r=n.subExProps;r.elseifs||(r.elseifs=[]),r.elseifs.push({value:e,fn:n.result})},switch:function(e,n){e&&e._njOpts&&(e=(n=e).props.value);var r=void 0,t=n.props,a=t.elseifs.length;return b(t.elseifs,function(n,l){if(e===n.value)return r=n.fn(),!1;l===a-1&&t.else&&(r=t.else())},!1,!0),r},unless:function(e,n){return n.useUnless=!0,ue.if(e,n)},each:function(e,n){e&&e._njOpts&&(e=(n=e).props.of);var r=n.useString,t=n.props,a=void 0;if(e){a=r?"":[];var l=y(e);b(e,function(e,t,i,o){var s={data:[e],index:l?t:i,item:e,fallback:!0},u=void 0;u={"@first":0===s.index,"@last":s.index===(l?i:o)-1},l||(u||(u={}),u["@key"]=t),u&&s.data.push(u);var p=n.result(s);r?a+=p:a.push(p)},!1,l),r||a.length||(a=null),a&&a.length||!t||!t.else||(a=t.else())}else t&&t.else&&(a=t.else()),r&&null==a&&(a="");return a},prop:function(e,n){var r=n.result(),t=void 0;t=void 0!==r?r:!n.useString||e,n.exProps[n.outputH?ne(e):e]=t},spread:function(e,n){b(e,function(e,r){n.exProps[r]=e},!1,!1)},show:function(e){if(!e.result()){var n=e.attrs,r=e.useString;n.style||(n.style=r?"":{}),r?n.style+=(n.style?";":"")+"display:none":m(n.style)?n.style.push({display:"none"}):n.style.display="none"}},for:function(e,n,r){var a=1,l=void 0;if(e&&e._njOpts){var i=(r=e).props;Object.keys(i).forEach(function(r){var t=i[r];"to"===r?n=t:"step"===r?a=t:(e=t,l=r)})}else r.props&&(a=r.props.step||1);var o=void 0,s=r.useString;for(o=s?"":[];n>=e;e+=a){var u=r.result({data:l?[t({},l,e)]:null,index:e,fallback:!0});s?o+=u:o.push(u)}return o},obj:function(e){return e.props},list:function(){var e=arguments,n=e.length-1,r=e[n];if(n>0){var t=v(e,0,n);return r.useString&&(t=t.join("")),t}return[r.result()]},fn:function(e){var n=e.props;return function(){var r=arguments,t=void 0;if(n){t={};var a=Object.keys(n);a.forEach(function(e,n){return t[a[n]]=r[n]})}return e.result({data:[t]})}},block:function(e){return e.result()},pre:function(e){return ue.block(e)},with:function(e,n){if(e&&e._njOpts)return(n=e).result({data:[n.props]});var r=n.props;return n.result({data:[r&&r.as?t({},r.as,e):e]})},arg:function(e){var n=e.exProps;n.args||(n.args=[]),n.args.push(e.result())},once:function(e){var n=e.context.root||e.context,r=e.props,t=r&&r.name?r.name:"_njOnceCache_"+e._njFnsNo,a=n[t];return void 0===a&&(a=n[t]=e.result()),a},css:function(e){return e.props.style}};function pe(e,n){var r={onlyGlobal:!1,useString:!1,newContext:!0,exProps:!1,isProp:!1,subExProps:!1,isSub:!1,addSet:!1,useExpressionInJsx:"onlyTemplateLiteral"};return e&&(r=H(r,e)),n&&(r=H(r,n)),r}var ce={onlyGlobal:!0,newContext:!1},fe={if:pe(ce),else:pe({onlyGlobal:!0,newContext:!1,subExProps:!0,isSub:!0}),switch:pe(ce,{needPrefix:"onlyUpperCase"}),unless:pe(ce),each:pe({onlyGlobal:!0,newContext:{item:"item",index:"index",datas:{first:["@first","first"],last:["@last","last"]}}}),for:pe({onlyGlobal:!0,newContext:{index:"index",getDatasFromProp:{except:["to","step","index"]}}}),prop:pe({onlyGlobal:!0,newContext:!1,exProps:!0,subExProps:!0,isProp:!0}),spread:pe({onlyGlobal:!0,newContext:!1,exProps:!0,subExProps:!0,isProp:!0}),obj:pe({onlyGlobal:!0,newContext:!1}),list:pe(ce,{needPrefix:"onlyUpperCase"}),with:pe({onlyGlobal:!0,newContext:{getDatasFromProp:!0}}),style:{useExpressionInJsx:!1,needPrefix:!0}};function ve(e,n,r,t){var a=e;d(e)||((a={})[e]={extension:n,options:r}),b(a,function(e,n){if(e){var r=e.extension,a=e.options;r?ue[n]=r:t||(ue[n]=e),t?(fe[n]||(fe[n]={}),H(fe[n],a)):fe[n]=pe(a)}},!1,!1)}fe.elseif=pe(fe.else),fe.fn=pe(fe.with),fe.block=pe(fe.obj),fe.pre=pe(fe.obj,{needPrefix:!0}),fe.arg=pe(fe.prop),fe.once=pe(fe.obj),fe.show=pe(fe.prop),fe.css=pe(fe.obj),ue.case=ue.elseif,fe.case=fe.elseif,ue.empty=ue.default=ue.else,fe.empty=fe.default=fe.else,ue.strProp=ue.prop,fe.strProp=pe(fe.prop,{useString:!0}),ue.strArg=ue.arg,fe.strArg=pe(fe.strProp),H(n,{extensions:ue,extensionConfig:fe,registerExtension:ve});var me={".":function(e,n,r){return null==e?e:e._njCtx?{_njCtx:e.val,val:e.val[n],prop:n}:r?{obj:e,prop:n}:e[n]},_:function(e,n){return e&&null!=e.obj[e.prop]?e.obj[e.prop].apply(e.obj,n):null},"#":function(e,n,r){return null==e?e:Z({val:e[n],_njCtx:e},r.context,r.level)},"**":function(e,n){return Math.pow(e,n)},"%%":function(e,n){return Math.floor(e/n)},"?:":function(e,n,r){return e?n:r},"!":function(e){return!e},int:function(e){return parseInt(e,10)},float:function(e){return parseFloat(e)},bool:function(e){return"false"!==e&&!!e},reg:function(e,n){return RegExp(e,n)},css:function(e){return B(e)},"..":de(1),rLt:de(0),"<=>":function(e,n){return e>n?1:e==n?0:-1},capitalize:function(e){return A(e)}};function de(e){return function(n,r){return Object.keys(Array.apply(null,{length:r-n+e})).map(function(e){return+e+n})}}function _e(e){var n={onlyGlobal:!1,hasOptions:!0};return e&&(n=H(n,e)),n}var ge={onlyGlobal:!0,hasOptions:!1},xe={".":_e(ge),_:_e({onlyGlobal:!0}),"#":_e({onlyGlobal:!0}),"**":_e(ge),"%%":_e(ge),"?:":_e(ge),"!":_e(ge),int:_e(ge),float:_e(ge),bool:_e(ge),reg:_e(ge),css:_e(ge),"..":_e(ge),rLt:_e(ge),"<=>":_e(ge),capitalize:_e(ge)};me.prop=me["."],xe.prop=xe["."];var he=/\*|\||\/|\.|\?|\+/g;function ye(e,n,r,t){var a=e;d(e)||((a={})[e]={filter:n,options:r}),b(a,function(e,n){if(e){var r=e.filter,a=e.options;r?me[n]=r:t||(me[n]=e),t?(xe[n]||(xe[n]={}),H(xe[n],a)):xe[n]=_e(a)}},!1,!1)}n.REGEX_OPERATORS=RegExp(["+=","+","-[0-9]","-","**","*","%%","%","===","!==","==","!=","<=>","<=",">=","=","..<","<",">","&&","||","?:","?",":","../","..","/"].map(function(e){return e.replace(he,function(e){return"\\"+e})}).join("|"),"g"),H(n,{filters:me,filterConfig:xe,registerFilter:ye});var be=/('[^']*')|("[^"]*")|(-?[0-9][0-9]*(\.\d+)?)|true|false|null|undefined|Object|Array|Math|Date|JSON|(([a-zA-Z_$#@])([a-zA-Z_$\d]*))/,je=/_njQs(\d+)_/g,Pe=/_njSet_/;function Se(e,n){return e.replace(je,function(e,r){return n[r]})}var Re="This may be because the operator must have at least one space before and after";function Ee(e,n,r){return"Filter or expression syntax error: "+e+" in\n\nexpression: "+n+"\n\nsource: "+r+"\n\nNornJ expression syntax specification please see the document: https://joe-sky.github.io/nornj-guide/templateSyntax/filter.html\n"}var Ce=/_nj(L|G)t_/g,we={_njLt_:"<",_njGt_:">"},Oe=/"[^"]*"|'[^']*'/g,Te={"||":"or","..<":"rLt"},ke=/[\s]+((\|\||\.\.<)[\s]*)/g,Ne={")":")_(","]":"]_("},He=/(\)|\]|\.([^\s'"._#()|]+))[\s]*\(/g,Ae=/([(,|])[\s]+/g,Le=/\.([a-zA-Z_$#@][a-zA-Z_$\d]*)/g,$e=/([^\s([,])(\[)/g,Ge={"[":"list(","]":")","{":"obj(","}":")"},Me=/\[|\]|\{|\}/g,Ie=/^[\s]*set[\s]+|([(,])[\s]*set[\s]+/g,Ke=/^[\s]*([(]+)|([(,])[\s]*([(]+)/g,ze=["../"],Fe=/-[0-9]/,We=["","(","[",","];function De(e,r,t,a){var l=e[2].trim(),i=[e[0],e[1],null,!0];return t>0&&(i[3]=!1),a&&(l="set "+l),l=(l=l.replace(Ce,function(e){return we[e]}).replace(Oe,function(e){return r.push(e),"_njQs"+(r.length-1)+"_"})).replace(n.REGEX_OPERATORS,function(e,n){return Fe.test(e)?n>0&&0>We.indexOf(l[n-1].trim())?e.split("-").join(" - "):e:0>ze.indexOf(e)?" "+e+" ":e}).replace(Le,function(e,n){var r="#"===n[0];r&&(n=n.substr(1));var t=n.length-1,a=t>0&&"_"===n[t];return(r?"#":".")+"('"+(a?n.substr(0,t):n)+"')"+(a?"_":"")}).replace($e,function(e,n,r){return n+".("}).replace(Me,function(e){return Ge[e]}).replace(Ie,function(e,n){return(n||"")+"_njSet_"}).replace(Ke,function(e,n,r,t){return(r||"")+(r?t:n).replace(/[(]/g,"bracket(")}).replace(ke,function(e,n,r){return" "+Te[r]+" "}).replace(Ae,function(e,n){return n}).replace(He,function(e,n,r){return r?".('"+r+"')_(":Ne[n]}),i[2]=l.trim(),i}var qe=/\(([^()]*)\)/g,Be=/([!]+)((-?[0-9][0-9]*(\.\d+)?|[^\s,|'=]+)('bracket_\d+)?([._#]'bracket_\d+)*)/g,Je=/[\s]+([^\s(),|"']+)[\s]+((-?[0-9][0-9]*(\.\d+)?|[^\s,|']+)('bracket_\d+)?([._#]'bracket_\d+)*)/g,Ue=/[(,]/g,Ze=/(\|)?(((\.+|_|#+)'bracket_)|[\s]+([^\s._#|]+[\s]*'bracket_))/g;function Qe(e,n){return Xe((e=e.replace(Be,function(){var e=arguments;return n.push(Xe(e[2])),e[1]+"'bracket_"+(n.length-1)})).replace(Je,function(){var e=arguments;return n.push(Xe(e[2]))," "+e[1]+"'bracket_"+(n.length-1)}))}function Xe(e){return(" "+e).replace(Ue,function(e){return e+" "}).replace(Ze,function(e,n,r,t,a,l){return n?e:" | "+(t||l)}).trim()}function Ve(e,n,r,t,a){var l=w(),i=g(e),o=i?r?["",""]:e.split(n.replaceSplit):[e],s=null,u=!1;if(i&&(o=o.map(function(e){return e.replace(/\n/g,"_njNl_").replace(/\r/g,"")})),o.length>1){var p=[],c=function(e,n,r,t,a){var l=n.replaceParam,i=void 0,o=void 0,s=0;if(t)o=[De(i=[e,n.startRule,e],r,s,a)];else for(;i=l.exec(e);){o||(o=[]);var u=i[2];o.push(De([i[0],u||i[5],u?i[3]:i[6]],r,s,a)),s++}return o}(e,n,p,r,a);s=[],b(c,function(r){var t=w(),a=[];u=!!r[3]&&r[0]===e;var l=function e(n,r){var t=n.replace(qe,function(e,n){return r.push(Qe(n,r)),"'bracket_"+(r.length-1)});return t!==n?e(t,r):Qe(t,r)}(r[2],a);t.prop=function e(n,r,t,a){var l=w(),i=n;if(n.indexOf("|")>=0){var o=[],s=void 0;n=(s=n.split("|"))[0].trim(),b(s=s.slice(1),function(n){if(""!==(n=n.trim())){var l=n.split("'bracket_"),s=w(),u=l[0].trim();if(u){var p=l[1];if(null!=p){R(null!=r[p],Ee(Se(p,t)+". "+Re,Se(i,t),a));var c=[];b(r[p].split(","),function(n){""!==n&&(c[c.length]=e(n.trim(),r,t,a))},!1,!0),s.params=c}s.name=u,o.push(s)}}},!1,!0),l.filters=o}if(0===(n=Se(n,t)).indexOf("../")){var u=0;n=n.replace(/\.\.\//g,function(){return u++,""}),l.parentNum=u}if(""!==n){var p=be.exec(n),c="#"===p[6];l.name=c?p[7]:p[0],p[0]!==n&&C(Ee(Re,Se(i,t),a)),p[5]||(l.isBasicType=!0),c&&(l.isComputed=!0),l.name=l.name.replace(Pe,function(){return l.hasSet=!0,""})}else l.isEmpty=!0;return l}(l,a,p,e),t.escape=r[1]!==n.firstChar+n.startRule,s.push(t)},!1,!0)}return l.props=s,l.strs=o,l.isAll=u,l.onlyKey=t,l}var Ye=/^<[^>]+\/>$/i;var en={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0};function nn(e,n){for(var r=n.openTagParams,t=void 0,a=void 0;t=r.exec(e);){var l=t[1];if("/"!==l){a||(a=[]);var i=t[8],o=null!=t[4]?t[4]:t[6],s=!1;null!=i?i=k(i):(i=l,o||(s=!0)),t[9]||t[10]||(/\/>$/.test(i)?i=i.substr(0,i.length-2):(/>$/.test(i)||/\/$/.test(i))&&(i=i.substr(0,i.length-1)));var u=void 0;":"===l[0]&&(l=l.substr(1),u=!0),a.push({key:l,value:i,onlyBrace:o,hasColon:u,onlyKey:s})}}return a}function rn(e,n,r){var t=void 0,a=n.extension.exec(e);if(a&&(t=[a[1]],!r)){var l=nn(e,n);l&&t.push(l)}return t}function tn(e,n){return e.match(n.exAll)}function an(e){return"params"===e||"props"===e}function ln(e){var n=fe[e];return{isSub:!!n&&n.isSub,isProp:!!n&&n.isProp,useString:!!n&&n.useString,addSet:!!n&&n.addSet}}function on(e,n){return 0===e.indexOf(n.propRule)}function sn(e,n){return 0===e.indexOf(n.strPropRule+n.propRule)}var un=["style","script","textarea","pre","xmp","template","noscript",n.textTag];function pn(e,n,r,t,a){var l={type:"nj_plaintext"};l.content=[Ve(e,a,null,null,null!=n.ex?ln(n.ex).addSet:null)],l.allowNewline=t,n[r].push(l)}var cn=/_njBp(\d+)_/g;function fn(e,n,r,a,l,i){if(m(e)){var o={},s=e[0];if(g(s)){var u,p=e.length,c=e[p-1],v=!1,d=void 0,_=void 0,x=!1,h=void 0,y=void 0,j=void 0,S=void 0,R=void 0;if(u=rn(s,r)){var E=u[0];if(d=u[1],h=function(e){return"tmpl"===e}(E),!(y=an(E))){var C=ln(E);S=C.isSub,R=(j=C.isProp)?!a:S,C.useString&&(o.useString=C.useString)}o.type="nj_ex",o.ex=E,null==d||h||y||(o.args||(o.args=[]),b(d,function(e){var n=e.key,t=e.value;if("useString"!==n){if("_njIsProp"===n)return o.isProp=j=!0,void(R=!a);var l=Ve(t,r,e.hasColon,e.onlyKey);e.onlyBrace?o.args.push(l):(o.params||(o.params=w()),o.params[n]=l)}else o.useString=!("false"===t)},!1,!0)),v=!0}else{var O=function(e,n){return n.xmlOpenTag.exec(e)}(s,r);O&&(/\/$/.test(_=O[1])&&(_=_.substr(0,_.length-1)),!function(e){return Ye.test(e)}(s)?x=function(e,n){return g(e)&&e.toLowerCase()==="</"+n+">"}(c,_):o.selfCloseTag=!0,v=!0)}if(v){var T=!0;if(l&&(o.allowNewline=!0),u)h?(T=!1,function(e,n,r){var a=n.params;a||(a=n.params=w());var l=a.tmpls;if(l){var i=l.strs[0],o=i._njLen;i[null!=r?r:"_njT"+o]={node:e,no:o},i._njLen=++o}else{var s,u=(t(s={},null!=r?r:"_njT0",{node:e,no:0}),t(s,"_njLen",1),s);a.tmpls=Ve(u)}}(o,n,d?d[0].value:null)):(y||R)&&(T=!1),null==l&&"pre"===o.ex&&(l=!0,o.allowNewline="nlElem");else{o.type=_;var k=function(e,n){return n.braceParam.exec(e)}(_,r);k&&(o.typeRefer=Ve(k[0],r));var N=nn(s,r);N&&(o.params||(o.params=w()),b(N,function(e){o.params[e.onlyBrace?e.onlyBrace.replace(/\.\.\//g,""):e.key]=Ve(e.value,r,e.hasColon,e.onlyKey)},!1,!0)),o.selfCloseTag||(o.selfCloseTag=en[_.toLowerCase()]),null==l&&un.indexOf(_.toLowerCase())>-1&&(l=!0,o.allowNewline="nlElem")}T&&n.content.push(o);var H=e.slice(1,p-(x?1:0));H&&H.length&&vn(H,o,r,y||a&&!j,l),(y||R)&&function(e,n,r,t){var a=t?"propsExS":"paramsEx";if(n[a])f(n[a].content,r||t?[e]:e.content);else{var l=void 0;(l=r||t?{type:"nj_ex",ex:"props",content:[e]}:e).parentType=n.type,n[a]=l}}(o,n,j,S)}else vn(e,n,r,a,l)}else m(s)&&vn(e,n,r,a,l)}else if(g(e))if(l)pn(i&&"nlElem"===n.allowNewline?P(e):e,n,"content",l,r);else{var A=[];e.replace(r.braceParamG,function(e){return A.push(e),"_njBp"+(A.length-1)+"_"}).split(/\n/g).forEach(function(e,t){""!==(e=e.trim())&&pn(e.replace(cn,function(e,n){return A[n]}),n,"content",l,r)})}else pn(e,n,"content",l,r)}function vn(e,n,r,t,a){n.content||(n.content=[]),b(e,function(e,l,i){fn(e,n,r,t,a,l==i-1)},!1,!0)}function mn(e,n,r,t,a,l,i,o){var s="",u=null!=i?i:r.useString,p=g(t),c=p||0===t,f=1===e.length?"1":"2",v={_type:0,_params:0,_paramsE:0,_compParam:0,_dataRefer:0,_ex:0,_value:0,_filter:0,_fnH:0,_tmp:0,newContext:a};u?v._children=0:v._compParam=0,!c&&a&&(s+="p2 = p1.n(p2, p3);\n"),"2"===f&&(s+=u?"var ret = '';\n":"var ret = [];\n"),s+=Cn(e,n,r,v,f,l,i),"2"===f&&(s+="return ret;");try{var m=r[c?"main"+(p?t:""):"fn"+t]=Function("p1","p2","p3","p4","p5",s);p&&null!=o&&(m._njName=o)}catch(e){C("Failed to generate template function:\n\n"+e+" in\n\n"+s+"\n")}return t}function dn(e,n,r,t,a,l,i,o,s,u,p){var c=", useString: "+(null==n?"p1.us":n?"true":"false"),f=!e;if(r){var v=!e||e.newContext;if((f||e.exProps||r.isProp)&&(c+=", exProps: "+a),(f||e.subExProps||r.isProp)&&(c+=", subExProps: "+l),s){var m=null!=s.parentType?s.parentType:s.ex?s.ex:s.type;c+=", parentName: "+(null!=m?"'"+m+"'":m)}c+=", name: '"+r.ex+"'",u&&(c+=", tagName: "+u),p&&(c+=", attrs: "+p),c+=", result: "+(r.content?"p1.r(p1, p2, p1.fn"+mn(r.content,r,t,++t._no,v,i,n)+", "+a+", "+l+")":"p1.np"),null!=o&&(c+=", props: "+o)}return"{ _njOpts: true, _njFnsNo: "+t._no+", global: p1, context: p2, outputH: "+!t.useString+c+(null!=i?", level: "+i:"")+" }"}var _n="nj_custom",gn=["+","-","*","/","%","===","!==","==","!=","<=",">=","=","+=","<",">","&&","||","?",":"],xn=["=","+="],hn={or:"||"};function yn(e,n,r,t){var a=void 0,l=!1,i=e.isBasicType,o=e.isComputed,s=e.hasSet;if(i)a=e.name;else{var u=e.name,p=e.parentNum,c="",f=!1;switch(u){case"@index":c="index",l=!0;break;case"@item":c="item",l=!0;break;case"this":c="data",l=function(e){return e+"["+e+".length - 1]"};break;case"@data":c="data",l=!0;break;case"@g":c="p1.g",l=_n;break;case"@root":c="(p2.root || p2)",l=_n;break;case"@context":c="p2",l=_n;break;case"@lt":c="'<'",l=_n;break;case"@gt":c="'>'",l=_n;break;case"@lb":c="'{'",l=_n;break;case"@rb":c="'}'",l=_n;break;case"@q":c="'\"'",l=_n;break;case"@sq":c='"\'"',l=_n}if(p){c||(c="data");for(var v="p2"==c,m=0;p>m;m++)c=v?c+".parent":"parent."+c;l||(f=!0)}if(l||f){var _=l===_n?c:"p2."+c;d(l)&&(_=l(_)),a=l?_:(o?"p1.c(":"")+"p2.d('"+u+"', "+_+(o||s?", true":"")+")"+(o?", p2, "+t+")":"")}else a=(o?"p1.c(":"")+"p2.d('"+u+"'"+(o||s?", 0, true":"")+")"+(o?", p2, "+t+")":"")}return a&&(a=Pn(a)),function(e,n,r,t){return n.useString?r&&t!==_n?"p1.es("+e+")":e:D(e)}(a,r,!i&&!o&&n,l)}function bn(e){var n=hn[e];return null!=n?n:e}function jn(e){return Pn(e).replace(/_njNl_/g,"\\n").replace(/'/g,"\\'")}function Pn(e){return e.replace(/\\/g,"\\\\")}function Sn(e,n,r,t){var a=e.strs[0],l="";return g(a)?(l=e.isAll||""===a?"":"'"+jn(a)+"'",b(e.props,function(i,o){var s=function e(n,r,t,a,l,i){var o=n.filters&&0>gn.indexOf(bn(n.filters[0].name))?"":r?n.name:yn(n,t,a,i),s="";return n.filters&&n.filters.forEach(function(r,u){var p=n.filters[u+1]&&0>gn.indexOf(bn(n.filters[u+1].name)),c=bn(r.name);if(0>gn.indexOf(c))if("_"===c){var f="p1.f['"+c+"']("+s;r.params.length&&(f+=", [",r.params.forEach(function(n,o){f+=e(n,null,t,a,l,i),r.params.length-1>o&&(f+=", ")}),f+="]"),f+=")",p?s=f:(o+=f,s="")}else{var v=void 0,m=void 0,d=void 0,_=void 0;if("bracket"===c)v="(",m=")";else if("list"===c)v="[",m="]";else if("obj"===c)v="{ ",m=" }",d=!0;else{if("require"==c)v="require";else{var g="p1.f['"+c+"']";v=(_=xe[c])&&_.onlyGlobal?g:"p1.cf(p2.d('"+c+"', 0, true) || "+g+")"}v+="(",m=")"}var x=v;if(n.isEmpty&&0==u)r.params.forEach(function(n,o){x+=e(n,d,t,a,l,i),r.params.length-1>o&&(x+=", ")});else{x+=0==u?yn(n,t,a,i):""!==s?s:n.filters[u-1].params[0].filters?e(n.filters[u-1].params[0],null,t,a,l,i):yn(n.filters[u-1].params[0],t,a,i),r.params&&r.params.forEach(function(n,r){x+=", ",x+=n.filters?e(n,null,t,a,l,i):yn(n,t,a,i)});var h=n.filters[u+1];"."===c&&h&&"_"===bn(h.name)&&(x+=", true"),_&&!_.hasOptions||(x+=", "+dn(_,l,null,a,null,null,i))}x+=m,p?s=x:(o+=x,s="")}else 0>xn.indexOf(c)?o+=" "+c+" ":o+="._njCtx."+(0==u?n.name:k(n.filters[u-1].params[0].name))+" "+c+" ",n.filters[u+1]&&0>gn.indexOf(bn(n.filters[u+1].name))||(r.params[0].filters?(o+="(",o+=e(r.params[0],null,t,a,l,i),o+=")"):o+=yn(r.params[0],t,a,i))}),o}(i.prop,null,i.escape,n,r,t);if(e.isAll)s="("+s+")";else{var u=e.strs[o+1];s=(""===a&&0==o?"":" + ")+"("+s+")"+(""!==u?" + '"+jn(u)+"'":"")}if(l+=s,e.isAll)return!1},!1,!0)):d(a)&&null!=a._njLen&&(l+="{\n",b(a,function(e,r,a,i){if("_njLen"!==r){var o=0!==r.indexOf("_njT"),s="p1.main"+mn(e.node.content,e.node,n,"T"+ ++n._noT,null,null,null,o?r:null);l+='  "'+e.no+'": '+s,o&&(l+=',\n  "'+r+'": '+s)}else l+="  length: "+e;l+=",\n",a===i-1&&(l+="  _njData: p2.data,\n                         _njParent: p2.parent,\n                         _njIndex: p2.index,\n                         _njItem: p2.item,\n                         _njLevel: p1.l("+t+", p2),\n                         _njIcp: p2.icp\n")},!1,!1),l+="}"),l}function Rn(e,n,r,t,a,l,i,o,s,u){var p="var _paramsE"+n+" = {};\n",c={};return e?(c._paramsE=i,c._paramsSE="_paramsE"+n):(c._paramsE="_paramsE"+n,c._paramsSE=o),p+=Cn(r.content,r,t,a,c,null,l,s,u)}function En(e,n,r,t,a,l,i,o){var s=e.params,u=e.paramsEx,p=e.propsExS,c=n.useString,f=u||p,v="",m=void 0,d=void 0;if(s||f){if(m=r._params++,v="var "+(d="_params"+m)+" = ",s){var _=Object.keys(s),g=_.length;v+="{\n",b(_,function(e,r){var l=Sn(s[e],n,t,a);c||"style"!==e||(l="p1.sp("+l+")");var i=jn(e),o=s[e].onlyKey;c||(i=ne(i)),v+="  '"+i+"': "+(o?t?"'"+i+"'":"true":l)+(g-1>r?",\n":"")},!1,!1),v+="\n};\n"}if(f){var x=u&&p,h=void 0,y=void 0;s||(v+="{};\n"),u&&(h=r._paramsE++,v+=Rn(!1,h,u,n,r,t,l,i,o,d)),p&&(y=r._paramsE++,v+=Rn(!0,y,p,n,r,t,l,i,o,d)),v+=t?"\n"+d+" = p1.ans({}, _paramsE"+h+", "+d+");\n":x?"\n"+d+" = p1.an({}, _paramsE"+h+", _paramsE"+y+", "+d+");\n":"\n"+d+" = p1.an({}, _paramsE"+(null!=h?h:y)+", "+d+");\n"}else t&&(v+="\n"+d+" = p1.ans({}, "+d+");\n")}return[v,m]}function Cn(e,r,t,a,l,i,o,s,u){var p="";return e?(b(e,function(e){var c=e.useString;p+=function(e,r,t,a,l,i,o,s,u,p){var c="",f=t.useString;if("nj_plaintext"===e.type){var v=Sn(e.content[0],t,o,i);if(""===v)return c;var m=wn(e,r,1,l,{text:v},t,i,o,e.allowNewline,s);c+=f?m:D(m)}else if("nj_ex"===e.type){var d=a._ex++,_=a._dataRefer++,g="",x=fe[e.ex],h="_ex"+d,y="p1.x['"+e.ex+"']",j=void 0;x&&x.onlyGlobal?c+="\nvar "+h+" = "+y+";\n":(c+="\nvar "+h+";\n",c+="var "+(j="_fnH"+a._fnH++)+" = p2.d('"+e.ex+"', 0, true);\n",c+="if ("+j+") {\n",c+="  "+h+" = "+j+".val;\n",c+="} else {\n",c+="  "+h+" = "+y+";\n",c+="}\n"),g+="var _dataRefer"+_+" = [\n",e.args&&b(e.args,function(e,n){var r=Sn(e,t,o,i);g+="  "+r+","},!1,!0);var P="p4",S="p5";if(l){var R=l._paramsE,E=l._paramsSE;R&&(P=R),E&&(S=E)}var C=En(e,t,a,!1,i,P,S,u),w=C[0],O=C[1];g+=dn(x,o,e,t,P,S,i,""!==w?"_params"+O:null,r,u,p),g+="\n];\n",""!==w&&(g+="p1.aa(_params"+O+", _dataRefer"+_+");\n"),c+=w+g,c+=wn(e,r,2,l,{_ex:d,_dataRefer:_,fnH:j},t,i,o,e.allowNewline,s)}else{var T=a._type++,k=void 0,N=void 0,H="_type"+T;e.typeRefer?(N=Sn(e.typeRefer,t,i),k=e.typeRefer.props[0].prop.name):k=e.type;var A=void 0;if(f)A=N?"p1.en("+N+", '"+k+"')":"'"+k+"'";else{var L=k.toLowerCase(),$="";if(!N&&L.indexOf(".")>-1){var G=k.split(".");L=L.split(".")[0],k=G[0],$=", '"+G[1]+"'"}A=N?"p1.er("+N+", '"+L+"', p1, '"+k+"', p2)":"p1.e('"+L+"', p1, '"+k+"', p2"+$+")"}c+="\nvar _type"+T+" = "+A+";\n";var M=En(e,t,a,f,i,null,null,H),I=M[0],K=M[1];c+=I;var z=void 0,F=void 0;c+=f?"var _children"+(F=a._children++)+" = '';\n":"var _compParam"+(z=a._compParam++)+" = [_type"+T+", "+(""!==I?"_params"+K:"null")+"];\n",c+=Cn(e.content,e,t,a,f?{_children:"_children"+F}:{_compParam:"_compParam"+z},f&&e.type===n.noWsTag?null:null!=i?i+1:i,o,H),c+=wn(e,r,3,l,f?{_type:T,_typeS:k,_typeR:N,_params:""!==I?K:null,_children:F,_selfClose:e.selfCloseTag}:{_compParam:z},t,i,o,e.allowNewline,s)}return c}(e,r,t,a,l,i,null!=c?c:o,t._firstNode&&0==i,s,u),t._firstNode&&(t._firstNode=!1)},!1,!0),p):p}function wn(e,r,t,a,l,i,o,s,u,p){var c=void 0,f=i.useString,v=null!=s?s:f,m=null==o;switch(t){case 1:c=(!f||u||m?"":p?"nj_root"!==r.type?"p1.fl(p2) + ":"":"'\\n' + ")+On(o,i,u)+Tn(f,p||m)+l.text;break;case 2:c="_ex"+l._ex+".apply("+(l.fnH?l.fnH+" ? "+l.fnH+"._njCtx : p2":"p2")+", _dataRefer"+l._dataRefer+")";break;case 3:if(f)if(c=u&&"nlElem"!==u||m?"":p?"nj_root"!==r.type?"p1.fl(p2) + ":"":"'\\n' + ",e.type!==n.textTag&&e.type!==n.noWsTag){var d=On(o,i,u),_=e.content,g=l._typeR,x=null!=l._params;c+=d+Tn(f,p||m)+"'<"+(g?"' + _type"+l._type:l._typeS)+(x?(g?"":"'")+" + _params"+l._params:"")+(g||x?" + '":""),l._selfClose?c+=" />'":(c+=">'",c+=" + _children"+l._children+" + ",c+=(!_||u||m?"":"'\\n' + ")+(_?d:"")+Tn(f,m)+"'</"+(g?"' + _type"+l._type+" + '":l._typeS)+">'")}else c+="_children"+l._children;else c="p1.H(_compParam"+l._compParam+")"}return"1"===a?"\nreturn "+c+";":"2"===a?v?"\nret += "+c+";\n":"\nret.push("+c+");\n":a._paramsE||a._paramsSE?"\n"+c+";\n":f?"\n"+a._children+" += "+c+";\n":"\n"+a._compParam+".push("+c+");\n"}function On(e,n,r){var t="";if(r&&"nlElem"!==r)return t;if(n.useString&&null!=e&&e>0){t+="'";for(var a=0;e>a;a++)t+="  ";t+="' + "}return t}function Tn(e,n){return e&&!n?"p1.ls(p2) + ":""}var kn=function(e,n,r){var t={useString:r,_no:0,_noT:0,_firstNode:!0};return mn(e,n,t,t._no,null,0),t},Nn=n.preAsts,Hn="_njParam",An=["style","script","textarea","xmp",n.textTag],Ln=en;function $n(e){var r=""+e,t=Nn[r],l=this.outputH,i=this.tmplRule,o=this.onlyParse,s=this.fileName,u=this.isMustache,v=this.isCss;if(!t){var m=g(e)?[e]:e,d=m.length,_="",x=!1;b(m,function(e,n){var r="";if(0==n&&(u?e=(l?i.firstChar:"")+i.startRule+" "+e:v&&(e="<"+i.extensionRule+'css style="'+e)),d-1>n){var t=e.length-1,a="#"===e[t],o="..."===e.substr(t-2);x&&(x=!i["incompleteEnd"+("isR"===x?"R":"")].test(e)),x||(x=i.incompleteStartR.test(e)?"isR":i.incompleteStart.test(e)),a?e=e.substr(0,t):o&&(e=e.substr(0,t-2)),r=(a?"#":o?"...":"")+Hn+n,x||(r=i.startRule+r+i.endRule)}n==d-1&&(u?e+=" "+i.endRule+(l?i.lastChar:""):v&&(e+='" />')),_+=e+r},!1,!0);var h=n.includeParser;h&&(_=h(_,s,i)),_=function(e,n){var r=n.commentRule;return e.replace(RegExp("\x3c!--"+r+"[\\s\\S]*?"+r+"--\x3e","g"),"").replace(RegExp("([\\s]+:[^\\s=>]+=(('[^']+')|(\"[^\"]+\")))|("+n.braceParamStr+")","g"),function(e,n,r,t,a,l){return(n||l).replace(Kn,function(e){return In[e]})})}(_,i),l||(n.textMode&&(_="<"+n.textTag+">"+_+"</"+n.textTag+">"),n.noWsMode&&(_="<"+n.noWsTag+">"+_+"</"+n.noWsTag+">")),t=function(e,n,r){var t=[],l={elem:t,elemName:"root",parent:null},i=n.checkElem,o=void 0,s=void 0,u=null;for(;o=i.exec(e);){var p=o[1],c=o[2],f=o[3],v=o[4],m=o[5];if(u){var d=u,_=a(d,4),g=_[0],x=_[1],h=_[2],y=_[3],b=!!c&&tn(f,n);b&&!b[1]&&(on(f,n)||sn(f,n)||an(b[3])||ln(b[3]).isProp)?(l=Gn(x,l),Fn(g,x,h,l.elem,null,n,r)):Dn(g,x,h,l.elem,n,r),Mn(y,l),u=null}if(p&&""!==p&&qn(p,l.elem),c)if("<"!==c)if(0===c.indexOf("<!"))qn(c,l.elem);else{var j=tn(f,n);if("/"===f[0])if(f.substr(1).toLowerCase()===s&&(s=null),j||!s){var P=l.elemName;(0>P.indexOf(Hn)?f==="/"+P:f.indexOf(Hn)>-1)&&(l=l.parent)}else qn(c,l.elem);else if("/"===c[c.length-2])j||!s?Dn(c,f,v,l.elem,n,r):qn(c,l.elem);else if(j||!s)if(!s&&Ln[f.toLowerCase()])u=[c,f,v,m];else{var S=f.toLowerCase();An.indexOf(S)>-1&&(s=S),l=Gn(f,l),Fn(c,f,v,l.elem,null,n,r)}else qn(c,l.elem)}else null==m&&(m=""),m=c+m;!u&&Mn(m,l)}if(u){var R=u,E=a(R,4),C=E[0],w=E[1],O=E[2],T=E[3];Dn(C,w,O,l.elem,n,r),Mn(T,l)}return t}(_,i,l),p(t,"_njParamCount",{value:d-1}),Nn[r]=t}var y=void 0;if(o)y={_njTmpl:t,_njTmplKey:r};else{var j=void 0,P=arguments,S=t._njParamCount;if(S>0){p(j={},"_njParam",{value:!0});for(var R=0;S>R;R++)j[Hn+R]=P[R+1]}c(y=j?function(){return E.apply(this,f([j],arguments))}:function(){return E.apply(this,arguments)},{_njTmpl:{value:t},_njTmplKey:{value:r}});var E=n["compile"+(l?"H":"")](y,r,null,null,i)}return y}function Gn(e,n){var r={elem:[],elemName:e,parent:n};return n.elem.push(r.elem),r}function Mn(e,n){e&&""!==e&&qn(e,n.elem)}var In={"<":"_njLt_",">":"_njGt_"},Kn=/>|</g;function zn(e,n,r,t){return t.extensionRule+(e?"strProp":"prop")+" "+t.startRule+"'"+n.substr((e?t.strPropRule.length:0)+t.propRule.length)+"'"+t.endRule+r}function Fn(e,n,r,t,a,l,i){var o=void 0,s=void 0;if(rn(n,l,!0))o=e.substring(1,e.length-1);else if(sn(n,l))o=zn(!0,n,r,l);else if(on(n,l))o=zn(!1,n,r,l);else{var u=function(e,n,r){var t=n.extensionRule,a=n.startRule,l=n.endRule,i=n.firstChar,o=n.lastChar,s=n.exAttrs,u=void 0;return{elem:e=(e=e.replace(n.spreadProp,function(e,n,r,s,p){return r&&(p=r),u||(u=[t+"props"]),u.push([t+"spread "+(r?i:"")+a+p.replace(/\.\.\./,"")+l+(r?o:"")+"/"])," "})).replace(s,function(e,n,s,p,c,f,v,m,d,_,g,x,h){if(null==_)return e;u||(u=[t+"props"]);var y=void 0,b=void 0;g=g.replace(Wn,function(e,n,r,t,a){return r&&(y=r.substr(1).split("-").map(function(e){return"'"+e+"'"})),a&&(b=a.substr(1).split(/[_.]/).map(function(e){return"'"+e+"'"})),n});var j=[t+g+" _njIsProp"+(y?' arguments="'+a+"["+y.join(",")+"]"+l+'"':"")+(b?' modifiers="'+a+"["+b.join(",")+"]"+l+'"':"")+(x?"":" /")];return x&&j.push((d?(r?i:"")+a+" ":"")+k(h)+(d?" "+l+(r?o:""):"")),u.push(j)," "}),params:u}}(e,l,i);o=u.elem,s=u.params}if(a){var p=[o];s&&p.push(s),t.push(p)}else t.push(o),s&&t.push(s)}var Wn=/([^\s-$.]+)((-[^\s-$.]+)*)(([$.][^\s-$.]+)*)/;function Dn(e,n,r,t,a,l){/\/$/.test(n)&&(n=n.substr(0,n.length-1)),Fn(e,n,r,t,!0,a,l)}function qn(e,n){n.push(e)}function Bn(e){return function(r,t,a,l,i){if(r){if(d(t)){var o=t;t=o.tmplKey,a=o.fileName,l=o.delimiters,i=o.tmplRule}var s=void 0;if(t&&(s=n.templates[t]),!s){var u=d(r),p=void 0;if(u&&r.main)p=r;else{var f=void 0;t&&(f=n.asts[t]),f||(u&&"nj_root"===r.type?f=r:(i||(i=l?I(l):n.tmplRule),f=Zn(),g(r)&&(r=$n.call({tmplRule:i,outputH:e,onlyParse:!0,fileName:a},r)),fn(r._njTmpl,f,i)),t&&(n.asts[t]=f)),p=kn(f.content,f,!e)}s=function(e){var r={us:e.useString,x:n.extensions,f:n.filters,np:S,tf:R,wn:E,n:ee,c:Z,sp:B,r:te,e:Q,er:X,en:V,aa:Y,an:H,g:n.global,l:U,cf:se};return r.us?(r.ans=re,r.es=n.escape,r.ls=le,r.fl=ie):(r.h=n.createElement,r.H=oe,r.cp=n.components),b(e,function(e,n){0===n.indexOf("main")?(r[n]=ae(r,e),c(r[n],{_njTmpl:{value:!0},tmplName:{value:e._njName}}),r["_"+n]=e):0===n.indexOf("fn")&&(r[n]=e)},!1,!1),r}(p),t&&(n.templates[t]=s)}return s.main}}}var Jn=Bn(),Un=Bn(!0);function Zn(){var e=w();return e.type="nj_root",e.content=[],e}function Qn(e){return function(n,r){return(e?Un:Jn)(n,r?{tmplKey:r.tmplKey?r.tmplKey:n._njTmplKey,fileName:r.fileName,delimiters:r.delimiters}:n._njTmplKey).apply(null,v(arguments,1))}}var Xn=Qn(),Vn=Qn(!0);function Yn(e){return function(n,r){var t=(e?Un:Jn)(n,n._njTmplKey);if(r){var a=function(){return t.apply(this,f([r],arguments))};return p(r,"_njParam",{value:!0}),c(a,{_njTmpl:{value:!0}}),a}return t}}var er=Yn(),nr=Yn(!0);function rr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.outputH,t=e.delimiters,a=e.fileName,l=e.isMustache,i=e.isCss,o=t?I(t):n.tmplRule;return function(){return $n.apply({tmplRule:o,outputH:r,fileName:a,isMustache:l,isCss:i},arguments)}}function tr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.outputH=!0,rr(e)}H(n,{compile:Jn,compileH:Un,precompile:function(e,n,r){var t=Zn();e.quasis?e=$n.call({tmplRule:r,outputH:n,onlyParse:!0,isMustache:e.isExpresson,isCss:e.isCss},e.quasis):g(e)&&(e=$n.call({tmplRule:r,outputH:n,onlyParse:!0},e));return fn(e._njTmpl,t,r),kn(t.content,t,!n)},render:Xn,renderH:Vn,buildRender:er,buildRenderH:nr});var ar=rr(),lr=tr();function ir(){return(n.outputH?lr:ar).apply(null,arguments)()}var or=rr({isMustache:!0}),sr=tr({isMustache:!0});function ur(){return(n.outputH?sr:or).apply(null,arguments)()}var pr=tr({isCss:!0});function cr(){return pr.apply(null,arguments)()}H(n,{createTaggedTmpl:rr,createTaggedTmplH:tr,taggedTmpl:ar,taggedTmplH:lr,template:ir,mustache:ur,expression:ur,css:cr}),H(n,{registerComponent:$,getComponentConfig:function(e){return n.componentConfig.get(g(e)?n.components[e]:e)},createTmplRule:I,config:function(e){var r=e.delimiters,t=e.includeParser,a=e.createElement,l=e.outputH,i=e.textMode,o=e.noWsMode;r&&I(r,!0),t&&(n.includeParser=t),a&&(n.createElement=a),null!=l&&(n.outputH=l),null!=i&&(n.textMode=i),null!=o&&(n.noWsMode=o)}});var fr=n.global;fr.NornJ=fr.nj=n,e.registerComponent=$,e.default=n,e.registerExtension=ve,e.registerFilter=ye,e.compile=Jn,e.compileH=Un,e.render=Xn,e.renderH=Vn,e.taggedTmpl=ar,e.taggedTmplH=lr,e.template=ir,e.mustache=ur,e.expression=ur,e.css=cr,Object.defineProperty(e,"__esModule",{value:!0})});
