!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?exports.NornJ=r():e.NornJ=r()}(this,function(){return function(e){function r(n){if(t[n])return t[n].exports;var a=t[n]={exports:{},id:n,loaded:!1};return e[n].call(a.exports,a,a.exports,r),a.loaded=!0,a.exports}var t={};return r.m=e,r.c=t,r.p="",r(0)}([function(e,r,t){"use strict";var n=t(1),a=t(2),i=t(14),s=t(17),l=t(19),p=t(20);n.compileStringTmpl=s,n.tmplByKey=l,n.config=p,a.assign(n,i,a);var u="undefined"!=typeof self?self:this;e.exports=u.NornJ=u.nj=n},function(e,r){"use strict";function t(){return t.compileStringTmpl.apply(null,arguments)}t.createElement=null,t.components={},t.asts={},t.templates={},t.errorTitle="NornJ:",t.tmplRule={},e.exports=t},function(e,r,t){"use strict";var n=t(3),a=t(5),i=t(6),s=t(7),l=t(8),p=t(9),u=t(10),o=t(11),c=t(12),f=t(13);f(),e.exports=n.assign({escape:l,setTmplRule:f},p,u,o,c,n,a,i,s)},function(e,r,t){"use strict";function n(e,r){return y.apply(e,r),e}function a(e){return Array.isArray(e)}function i(e){var r=typeof e;return!a(e)&&("function"===r||"object"===r&&!!e)}function s(e){return"[object String]"===Object.prototype.toString.call(e)}function l(e){return function(r){return null==r?void 0:r[e]}}function p(e){var r=b(e);return"number"==typeof r&&r>=0}function u(e,r,t,n){if(e)if(null==n&&(n=p(e)),t=t?t:e,n)for(var a=0,i=e.length;i>a;a++){var s=r.call(t,e[a],a);if(s===!1)break}else for(var l=Object.keys(e),i=l.length,a=0;i>a;a++){var u=l[a],s=r.call(t,e[u],u,a,i);if(s===!1)break}}function o(e){var r=[],t=0;if(a(e))for(var n=0,i=b(e);i>n;n++){var s=e[n];s=o(s);var l=0,p=s.length;for(r.length+=p;p>l;)r[t++]=s[l++]}else r[t++]=e;return r}function c(){}function f(e,r,t){if(!e)switch(t){case"expr":throw Error(j+'Expression "'+r+'" is undefined, please check it has been registered.');default:throw Error(j+(r||e))}}function m(e,r){var t=j;switch(r){case"filter":t+='A filter called "'+e+'" is undefined.';default:t+=e}return t}function v(e,r){var t=e.length;if(0==t)return e;null==r&&(r=0);var n,a;for(n=0,t=e.length;t>n;n++)a=e.charCodeAt(n),r=(r<<5)-r+a,r|=0;return r}function h(){return Object.create(null)}function g(e,r){if(null!=e){var t;if(null==r){var n=e[0];"'"===n?t=O:'"'===n&&(t=S)}else t=r?S:O;return t&&(e=e.replace(t,"")),e}}function x(e){return e.indexOf("-")>-1&&(e=e.replace(/-\w/g,function(e){return e.substr(1).toUpperCase()})),e}var d=t(1),_=t(4),y=Array.prototype.push,j=d.errorTitle,b=l("length"),S=/["]+/g,O=/[']+/g,P={isArray:a,isArrayLike:p,isObject:i,isString:s,each:u,flatten:o,throwIf:f,assign:_,uniqueKey:v,lightObj:h,listPush:n,clearQuot:g,toCamelCase:x,warn:m,noop:c};e.exports=P},function(e,r){"use strict";function t(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function n(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var r={},t=0;10>t;t++)r["_"+String.fromCharCode(t)]=t;var n=Object.getOwnPropertyNames(r).map(function(e){return r[e]});if("0123456789"!==n.join(""))return!1;var a={};return"abcdefghijklmnopqrst".split("").forEach(function(e){a[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},a)).join("")}catch(e){return!1}}var a=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;e.exports=n()?Object.assign:function(e,r){for(var n,s,l=t(e),p=1;arguments.length>p;p++){n=Object(arguments[p]);for(var u in n)a.call(n,u)&&(l[u]=n[u]);if(Object.getOwnPropertySymbols){s=Object.getOwnPropertySymbols(n);for(var o=0;s.length>o;o++)i.call(n,s[o])&&(l[s[o]]=n[s[o]])}}return l}},function(e,r,t){"use strict";function n(e){return _.xmlOpenTag.exec(e)}function a(e){return y.test(e)}function i(e){return j[e.toLowerCase()]}function s(e){return e.lastIndexOf("/")===e.length-1&&(e=e.replace(/\//,"")),e}function l(e){for(var r,t,n=/[\s]+([^"\s=>]+)?[=]?(("[^"]+")|([^"\s>]+))?/g;r=n.exec(e);){var a=r[1];if("/"!==a){null!=a&&(a=s(a));var i=r[2];if(null!=i)i=x.clearQuot(s(i),!0),null==a&&(a=i);else{if(null==a)continue;i=a}t||(t=[]),t.push({key:a,value:i})}}return t}function p(e,r){return x.isString(e)&&e.toLowerCase()==="</"+r+">"}function u(e){return _.insideBraceParam.exec(e)}function o(e){var r,t=_.expr.exec(e);if(t){r=[t[1]];var n=_.exprBraceParam.exec(e);n&&r.push(n[0])}return r}function c(e,r){return x.isString(e)&&e==="/"+_.exprRule+r}function f(e){return"tmpl"===e}function m(e,r,t){var n=r.params;n||(n=r.params=x.lightObj());var a=n.tmpls;if(a){var i=a.strs[0],s=i.length;null!=t?i[t]=e:(i[s]=e,i.length=++s)}else{var i={length:0};null!=t?i[t]=e:(i[0]=e,i.length=1),n.tmpls=d.compiledParam(i)}}function v(e){return"params"===e||"props"===e}function h(e,r){r.paramsExpr?x.listPush(r.paramsExpr.content,e.content):r.paramsExpr=e}var g=t(1),x=t(3),d=t(6),_=g.tmplRule,y=/^<[^>]+\/>$/i,j={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0};e.exports={getXmlOpenTag:n,isXmlSelfCloseTag:a,verifySelfCloseTag:i,getOpenTagParams:l,isXmlCloseTag:p,getInsideBraceParam:u,isExpr:o,isExprCloseTag:c,isTmpl:f,addTmpl:m,isParamsExpr:v,addParamsExpr:h}},function(e,r,t){"use strict";function n(e){var r=u.lightObj();return u.each(e,function(e,t){r[t]=l(e)},!1,!1),r}function a(e,r){var t=u.lightObj();if(!r&&e.indexOf(".")>-1&&(e=e.replace(/\.([^\s.|\/]+)/g,"|prop($1)")),e.indexOf("|")>=0){var n,a=[];n=e.split("|"),e=n[0].trim(),n=n.slice(1),u.each(n,function(e){var r=i(e.trim()),t=u.lightObj(),n=r[1].toLowerCase();if(n){var s=r[3];if(s){var l=[];u.each(s.split(","),function(e){l[l.length]=u.clearQuot(e).trim()},!1,!0),t.params=l}t.name=n,a.push(t)}},!1,!0),t.filters=a}if(!r&&e.indexOf("../")>-1){var s=0;e=e.replace(/\.\.\//g,function(){return s++,""}),t.parentNum=s}return t.name=e,r&&(t.isStr=!0),t}function i(e){return c.exec(e)}function s(e,r){for(var t,n,a=o.replaceParam(),i=0;t=a.exec(e);){n||(n=[]);var s=t[3],l=[t[0],t[1],null,!1,!0];i>0&&(l[4]=!1),s=s.trim(),f.indexOf(s[0])>-1&&(s=u.clearQuot(s),l[3]=!0),l[2]=s,n.push(l),i++}return n}function l(e){var r=u.lightObj(),t=u.isString(e)?e.split(o.replaceSplit):[e],n=null,i=!1;if(t.length>1){var l=s(e,t);n=[],u.each(l,function(r){var t=u.lightObj();i=!!r[4]&&r[0]===e,t.prop=a(r[2],r[3]),t.escape=r[1].split(o.startRule).length<3,n.push(t)},!1,!0)}if(r.props=n,r.strs=t,r.isAll=i,i){var p=n[0].prop;0===p.name.indexOf("!#")&&(p.name=p.name.substr(2),r.isTmplPlace=!0)}return r}var p=t(1),u=t(3),o=p.tmplRule,c=/([\w$]+)(\(([^()]+)\))*/,f=["'",'"'];e.exports={compiledParam:l,compiledParams:n,compiledProp:a}},function(e,r,t){"use strict";function n(e){if(m.isObject(e))return e;for(var r,t,n=/([^\s:]+)[\s]?:[\s]?([^\s;]+)[;]?/g;r=n.exec(e);){var a=r[1],i=r[2];t||(t={}),/^[A-Z-]+$/.test(a)&&(a=a.toLowerCase()),a=m.toCamelCase(a),t[a]=i}return t}function a(e,r){for(var t,n,a=0,i=e.length;i>a;a++)if(n=e[a],n&&(t=n[r],null!=t))return t}function i(e,r,t,n){var a=e;return null==t&&(t=m.isArray(r)),(t||n)&&(a=m.listPush([e],n?t?r:[r]:r.slice(1))),a}function s(e,r,t){var n=r.parent,a="item"in t,s={data:a?t.item:n.data,parent:t.fallback?n:n.parent,index:"index"in t?t.index:n.index},l=a?i(t.item,r.data,r.multiData,t.addData):r.data,p=!!t.addData||r.multiData;return{parent:s,data:l,multiData:p}}function l(e){switch(e){case"class":e="className";break;case"for":e="htmlFor"}return e}function p(e,r){var t="";for(var n in e)if(!r||!r[n]){var a=e[n];t+=" "+n+(n!==a?'="'+a+'"':" ")}return t}function u(e,r,t,n){return function(a){return t(e,r,a,n)}}function o(e,r){return function(){var t,n=arguments,a=n.length;if(0<a)if(1===a)t=n[0];else{t=[];for(var i=0;a>i;i++)t[t.length]=n[i]}else t={};return r(e,{data:t,parent:this&&this._njParent?this._njParent:null,multiData:m.isArray(t)})}}function c(e){var r={useString:e.useString,exprs:f.exprs,filters:f.filters,getDatasValue:f.getDatasValue,noop:f.noop,lightObj:f.lightObj,throwIf:f.throwIf,warn:f.warn,getNewData:f.getNewData,newContextVars:f.newContextVars,styleProps:f.styleProps,exprRet:f.exprRet};return r.useString?(r.assignStringProp=f.assignStringProp,r.escape=f.escape):(r.h=f.createElement,r.components=f.components),m.each(e,function(e,t){0===t.indexOf("main")?(r[t]=o(r,e),r["_"+t]=e):0===t.indexOf("fn")&&(r[t]=e)},!1,!1),r}var f=t(1),m=t(3);e.exports={getNewData:i,newContextVars:s,getDatasValue:a,fixPropName:l,styleProps:n,assignStringProp:p,exprRet:u,tmplWrap:o,template:c}},function(e,r){"use strict";function t(e){return null==e?"":e.replace?e.replace(/[&><"']/g,function(e){return n[e]}):e}var n={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"};e.exports=t},function(e,r,t){"use strict";function n(e,r){var t={},n=r.hasElse?"contentElse":"content";if(!s.isArray(e))return s.isObject(e)&&"_njShim"in e&&!s.isArray(e._njShim)&&(e=e._njShim),t.type="nj_plaintext",t.content=[l.compiledParam(e)],void r[n].push(t);var i=e[0];if(s.isString(i)){var o,c,f,m,v,i=i,h=e.length,g=e[h-1],x=!1,d=!1;if(o=p.isExpr(i)){var _=o[0].toLowerCase();c=s.clearQuot(o[1],!0),m=p.isTmpl(_),v=p.isParamsExpr(_),t.type="nj_expr",t.expr=_,null==c||m||(t.refer=l.compiledParam(c)),p.isExprCloseTag(g,_)&&(d=!0),x=!0}else{var y=p.getXmlOpenTag(i);y&&(f=y[1],p.isXmlSelfCloseTag(i)?t.selfCloseTag=!0:d=p.isXmlCloseTag(g,f),x=!0)}if(x){var j=-1,b=!0;if(o)if(m){b=!1;var S=p.getInsideBraceParam(c);p.addTmpl(t,r,S?s.clearQuot(S[1]):null)}else v?b=!1:j=e.indexOf(u.exprRule+"else");else{t.type=f;var O=p.getInsideBraceParam(f);O&&(t.typeRefer=l.compiledParam(O[0]));var P=p.getOpenTagParams(i);P&&(t.params||(t.params=s.lightObj()),s.each(P,function(e){t.params[e.key]=l.compiledParam(e.value)},!1,!0)),t.selfCloseTag||(t.selfCloseTag=p.verifySelfCloseTag(f))}b&&r[n].push(t);var E=h-(d?1:0),w=e.slice(1,0>j?E:j);if(w&&w.length&&a(w,t),j>=0){var R=e.slice(j+1,E);t.hasElse=!0,R&&R.length&&a(R,t)}v&&p.addParamsExpr(t,r)}else a(e,r)}else s.isArray(i)&&a(e,r)}function a(e,r){r.content||(r.content=[]),r.hasElse&&!r.contentElse&&(r.contentElse=[]),s.each(e,function(e){n(e,r)},!1,!0)}var i=t(1),s=t(3),l=t(6),p=t(5),u=i.tmplRule;e.exports={checkElem:n}},function(e,r,t){"use strict";function n(e,r){var t=e;return i.isObject(e)||(t={},t[e]=r),i.each(t,function(e,r){a.components[r.toLowerCase()]=e},!1,!1),r}var a=t(1),i=t(3);e.exports={registerComponent:n}},function(e,r,t){"use strict";function n(e){var r={data:!0,parent:!0,index:!0,useString:!0};return e&&(r=i.assign(r,e)),r}function a(e,r,t){var a=e;i.isObject(e)||(a={},a[e]={filter:r,options:t}),i.each(a,function(e,r){var t=r.toLowerCase();if(e){var a=e.filter,i=e.options;a||i?(a&&(s[t]=a),i&&(p[t]=n(i))):s[t]=e}},!1,!1)}var i=t(3),s={prop:function(e,r){var t=e;return t&&i.each(r.split("."),function(e){t=t[e]},!1,!0),t},count:function(e){return e?e.length:0},item:function(e,r){return e?e[r]:null},equal:function(e,r){return e==r},lt:function(e,r,t){var n;return e=parseFloat(e),r=parseFloat(r),n=t?r>e:r>=e},gt:function(e,r,t){var n;return e=parseFloat(e),r=parseFloat(r),n=t?e>r:e>=r},add:function(e,r,t){return e+(t?parseFloat(r):parseInt(r,10))},int:function(e){return parseInt(e,10)},float:function(e){return parseFloat(e)},bool:function(e){return"false"!==e&&!!e}},l={data:!1,parent:!1,index:!1},p={prop:n(l),count:n(l),item:n(l),equal:n(l),lt:n(l),gt:n(l),add:n(l),int:n(l),float:n(l),bool:n(l)};e.exports={filters:s,filterConfig:p,registerFilter:a}},function(e,r,t){"use strict";function n(e){var r={data:!0,parent:!0,index:!0,useString:!0,paramsExpr:!1,result:!0,inverse:!0,newContext:!1};return e&&(r=i.assign(r,e)),r}function a(e,r,t){var a=e;i.isObject(e)||(a={},a[e]={expr:r,options:t}),i.each(a,function(e,r){var t=r.toLowerCase();if(e){var a=e.expr,i=e.options;a||i?(a&&(s[t]=a),i&&(p[t]=n(i))):s[t]=e}},!1,!1)}var i=t(3),s={if:function(e,r){"false"===e&&(e=!1);var t,n;return t=r?!e:!!e,n=t?this.result():this.inverse(),this.useString&&null==n?"":n},unless:function(e){return s.if.call(this,e,!0)},each:function(e){var r,t=this,n=t.useString;return e?(r=n?"":[],i.each(e,function(e,a){var i=t.result({item:e,index:a,fallback:!0});n?r+=i:r.push(i)},!1,i.isArrayLike(e)),n||r.length||(r=null)):(r=t.inverse(),n&&null==r&&(r="")),r},param:function(){var e,r=this.result(),t="";i.each(arguments,function(e,r){t+=e},!1,!0),null!=r?i.isArray(r)?(e="",i.each(i.flatten(r),function(r){e+=null!=r?r:""},!1,!0)):e=r:e=!this.useString||t,this.paramsExpr[t]=e},spreadparam:function(e){if(e){var r=this;i.each(e,function(e,t){r.paramsExpr[t]=e},!1,!1)}},equal:function(e,r){var t;return t=e==r?this.result():this.inverse()},for:function(e,r){var t,n=this.useString;for(t=n?"":[],null==r&&(r=e,e=0),e=parseInt(e,10),r=parseInt(r,10);r>=e;e++){var a=this.result({index:e});n?t+=a:t.push(a)}return t},blank:function(){return this.result()}},l={data:!1,parent:!1,index:!1},p={if:n(l),unless:n(l),each:n(i.assign({newContext:!0},l)),param:n(i.assign({inverse:!1,paramsExpr:!0},l)),spreadparam:n(i.assign({useString:!1,result:!1,inverse:!1,paramsExpr:!0},l)),equal:n(i.assign({useString:!1},l)),for:n(i.assign({newContext:!0},l,{data:!0})),blank:n(i.assign({useString:!1,inverse:!1},l))};s.prop=s.p=s.param,p.prop=p.p=p.param,s.spread=s.spreadparam,p.spread=p.spreadparam,e.exports={exprs:s,exprConfig:p,registerExpr:a}},function(e,r,t){"use strict";function n(e,r){return RegExp(e,r)}function a(e){for(var r,t="",n=0,a=e.length;a>n;n++)r=e[n],t.indexOf(r)<0&&(t+=r);return t}var i=t(1),s=t(3);e.exports=function(e,r,t,l,p,u){if(s.isObject(e)){var o=e;e=o.start,r=o.end,t=o.expr,l=o.external,p=o.prop,u=o.template}e||(e="{"),r||(r="}"),t||(t="#"),l||(l="$"),p||(p="@"),u||(u="template");var c=a(e+r),f=e[0],m=c.substr(1),v="#$@",h=a(t+v),g=t.replace(/\$/g,"\\$"),x=l.replace(/\$/g,"\\$");s.assign(i.tmplRule,{startRule:e,endRule:r,exprRule:t,externalRule:l,propRule:p,xmlOpenTag:n("^<([a-z"+f+h+"][-a-z0-9_|./"+m+"]*)[^>]*>$","i"),insideBraceParam:n(e+"([^"+c+"]+)"+r,"i"),exprBraceParam:n('([\\s]+["]?('+e+"){1,2}[^"+c+"]+("+r+'){1,2}["]?)+',"i"),replaceBraceParam:function(){return n("[\\s]+("+e+"){1,2}([^"+c+"]+)("+r+"){1,2}","g")},replaceSplit:n("(?:"+e+"){1,2}[^"+c+"]+(?:"+r+"){1,2}"),replaceParam:function(){return n("(("+e+"){1,2})([^"+c+"]+)("+r+"){1,2}","g")},checkElem:function(){return n("([^>]*)(<([a-z"+f+"/"+h+"!][-a-z0-9_|."+c+h+"]*)([^>]*)>)([^<]*)","ig")},externalSplit:n(x+"\\{[^{}]*(?:\\{[^"+l+"]*\\})*[^{}]*\\}"),external:function(){return n(x+"\\{([^{}]*(\\{[^"+l+"]*\\})*[^{}]*)\\}","g")},expr:n("^"+g+"([^\\s]+)","i"),include:function(){return n("<"+g+"include([^>]*)>","ig")},template:u})}},function(e,r,t){"use strict";function n(e,r,t,n){if(e){if(p.isObject(r)){var i=r;r=i.tmplName,t=i.outputH,n=i.fileName}var s;if(r&&(s=l.templates[r]),!s){var c,f=p.isObject(e);if(f&&e.main)c=e;else{var m;if(r&&(m=l.asts[r]),!m){if(f&&"nj_root"===e.type)m=e;else{if(m=a(),p.isString(e)){var v=l.includeParser;v&&(e=v(e,n)),e=o(e)}p.checkElem(e,m)}r&&(l.asts[r]=m)}c=u(m.content,!t)}s=p.template(c),r&&(l.templates[r]=s)}return s.main}}function a(){var e=p.lightObj();return e.type="nj_root",e.content=[],e}function i(e,r){return n(e,r,!0)}function s(e,r){var t=a();return p.isString(e)&&(e=o(e)),p.checkElem(e,t),u(t.content,!r)}var l=t(1),p=t(2),u=t(15),o=t(17);e.exports={compile:n,compileH:i,precompile:s}},function(e,r,t){"use strict";function n(e,r,t,n,i){var s="",l=r.useString,p=f.isString(t),o=p||0===t,c=1===e.length?"1":"2",m={_type:0,_typeRefer:0,_params:0,_paramsE:0,_compParam:0,_dataRefer:0,_expr:0,_this:0,_value:0,_filter:0,_thisF:0,newContext:n};return l?m._children=0:m._compParam=0,o?(s+=a(),s+="if(!parent) {\n",s+="  if (data) parent = { data: multiData ? data[0] : data };\n",s+="  else parent = {};\n",s+="  p2.parent = parent;\n",s+="};\n"):n?(s+="var _p2 = p1.newContextVars(p1, p2, p3),\n",s+="  parent = _p2.parent,\n",s+="  data = _p2.data,\n",s+="  multiData = _p2.multiData;\n"):s+=a(),"2"===c&&(s+=l?"var ret = '';\n":"var ret = [];\n"),s+=u(e,r,m,c,i),"2"===c&&(s+="return ret;"),r[o?"main"+(p?t:""):"fn"+t]=Function("p1","p2","p3","p4",s),t}function a(){return"var parent = p2.parent,\n  data = p2.data,\n  multiData = p2.multiData;\n"}function i(e,r,t,n){var a,i=t.useString,l=!n&&e.escape;if(e.prop.isStr)a="'"+e.prop.name+"'";else{var p=e.prop.name,u=e.prop.parentNum,o="",c=!1;if("#"===p?(o="parent.index",c=!0):"."===p&&(o="parent.data",c=!0),u){o||(o="parent.data");for(var m=0;u>m;m++)o="parent."+o;c||(o+="['"+p+"']",c=!0)}a=c?o:"(!multiData ? data['"+p+"'] : p1.getDatasValue(data, '"+p+"'))"}var h=e.prop.filters;if(h){var g="_value"+r._value++,x="var "+g+" = "+a+";\n";return f.each(h,function(e){var t=r._filter++,n=r._thisF++,a=v[e.name],i=!a;x+="\nvar _filter"+t+" = p1.filters['"+e.name+"'];\n",x+="if (!_filter"+t+") {\n",x+="  p1.warn('"+e.name+"', 'filter');\n",x+="}\n",x+="else {\n",x+="  var _thisF"+n+" = p1.lightObj();\n",(i||a.useString)&&(x+="  _thisF"+n+".useString = p1.useString;\n"),(i||a.data)&&(x+="  _thisF"+n+".data = parent.data;\n"),(i||a.parent)&&(x+="  _thisF"+n+".parent = parent.parent;\n"),(i||a.index)&&(x+="  _thisF"+n+".index = parent.index;\n"),x+="\n  "+g+" = _filter"+t+".apply(_thisF"+n+", ["+g+(e.params?e.params.reduce(function(e,r){return e+", '"+r+"'"},""):"")+"]);\n",x+="}\n"},!1,!0),{valueStr:s(g,i,l),filterStr:x}}return s(a,i,l)}function s(e,r,t){return r&&t?"p1.escape("+e+")":e}function l(e,r,t){var a=e.strs[0],s="",l="";return f.isString(a)?(s=e.isAll||""===a?"":"'"+a+"'",l="",f.each(e.props,function(n,p){var u,o=i(n,r,t);if(f.isString(o)?u=o:(u=o.valueStr,l+=o.filterStr),e.isAll)e.isTmplPlace&&(u+=".call({ _njParent: parent }, data)");else{var c=e.strs[p+1];u=(""===a&&0==p?"":" + ")+"("+u+")"+(""!==c?" + '"+c+"'":"")}if(s+=u,e.isAll)return!1},!1,!0)):f.isObject(a)&&null!=a.length?(s+="{\n",f.each(a,function(e,r,a,i){s+="length"!==r?'  "'+r+'": p1.main'+n(e.content,t,"T"+ ++t._noT):"  length: "+e,i-1>a&&(s+=","),s+="\n"},!1,!1),s+="}"):s=f.isObject(a)&&a._njEx?a._njEx:JSON.stringify(a._njShim?a._njShim:a),""===l?s:{valueStr:s,filterStr:l}}function p(e,r,t,a,s){var p="",c=r.useString;if("nj_plaintext"===e.type){var v,g=l(e.content[0],t,r);f.isObject(g)&&(v=g.filterStr,g=g.valueStr);var x=o(1,a,{text:g},r,s);v&&(x=v+x),p+=c?x:h(x)}else if("nj_expr"===e.type){var d=t._expr++,_=t._dataRefer++,y="";if(p+="\nvar _expr"+d+" = p1.exprs['"+e.expr+"'];\n",e.refer){y+="var _dataRefer"+_+" = [\n";var j=e.refer.props,b=j.length,v="";f.each(j,function(e,n){var a=i(e,t,r,!0);f.isObject(a)&&(v+=a.filterStr,a=a.valueStr),y+="  "+a+(b-1>n?",":"")},!1,!0),y+="\n];\n",""!==v&&(y=v+y),p+=y}p+="p1.throwIf(_expr"+d+", '"+e.expr+"', 'expr');\n";var S=t._this++,O=m[e.expr],P=!O,E=!!O&&O.newContext,w=t.newContext;p+="\nvar _this"+S+" = p1.lightObj();\n",(P||O.useString)&&(p+="_this"+S+".useString = p1.useString;\n"),(P||O.data)&&(p+="_this"+S+".data = parent.data;\n"),(P||O.parent)&&(p+="_this"+S+".parent = parent.parent;\n"),(P||O.index)&&(p+="_this"+S+".index = parent.index;\n");var R="p4";a&&a._paramsE&&(R=a._paramsE),(P||O.paramsExpr)&&(p+="_this"+S+".paramsExpr = "+R+";\n"),(P||O.result)&&(p+="_this"+S+".result = "+(e.content?"p1.exprRet(p1, "+(w?"_":"")+"p2, p1.fn"+n(e.content,r,++r._no,E,s)+", "+R+")":"p1.noop")+";\n"),(P||O.inverse)&&(p+="_this"+S+".inverse = "+(e.contentElse?"p1.exprRet(p1, "+(w?"_":"")+"p2, p1.fn"+n(e.contentElse,r,++r._no,E,s)+", "+R+")":"p1.noop")+";\n"),p+=o(2,a,{_expr:d,_dataRefer:""!==y?_:"none",_this:S},r,s)}else{var C,T=t._type++;C=e.typeRefer?e.typeRefer.props[0].prop.name:e.type.toLowerCase();var k;if(k=c?"'"+C+"'":"p1.components['"+C+"'] ? p1.components['"+C+"'] : '"+C+"'",e.typeRefer){var A=t._typeRefer++,N=l(e.typeRefer,t,r);f.isObject(N)&&(p+=N.filterStr,N=N.valueStr),p+="\nvar _typeRefer"+A+" = "+N+";\n",p+="var _type"+T+" = _typeRefer"+A+" ? _typeRefer"+A+" : ("+k+");\n"}else p+="\nvar _type"+T+" = "+k+";\n";var D=e.params,F=e.paramsExpr,I="";if(D||F){var $=t._params++;if(I="var _params"+$+" = ",F){var L=t._paramsE++;if(I+=(c?"''":"null")+";\n",I+="var _paramsE"+L+" = {};\n",I+=u(F.content,r,t,{_paramsE:"_paramsE"+L}),c){var B="";f.each(D,function(e,r,t,n){0==t&&(B+="{ "),B+=r+": 1",B+=n-1>t?", ":" }"},!1,!1),I+="_params"+$+" += p1.assignStringProp(_paramsE"+L+", "+(""===B?"null":B)+");\n"}else I+="\n_params"+$+" = _paramsE"+L+";\n"}if(D){var K=Object.keys(D),b=K.length,v="";c||F||(I+="{\n"),f.each(K,function(e,n){var a=l(D[e],t,r);f.isObject(a)&&(v+=a.filterStr,a=a.valueStr),c||"style"!==e||(a="p1.styleProps("+a+")");var i=e,s="'"+i+"'"===a;c||(i=f.fixPropName(e)),I+=F?c?"_params"+$+" += ' "+i+(s?" '":"=\"' + "+a+" + '\"'")+";\n":"_params"+$+"['"+i+"'] = "+(s?"true":a)+";\n":c?(n>0?"  + ":"")+"' "+i+(s?" '":"=\"' + "+a+" + '\"'")+(n==b-1?";":"")+"\n":"  '"+i+"': "+(s?"true":a)+(b-1>n?",\n":"")},!1,!1),c||F||(I+="\n};\n"),""!==v&&(I=v+I)}p+=I}var q,V;c?(V=t._children++,p+="var _children"+V+" = '';\n"):(q=t._compParam++,p+="var _compParam"+q+" = [_type"+T+", "+(""!==I?"_params"+$:"null")+"];\n"),p+=u(e.content,r,t,c?{_children:"_children"+V}:{_compParam:"_compParam"+q},null!=s?s+1:s),p+=o(3,a,c?{_type:T,_params:""!==I?$:null,_children:V,_selfClose:e.selfCloseTag}:{_compParam:q},r,s)}return p}function u(e,r,t,n,a){var i="";return e?(f.each(e,function(e){i+=p(e,r,t,n,a)},!1,!0),i):i}function o(e,r,t,n,a){var i,s=n.useString;switch(e){case 1:i=c(a,s)+t.text+(s&&null!=a?" + '\\n'":"");break;case 2:i="_expr"+t._expr+".apply(_this"+t._this+("none"!==t._dataRefer?", _dataRefer"+t._dataRefer:"")+")";break;case 3:if(s){var l=c(a,s);i=l+"'<' + _type"+t._type+" + "+(null!=t._params?"_params"+t._params+" + ":""),t._selfClose?i+="' />\\n'":(i+="'>\\n'",i+=" + _children"+t._children+" + ",i+=l+"'</' + _type"+t._type+" + '>\\n'")}else i="p1.h.apply(null, _compParam"+t._compParam+")"}return"1"===r?"\nreturn "+i+";":"2"===r?s?"\nret += "+i+";\n":"\nret.push("+i+");\n":r._paramsE?"\n"+i+";\n":s?"\n"+r._children+" += "+i+";\n":"\n"+r._compParam+".push("+i+");\n"}function c(e,r){var t="";if(r&&null!=e&&e>0){t+="'";for(var n=0;e>n;n++)t+="  ";t+="' + "}return t}var f=(t(1),t(2)),m=f.exprConfig,v=f.filterConfig,h=t(16);e.exports=function(e,r){var t={useString:r,_no:0,_noT:0};return n(e,t,t._no,null,0),t}},function(e,r){"use strict";function t(e){return e.replace(a,function(e,r){return n[r]})}var n={nbsp:" ",ensp:" ",emsp:" ",thinsp:" ",zwnj:"‌",zwj:"‍",lt:"<",gt:">",amp:"&"},a=RegExp("&("+Object.keys(n).join("|")+");","g");e.exports=t},function(e,r,t){"use strict";function n(e){var r,t;if(this&&(r=this.tmplKey),r&&(t=v.strTmpls[r]))return t;var n,s=h.isString(e),p=e,u=arguments,o=0,c=[],f="";if(s){p=e.split(g.externalSplit);var d,_=g.external();for(n=[];d=_.exec(e);)n.push(d[1])}var y=p.length;return h.each(p,function(e,r){var t="";if(y-1>r){var a,i,l=e.length-1,p="@"===e[l];if(s){var m=n[r],v=m.match(/#(\d+)/);v&&null!=v[1]?a=u[parseInt(v[1],10)+1]:(a=m,p=i=!0)}else a=u[r+1];!h.isString(a)||p?(t="_nj-split"+o+"_",p&&(i?a=x({_njEx:a}):(e=e.substr(0,l),a=x(a))),c.push(a),o++):t=a}f+=e+t},!1,!0),f=i(f),null==r&&(r=h.uniqueKey(f+l(c)),t=v.strTmpls[r])?t:(t=a(f,c),m(t,r),v.strTmpls[r]=t,t)}function a(e,r){for(var t,n=[],a={elem:n,elemName:"root",parent:null},i=null,l=g.checkElem();t=l.exec(e);){var p=t[1],o=t[2],m=t[3],v=t[4],h=t[5];p&&"\n"!==p&&(p=s(p),f(p,a.elem,r)),o&&("/"===m[0]?m==="/"+a.elemName&&(a=a.parent):"/"===o[o.length-2]?c(o,m,v,a.elem,r):(i=a,a={elem:[],elemName:m,parent:i},i.elem.push(a.elem),u(o,m,v,a.elem,r))),h&&"\n"!==h&&(h=s(h),f(h,a.elem,r))}return n}function i(e){return e.replace(/<!--[\s\S]*?-->/g,"").replace(/>\s+([^\s<]*)\s+</g,">$1<").trim()}function s(e){return e.replace(/\n/g,"\\n").replace(/\r/g,"").trim()}function l(e){var r="";return h.each(e,function(e){r+=h.isArray(e)?"|"+p(e,!0):"|"+JSON.stringify(e)},!1,!0),r}function p(e,r){var t;if(r||h.isArray(e))if(null!=e.njKey)t="+"+e.njKey;else{t="";for(var n=0,a=e.length;a>n;n++)t+=p(e[n])}else t="+"+e;return t}function u(e,r,t,n,a,i){var s,l;if(r[0]===g.exprRule)s=e.substring(1,e.length-1);else if(0===r.indexOf(g.propRule))s=g.exprRule+"prop {'"+r.substr(g.propRule.length)+"'}"+t;else{var p=o(e,a);s=p.elem,l=p.params}if(i){var u=[s];l&&u.push(l),n.push(u)}else n.push(s),l&&n.push(l)}function o(e,r){var t,n=g.exprRule,a=g.startRule,i=g.endRule;return e=e.replace(/([^\s={}>]+)=['"]?_nj-split(\d+)_['"]?/g,function(e,s,l){return t||(t=[n+"params"]),t.push([n+"param "+a+"'"+s+"'"+i,r[l]]),""}),e=e.replace(g.replaceBraceParam(),function(e,r,s){s=s.trim();var l=s.replace(/\.\.\//g,"");return 0===l.indexOf("...")?(t||(t=[n+"params"]),t.push([n+"spreadParam "+a+s.replace(/\.\.\./g,"")+i+"/"])," "):" "+l+"="+e.trim()}),{elem:e,params:t}}function c(e,r,t,n,a){r===g.exprRule+"else"?n.push(e.substr(1,5)):u(e,r,t,n,a,!0)}function f(e,r,t){for(var n,a=/_nj-split(\d+)_/g,i=[];n=a.exec(e);)i.push(n[1]);i.length?h.each(e.split(/_nj-split(?:\d+)_/),function(e){""!==e&&r.push(e);var n=i.shift();null!=n&&r.push(t[n])},!1,!0):r.push(e)}function m(e,r){e.njKey=r,e.render=function(){return v.compile(this,this.njKey).apply(null,arguments)},e.renderH=function(){return v.compileH(this,this.njKey).apply(null,arguments)}}var v=t(1),h=t(3),g=(t(5),v.tmplRule),x=t(18);v.strTmpls={},e.exports=n},function(e,r){"use strict";e.exports=function(e){return{_njShim:e}}},function(e,r,t){"use strict";var n=t(17);e.exports=function(e){return function(){return n.apply({tmplKey:e},arguments)}}},function(e,r,t){"use strict";var n=t(1),a=t(13);e.exports=function(e){var r=e.delimiters,t=e.includeParser,i=e.createElement;r&&a(r),t&&(n.includeParser=t),i&&(n.createElement=i)}}])});
//# sourceMappingURL=nornj.min.js.map