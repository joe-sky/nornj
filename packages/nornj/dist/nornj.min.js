/*!
 * NornJ template engine v5.2.0-rc.1
 * (c) 2016-2020 Joe_Sky
 * Released under the MIT License.
 */
!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((e=e||self).NornJ={})}(this,function(e){"use strict";var I=function e(){return e["taggedTmpl"+(e.outputH?"H":"")].apply(null,arguments)};function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function R(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],t=!0,a=!1,l=void 0;try{for(var i,o=e[Symbol.iterator]();!(t=(i=o.next()).done)&&(r.push(i.value),!n||r.length!==n);t=!0);}catch(e){a=!0,l=e}finally{try{t||null==o.return||o.return()}finally{if(a)throw l}}return r}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}I.preAsts={},I.asts={},I.templates={},I.errorTitle="[NornJ]",I.tmplRule={},I.outputH=!1,I.global="undefined"!=typeof self?self:global,I.textTag="nj-text",I.textMode=!1,I.noWsTag="nj-noWs",I.noWsMode=!1,I.fixTagName=!0;var t=Array.prototype.push,a=Array.prototype.slice,l=Object.prototype.hasOwnProperty,i=Object.prototype.toString,o=I.errorTitle,x=Object.defineProperty,b=Object.defineProperties;function n(n){return function(e){return i.call(e)==="[object "+n+"]"}}var u=n("Number"),O=n("String"),c=n("Map"),p=n("WeakMap"),f=n("Set"),m=n("WeakSet");function T(e,n){return t.apply(e,n),e}function s(e,n,r){return a.call(e,n,r)}function k(e){return Array.isArray(e)}function d(e){var n=r(e);return!k(e)&&("function"===n||"object"===n&&!!e)}var v,g=(v="length",function(e){return null==e?void 0:e[v]});function h(e){var n=g(e);return"number"==typeof n&&0<=n}function y(e,n,r){var t=e.size,a=0,l=!0,i=!1,o=void 0;try{for(var s,u=e[Symbol.iterator]();!(l=(s=u.next()).done);l=!0){var c=s.value,p=void 0;if(r){var f=R(c,2);p=n.call(e,f[1],f[0],a,t)}else p=n.call(e,c,a,t);if(!1===p)break;a++}}catch(e){i=!0,o=e}finally{try{l||null==u.return||u.return()}finally{if(i)throw o}}}function F(e,n,r){if(e)if(null==r&&(r=h(e)),r)for(var t=0,a=e.length;t<a;t++){if(!1===n.call(e,e[t],t,a))break}else if(f(e)||m(e))y(e,n);else if(c(e)||p(e))y(e,n,!0);else for(var l=Object.keys(e),i=l.length,o=0;o<i;o++){var s=l[o];if(!1===n.call(e,e[s],s,o,i))break}}var _=/(\n|\r)?[\s\xA0]+$/;function N(e){return e.replace(_,function(e,n){return n?"\n":""})}function j(){}function P(e,n,r){if(!e)switch(r){case"ex":throw Error(o+'Extension tag "'+n+'" is undefined, please check it has been registered.');default:throw Error(o+(n||e))}}function S(e,n){switch(n){case"f":e='A filter called "'+e+'" is undefined.'}console.warn(o+e)}function w(e){console.error(o+e)}function E(){return Object.create(null)}var C=/["]+/g,A=/[']+/g;function H(e,n){if(null!=e){var r;if(null==n){var t=e[0];"'"===t?r=A:'"'===t&&(r=C)}else r=n?C:A;return r&&(e=e.replace(r,"")),e}}function $(e){return~e.indexOf("-")&&(e=e.replace(/-\w/g,function(e){return e.substr(1).toUpperCase()})),e}var q=Object.assign||function(e){for(var n=1,r=arguments;n<r.length;n++){var t=r[n];for(var a in t)l.call(t,a)&&(e[a]=t[a])}return e};function L(e){return e[0].toUpperCase()+e.substr(1)}function M(e){return e[0].toLowerCase()+e.substr(1)}function W(e){return L(e)}q(I,{defineProp:x,defineProps:b,arrayPush:T,arraySlice:s,isArray:k,isObject:d,isNumber:u,isString:O,isArrayLike:h,isMap:c,isWeakMap:p,isSet:f,isWeakSet:m,each:F,noop:j,throwIf:P,warn:S,obj:E,camelCase:$,assign:q,upperFirst:L,lowerFirst:M,capitalize:W});var z=Object.freeze({__proto__:null,defineProp:x,defineProps:b,isNumber:u,isString:O,isMap:c,isWeakMap:p,isSet:f,isWeakSet:m,arrayPush:T,arraySlice:s,isArray:k,isObject:d,isArrayLike:h,each:F,trimRight:N,noop:j,throwIf:P,warn:S,error:w,obj:E,clearQuot:H,camelCase:$,assign:q,upperFirst:L,lowerFirst:M,capitalize:W});function Z(e,n){return RegExp(e,n)}function U(e){return e.replace(/\$/g,"\\$")}function J(e){return e.replace(/\*/g,"\\*")}function K(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=1<arguments.length?arguments[1]:void 0,r=I.tmplRule,t=r.startRule,a=void 0===t?"{{":t,l=r.endRule,i=void 0===l?"}}":l,o=r.extensionRule,s=void 0===o?"n-":o,u=r.propRule,c=void 0===u?"p-":u,p=r.strPropRule,f=void 0===p?"s":p,m=r.templateRule,v=void 0===m?"template":m,g=r.tagSpRule,d=void 0===g?"#$@":g,h=r.commentRule,y=void 0===h?"-":h,_=e.start,x=e.end,b=e.extension,j=e.prop,P=e.strProp,S=e.template,R=e.tagSp,w=e.comment,C=e.rawStart,O=e.rawEnd;_&&(a=_),x&&(i=x),b&&(s=b),j&&(c=j),P&&(f=P),S&&(v=S),R&&(d=R),null!=w&&(y=w);var T=null!=C?C:a[0],k=null!=O?O:i[i.length-1],N=function(e){return e.replace(/-/g,"\\-")}(function(e){for(var n,r="",t=0,a=e.length;t<a;t++)~r.indexOf(n=e[t])||(r+=n);return r}(s+c+f+d)),E=U(s),A=U(c),H=U(f),$=T+a,L=i+k,F="[\\s\\S]+?",M="\\.\\.\\."+F,W=J($+F+L+"|"+a+F+i),z=J(a),K=J(i),G=J($),D=J(L),B={startRule:a,endRule:i,extensionRule:s,propRule:c,strPropRule:f,templateRule:v,tagSpRule:d,commentRule:y,firstChar:T,lastChar:k,braceParamStr:W,xmlOpenTag:Z("^<([a-z"+T+N+"][^\\s>]*)[^>]*>$","i"),openTagParams:Z("[\\s]+((("+G+"("+F+")"+D+")|("+z+"("+F+")"+K+"))|[^\\s=>]+)(=(('[^']+')|(\"[^\"]+\")|([^\"'\\s]+)))?","g"),directives:Z("[\\s]+((("+G+"("+F+")"+D+")|("+z+"("+F+")"+K+"))|((:?)("+E+")?([^\\s=>]+)))(=(('[^']+')|(\"[^\"]+\")|([^\"'\\s>]+)))?","g"),braceParam:Z(W,"i"),braceParamG:Z(W,"ig"),spreadProp:Z("[\\s]+("+G+"[\\s]*("+M+")"+D+")|("+z+"[\\s]*("+M+")"+K+")","g"),replaceSplit:Z(W),replaceParam:Z("(("+G+")("+F+")"+D+")|(("+z+")("+F+")"+K+")","g"),checkElem:Z("([^<>]+)|(<([a-z/!"+T+N+"][^\\s<>]*)([^<>]*)>|<)([^<]*)","ig"),extension:Z("^"+E+"([^\\s]+)","i"),exAll:Z("^([/]?)("+E+"|"+H+A+"|"+A+")([^\\s]+)","i"),include:Z("<"+E+"include([^>]*)>","ig"),incompleteStart:Z(a+"((?!"+K+")[\\s\\S])*$"),incompleteStartR:Z(G+"((?!"+D+")[\\s\\S])*$"),incompleteEnd:Z("^[\\s\\S]*?"+K),incompleteEndR:Z("^[\\s\\S]*?"+D)};if(!n)return B;q(I.tmplRule,B)}K({},!0),q(I,{createTmplRule:K}),q(I,{config:function(e){var n=e.delimiters,r=e.includeParser,t=e.createElement,a=e.outputH,l=e.textMode,i=e.noWsMode,o=e.fixTagName;n&&K(n,!0),r&&(I.includeParser=r),t&&(I.createElement=t),null!=a&&(I.outputH=a),null!=l&&(I.textMode=l),null!=i&&(I.noWsMode=i),null!=o&&(I.fixTagName=o)}});var G={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},D=/[&><"']/g;var B={nbsp:" ",ensp:" ",emsp:" ",thinsp:" ",zwnj:"‌",zwj:"‍",lt:"<",gt:">",amp:"&",quot:'"',"#x27":"'"},Q=RegExp("&("+Object.keys(B).join("|")+");","g");function V(e){return null==e?"":e.replace?e.replace(Q,function(e,n){return B[n]}):e}q(I,{escape:function(e){return null==e?"":e.replace?e.replace(D,function(e){return G[e]}):e},unescape:V});var X,Y=/^(-?([0-9]+[.]?[0-9]+)|[0-9])$/;function ee(e){if(d(e)||k(e)||u(e))return e;for(var n,r,t=/([^\s:]+)[\s]?:[\s]?([^;]+)[;]?/g;n=t.exec(e);){var a=n[1],l=n[2];r=r||{},/^[A-Z-]+$/.test(a)&&(a=a.toLowerCase()),r[a=$(a)]=Y.test(l)?+l:l}return r}function ne(e,n,r){for(var t,a,l=0,i=(n=n||this.data).length;l<i;l++)if((a=n[l])&&void 0!==(t=a[e]))return r?{source:a,value:t,prop:e,_njSrc:!0}:t}function re(e,n){return null==e?e:e._njTmpl?e.call(n):e.call(n.$this,n)}function te(e,n,r,t,a){var l;return l=t.icp&&(l=ne(r,t.icp))||n.cp[e],null!=a&&l&&(l=l[a]),l||r}function ae(e,n,r,t,a){return null!=e?O(e)?te(e.toLowerCase(),r,e,a):e:te(n,r,t,a)}function le(e,n){return null!=e&&""!==e?e:n}function ie(e,n){var r=e.args;if(r)for(var t=r.length;t--;)n.unshift(r[t])}function oe(e,n){return n?q({},e,{data:n.data?T(n.data,e.data):e.data,parent:n.newParent?e:e.parent,index:null!=n.index?n.index:e.index,item:null!=n.item?n.item:e.item}):e}function se(e){switch(e){case"class":e="className";break;case"for":e="htmlFor"}return e}function ue(e){for(var n="",r=arguments.length,t=Array(1<r?r-1:0),a=1;a<r;a++)t[a-1]=arguments[a];var l=q.apply(z,[e].concat(t));for(var i in l){var o=l[i];n+=" "+i+(i!==o?'="'+o+'"':" ")}return n}function ce(n,r,t){return function(e){return t(n,r,e)}}function pe(t,a){return function(e,n){var r=s(arguments);return a(t,this&&this._njCtx?q({},this,{data:T(r,this.data)}):{data:r,getData:ne,get $this(){return this.data[this.data.length-1]},d:ne,icp:function(e){var n;return e&&e.components&&(k(n=e.components)||(n=[n])),n}(e&&e._njParam?n:e),_njCtx:!0})}}function fe(e){if(null==e.level)return"";for(var n="",r=0;r<e.level;r++)n+="  ";return n}function me(e){return null==e.index?"":0==e.index?"":"\n"}function ve(e){return I.createElement.apply(null,e)}function ge(e){return e.source?e.value.bind(e.source):e}e.Template||(e.Template={}),(X=e.SwitchPrefixConfig||(e.SwitchPrefixConfig={})).OnlyLowerCase="onlyLowerCase";var de={if:function(e,n){var r;e&&e._njOpts&&(e=(n=e).props.condition),"false"===e&&(e=!1);var t=n.props;if(e)r=(t&&t.then||n.children)();else if(t){var a=t.else;if(t.elseifs){var l=t.elseifs.length;F(t.elseifs,function(e,n){if(e.value)return r=e.fn(),!1;n===l-1&&a&&(r=a())},!0)}else a&&(r=a())}return n.useString&&null==r?"":r},then:function(e){return e.tagProps.then=e.children},else:function(e){return e.tagProps.else=e.children},elseif:function(e,n){e&&e._njOpts&&(e=(n=e).props.condition||n.props.value);var r=n.tagProps;r.elseifs||(r.elseifs=[]),r.elseifs.push({value:e,fn:n.children})},switch:function(r,e){var t;r&&r._njOpts&&(r=(e=r).props.value);var a=e.props,n=a.elseifs||[{}],l=n.length;return F(n,function(e,n){if(r===e.value)return t=e.fn(),!1;n===l-1&&a.else&&(t=a.else())},!0),t},each:function(e,o){e&&e._njOpts&&(e=(o=e).props.of);var s,u=o.useString,n=o.props;if(e){s=u?"":[];var r=h(e),c=r||f(e)||m(e);F(e,function(e,n,r,t){var a={data:[e],index:c?n:r,item:e,newParent:!0},l={"@first":0===a.index,"@last":a.index===(c?r:t)-1};c||(l["@key"]=n),a.data.push(l);var i=o.children(a);u?s+=i:s.push(i)},r),u||s.length||(s=null),s&&s.length||!n||!n.else||(s=n.else())}else n&&n.else&&(s=n.else()),u&&null==s&&(s="");return s},prop:function(e,n){var r,t=n.value();r=void 0!==t?t:!n.useString||e,n.tagProps[n.outputH?se(e):e]=r},spread:function(e,r){var t=r.tagProps;F(e,function(e,n){void 0===t[n]&&(r.tagProps[n]=e)},!1)},show:function(e){if(!e.value()){var n=e.tagProps,r=e.useString;n.style||(n.style=r?"":{}),r?n.style+=(n.style?";":"")+"display:none":k(n.style)?n.style.push({display:"none"}):n.style.display="none"}},obj:function(e){return e.props},block:function(e){return e.children()},with:function(e,n){if(e&&e._njOpts)return(n=e).children({data:[n.props]});var r=n.props;return n.children({data:[r&&r.as?function(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}({},r.as,e):e]})},arg:function(e){var n=e.tagProps;n.args||(n.args=[]),n.args.push(e.value())},css:function(e){return e.props.style}};function he(e,n){var r={onlyGlobal:!1,useString:!1,newContext:!0,isSubTag:!1,isDirective:!1,isBindable:!1,useExpressionInProps:!1,hasName:!0,noTagName:!1,hasTagProps:!0,hasTmplCtx:!0,hasOutputH:!1};return e&&(r=q(r,e)),n&&(r=q(r,n)),r}var ye={onlyGlobal:!0,newContext:!(X.OnlyUpperCase="onlyUpperCase"),hasName:!1,hasTagProps:!1,hasTmplCtx:!1},_e=he(ye,{useExpressionInProps:!0}),xe={if:he(_e),else:he(_e,{isSubTag:!0,hasTagProps:!0}),switch:he(_e,{needPrefix:e.SwitchPrefixConfig.OnlyLowerCase}),each:he(_e,{newContext:{item:"item",index:"index",data:{first:["@first","first"],last:["@last","last"],$key:["@key","key"]}}}),prop:he(ye,{isDirective:!0,needPrefix:!0,hasTagProps:!0}),obj:he(ye,{needPrefix:!0}),with:he(ye,{newContext:{getDataFromProps:!0}}),style:{needPrefix:!0}};function be(e,n,r,a){var t=e;d(e)||((t={})[e]={extension:n,options:r}),F(t,function(e,n){if(e){var r=e.extension,t=e.options;r?de[n]=r:a||(de[n]=e),a?(xe[n]||(xe[n]=he()),d(t)?q(xe[n],t):xe[n]=he()):xe[n]=he(t)}},!1)}xe.then=he(xe.else),xe.elseif=he(xe.else),xe.spread=he(xe.prop),xe.block=he(xe.obj),xe.arg=he(xe.prop),xe.show=he(xe.prop,{useExpressionInProps:!0,noTagName:!0,hasOutputH:!0}),xe.css=he(xe.obj),de.for=de.each,xe.for=he(xe.each),de.case=de.elseif,xe.case=he(xe.elseif),de.empty=de.default=de.else,xe.empty=he(xe.else),xe.default=he(xe.else),de.strProp=de.prop,xe.strProp=he(xe.prop,{useString:!0}),de.strArg=de.arg,xe.strArg=he(xe.strProp),de.pre=de.block,xe.pre=he(xe.block),q(I,{extensions:de,extensionConfig:xe,registerExtension:be});var je=/(\d{3})(?=\d)/g,Pe={".":function(e,n,r){return null==e?e:e._njSrc?{source:e.value,value:e.value[n],prop:n,parent:e,_njSrc:!0}:r?{source:e,value:e[n],prop:n,_njSrc:!0}:e[n]},_:function(e,n){if(null==e)return e;if(e._njSrc){var r=e.source[e.prop];return null!=r?r.apply(e.source,n):r}return e.apply(null,n)},"#":function(e,n,r){return null==e?e:re(e[n],r.context)},"**":function(e,n){var r=Math.pow(e,n);return isNaN(r)?0:r},"%%":function(e,n){var r=Math.floor(e/n);return isNaN(r)?0:r},"?:":function(e,n,r){return e?n:r},"!":function(e){return!e},int:function(e,n){var r=parseInt(e,1<arguments.length&&void 0!==n?n:10);return isNaN(r)?0:r},float:function(e,n){var r=parseFloat(e);return isNaN(r)?0:null!=n?r.toFixed(n):r},bool:function(e){return"false"!==e&&!!e},reg:function(e,n){return RegExp(e,n)},css:function(e){return ee(e)},rOpe:Se(1),rLt:Se(0),"<=>":function(e,n){return n<e?1:e==n?0:-1},upperFirst:function(e){return L(e)},lowerFirst:function(e){return M(e)},camelCase:function(e){return $(e)},isObject:function(e){return d(e)},isNumber:function(e){return u(e)},isString:function(e){return O(e)},isArrayLike:function(e){return h(e)},currency:function(e,n,r,t){if(0>e-parseFloat(e))return null!=t?t:Ce.currency.placeholder;e=parseFloat(e),r=null!=(r=null!=n&&O(n)?n:r)&&O(r)?r:Ce.currency.symbol,n=null!=n&&u(n)?n:2;var a=Math.abs(e).toFixed(n),l=n?a.slice(0,-1-n):a,i=l.length%3,o=0<i?l.slice(0,i)+(3<l.length?",":""):"",s=n?a.slice(-1-n):"";return(e<0?"-":"")+r+o+l.slice(i).replace(je,"$1,")+s}};function Se(r){return function(n,e){return Object.keys(Array.apply(null,{length:e-n+r})).map(function(e){return+e+n})}}function Re(e,n){var r={onlyGlobal:!1,hasOptions:!1,isOperator:!1,hasLevel:!1,hasTmplCtx:!0,alias:null};return e&&(r=q(r,e)),n&&(r=q(r,n)),r}var we={onlyGlobal:!0,hasOptions:!1},Ce={".":Re(we),_:Re({onlyGlobal:!0}),"#":Re({onlyGlobal:!0,hasOptions:!0,hasLevel:!0}),"**":Re(we),"%%":Re(we),"?:":Re(we),"!":Re(we),int:Re(we),float:Re(we),bool:Re(we),reg:Re(we),css:Re(we),rOpe:Re(we),rLt:Re(we),"<=>":Re(we),upperFirst:Re(we),lowerFirst:Re(we),camelCase:Re(we),isObject:Re(we),isNumber:Re(we),isString:Re(we),isArrayLike:Re(we),currency:Re(we,{symbol:"$",placeholder:""})};function Oe(e,n,r,o){var t=e;d(e)||((t={})[e]={filter:n,options:r}),F(t,function(e,n){if(e){var r=e.filter,t=e.options;if(t){if(t.isOperator){var a=I.createRegexOperators;a&&a(n)}var l=t.alias;if(l){var i=I.createFilterAlias;i&&i(n,l),n=l}}r?Pe[n]=r:o||(Pe[n]=e),o?(Ce[n]||(Ce[n]=Re()),d(t)?q(Ce[n],t):Ce[n]=Re()):Ce[n]=Re(t)}},!1)}Pe.capitalize=Pe.upperFirst,Ce.capitalize=Re(Ce.upperFirst),q(I,{filters:Pe,filterConfig:Ce,registerFilter:Oe});var Te={},ke=new Map;function Ne(e,n,r){var o,t=e;return d(e)||((t={})[e]={component:n,options:r}),F(t,function(e,n,r){var t;if(null!=e){var a=e.component,l=e.options,i=n.toLowerCase();ke.set(Te[i]=t=a||e,l)}0==r?o=t:(1==r&&(o=[o]),o.push(t))},!1),o}q(I,{components:Te,componentConfig:ke,registerComponent:Ne,getComponentConfig:function(e){return ke.get(O(e)&&Te[e]||e)},copyComponentConfig:function(e,n){return ke.set(e,ke.get(n)),e}});var Ee=/('[^']*')|("[^"]*")|(-?[0-9][0-9]*(\.\d+)?)|true|false|null|undefined|Object|Array|Math|Date|JSON|(([a-zA-Z_$#@])([a-zA-Z_$\d]*))/,Ae=/_njQs(\d+)_/g,He=/_njSet_/;function $e(e,i,o){var n=E();if(~e.indexOf("|")){var r,s=[];e=(r=e.split("|"))[0].trim(),F(r=r.slice(1),function(e){if(""!==(e=e.trim())){var n=function(e){return e.split("'bracket_")}(e),r=E(),t=n[0].trim();if(t){var a=n[1];if(null!=a){var l=[];F(i[a].split(","),function(e){""!==e&&(l[l.length]=$e(e.trim(),i,o))},!0),r.params=l}r.name=t,s.push(r)}}},!0),n.filters=s}if(!(e=function(e,r){return e.replace(Ae,function(e,n){return r[n]})}(e,o)).indexOf("../")){var t=0;e=e.replace(/\.\.\//g,function(){return t++,""}),n.parentNum=t}if(""!==e){var a=Ee.exec(e),l="#"===a[6];n.name=l?a[7]:a[0],a[5]||(n.isBasicType=!0),l&&(n.isAccessor=!0),n.name=n.name.replace(He,function(){return n.hasSet=!0,""})}else n.isEmpty=!0;return n}var Le,Fe=/_nj(L|G)t_/g,Me={_njLt_:"<",_njGt_:">"},We=/"[^"]*"|'[^']*'/g,ze=/\*|\||\/|\.|\?|\+/g,Ke={"||":"or","..":"rOpe","..<":"rLt"};function Ge(e,n){e&&n&&(Ke[e]=n),Le=RegExp("[\\s]+(("+Object.keys(Ke).map(function(e){return e.replace(ze,function(e){return"\\"+e})}).join("|")+")[\\s]+)","g")}Ge();var De,Be={")":")_(","]":"]_("},Ie=/(\)|\]|\.([^\s'"._#()|]+))[\s]*\(/g,qe=/([(,|])[\s]+/g,Ze=/\.([a-zA-Z_$#@][a-zA-Z_$\d]*)/g,Ue=/([^\s([,])(\[)/g,Je={"[":"list(","]":")","{":"obj(","}":")"},Qe=/\[|\]|\{|\}/g,Ve=/^[\s]*set[\s]+|([(,])[\s]*set[\s]+/g,Xe=/^[\s]*([(]+)|([(,])[\s]*([(]+)/g,Ye=["../"],en=/-[0-9]/,nn=["","(","[",","],rn=["+=","+","-[0-9]","-","**","*","%%","%","===","!==","==","!=","<=>","<=",">=","=","..<","<",">","&&","||","?:","?",":","../","..","/"];function tn(r){if(r){var t=0;rn.forEach(function(e,n){~e.indexOf(r)&&(t=n+1)}),rn.splice(t,0,r)}De=RegExp(rn.map(function(e){return e.replace(ze,function(e){return"\\"+e})}).join("|"),"g")}function an(e,n,r,t){var a=e[2].trim(),l=[e[0],e[1],null,!0];return 0<r&&(l[3]=!1),t&&(a="set "+a),a=a.replace(Fe,function(e){return Me[e]}).replace(We,function(e){return n.push(e),"_njQs"+(n.length-1)+"_"}).replace(De,function(e,n){return en.test(e)?0<n&&!~nn.indexOf(a[n-1].trim())?e.split("-").join(" - "):e:~Ye.indexOf(e)?e:" ".concat(e," ")}).replace(Le,function(e,n,r){return" "+Ke[r]+" "}).replace(Ze,function(e,n){var r="#"===n[0];r&&(n=n.substr(1));var t=n.length-1,a=0<t&&"_"===n[t];return(r?"#":".")+"('"+(a?n.substr(0,t):n)+"')"+(a?"_":"")}).replace(Ue,function(e,n,r){return n+".("}).replace(Qe,function(e){return Je[e]}).replace(Ve,function(e,n){return(n||"")+"_njSet_"}).replace(Xe,function(e,n,r,t){return(r||"")+(r?t:n).replace(/[(]/g,"bracket(")}).replace(qe,function(e,n){return n}).replace(Ie,function(e,n,r){return r?".('"+r+"')_(":Be[n]}),l[2]=a.trim(),l}tn();var ln=/\(([^()]*)\)/g,on=/([!]+)((-?[0-9][0-9]*(\.\d+)?|[^\s,|'=]+)('bracket_\d+)?([._#]'bracket_\d+)*)/g,sn=/[\s]+([^\s(),|"']+)[\s]+((-?[0-9][0-9]*(\.\d+)?|[^\s,|']+)('bracket_\d+)?([._#]'bracket_\d+)*)/g,un=/[(,]/g,cn=/(\|)?(((\.+|_|#+)'bracket_)|[\s]+([^\s._#|]+[\s]*'bracket_))/g;function pn(e,n){return fn((e=e.replace(on,function(){var e=arguments;return n.push(fn(e[2])),e[1]+"'bracket_"+(n.length-1)})).replace(sn,function(){var e=arguments;return n.push(fn(e[2]))," "+e[1]+"'bracket_"+(n.length-1)}))}function fn(e){return(" "+e).replace(un,function(e){return e+" "}).replace(cn,function(e,n,r,t,a,l){return n?e:" | "+(t||l)}).trim()}function mn(a,l,e,n,r){var t=E(),i=O(a),o=i?e?["",""]:a.split(l.replaceSplit):[a],s=null,u=!1;if(i&&(o=o.map(function(e){return e.replace(/\n/g,"_njNl_").replace(/\r/g,"")})),1<o.length){var c=[],p=function(e,n,r,t,a){var l,i,o=n.replaceParam,s=0;if(t)i=[an(l=[e,n.startRule,e],r,s,a)];else for(;l=o.exec(e);){var u=l[2];(i=i||[]).push(an([l[0],u||l[5],u?l[3]:l[6]],r,s,a)),s++}return i}(a,l,c,e,r);s=[],F(p,function(e){var n=E(),r=[];u=!!e[3]&&e[0]===a;var t=function e(n,r){var t=n.replace(ln,function(e,n){return r.push(pn(n,r)),"'bracket_"+(r.length-1)});return t!==n?e(t,r):pn(t,r)}(e[2],r);n.prop=$e(t,r,c),n.escape=e[1]!==l.firstChar+l.startRule,s.push(n)},!0)}return t.props=s,t.strs=o,t.isAll=u,t.onlyKey=n,t}q(I,{createFilterAlias:Ge,createRegexOperators:tn});var vn=/^<[^>]+\/>$/i;var gn={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0};function dn(e,n){for(var r,t,a=n.openTagParams;r=a.exec(e);){var l=r[1];if("/"!==l){t=t||[];var i=r[8],o=!1,s=null!=r[4]?r[4]:r[6];null!=i?i=H(i):(i=l,s||(o=!0)),r[9]||r[10]||(/\/>$/.test(i)?i=i.substr(0,i.length-2):(/>$/.test(i)||/\/$/.test(i))&&(i=i.substr(0,i.length-1)));var u=void 0;":"===l[0]&&(l=l.substr(1),u=!0),t.push({key:l,value:i,onlyBrace:s,hasColon:u,onlyKey:o})}}return t}function hn(e,n,r){var t,a=n.extension.exec(e);if(a&&(t=[a[1]],!r)){var l=dn(e,n);l&&t.push(l)}return t}function yn(e,n){return e.match(n.exAll)}var _n=/^[a-z]/,xn=/^[A-Z]/;function bn(e){return"params"===e||"props"===e}function jn(e){return xe[e]||{}}function Pn(e,n){return 0==e.indexOf(n.propRule)}function Sn(e,n){return 0==e.indexOf(n.strPropRule+n.propRule)}var Rn=["style","script","textarea","pre","xmp","template","noscript",I.textTag];function wn(e,n,r,t,a){var l={type:"nj_plaintext"};l.content=[mn(e,a,null,null,null!=n.ex?jn(n.ex).isBindable:null)],l.allowNewline=t,n[r].push(l)}var Cn=/_njBp(\d+)_/g;function On(e,r,a,l,t,n){var i="content";if(k(e)){var o={},s=e[0];if(O(s)){var u,c,p,f,m,v,g=e.length,d=e[g-1],h=!1,y=!1,_=hn(s,a);if(_){var x=_[0];if(u=_[1],!(p=bn(x))){var b=jn(x);m=b.isSubTag,v=(f=b.isDirective)?!l:m,b.useString&&(o.useString=b.useString)}o.type="nj_ex",o.ex=x,null==u||p||(o.args||(o.args=[]),F(u,function(e){var n=e.key,r=e.value;if("useString"!==n){if("_njIsDirective"===n)return o.isDirective=f=!0,void(v=!l);var t=mn(r,a,e.hasColon,e.onlyKey);e.onlyBrace?o.args.push(t):(o.params||(o.params=E()),o.params[n]=t)}else o.useString=!("false"===r)},!0)),h=!0}else{var j=function(e,n){return n.xmlOpenTag.exec(e)}(s,a);j&&(/\/$/.test(c=j[1])&&(c=c.substr(0,c.length-1)),!function(e){return vn.test(e)}(s)?y=function(e,n){return O(e)&&e.toLowerCase()=="</"+n+">"}(d,c):o.selfCloseTag=!0,h=!0)}if(h){var P=!0;if(t&&(o.allowNewline=!0),_)(p||v)&&(P=!1),null==t&&"pre"===o.ex&&(t=!0,o.allowNewline="nlElem");else{var S=function(e,n){return n.braceParam.exec(e)}(o.type=c,a);S&&(o.typeRefer=mn(S[0],a));var R=dn(s,a);R&&(o.params||(o.params=E()),F(R,function(e){o.params[e.onlyBrace?e.onlyBrace.replace(/\.\.\//g,""):e.key]=mn(e.value,a,e.hasColon,e.onlyKey)},!0)),o.selfCloseTag||(o.selfCloseTag=function(e){return gn[e.toLowerCase()]}(c)),null==t&&~Rn.indexOf(c.toLowerCase())&&(t=!0,o.allowNewline="nlElem")}P&&r[i].push(o);var w=e.slice(1,g-(y?1:0));w&&w.length&&Tn(w,o,a,p||l&&!f,t),(p||v)&&function(e,n,r,t){var a,l="paramsEx";n[l]?T(n[l].content,r||t?[e]:e.content):((a=r||t?{type:"nj_ex",ex:"props",content:[e]}:e).parentType=n.type,n[l]=a)}(o,r,f,m)}else Tn(e,r,a,l,t)}else k(s)&&Tn(e,r,a,l,t)}else if(O(e))if(t)wn(n&&"nlElem"===r.allowNewline&&!I.textMode?N(e):e,r,i,t,a);else{var C=[];e.replace(a.braceParamG,function(e){return C.push(e),"_njBp"+(C.length-1)+"_"}).split(/\n/g).forEach(function(e,n){""!==(e=e.trim())&&wn(e.replace(Cn,function(e,n){return C[n]}),r,i,t,a)})}else wn(e,r,i,t,a)}function Tn(e,t,a,l,i){t.content||(t.content=[]),F(e,function(e,n,r){On(e,t,a,l,i,n==r-1)},!0)}var kn="g",Nn="c",En="p";function An(e,n,r,t,a,l,i){var o="",s=null!=i?i:r.useString,u=0===t,c=1===e.length?"1":"2",p={_type:0,_params:0,_compParam:0,_children:0,_dataRefer:0,_ex:0,_value:0,_filter:0,_fnH:0,_tmp:0,newContext:a};s?p._children=0:p._compParam=0,!u&&a&&(o+="".concat(Nn," = ").concat(kn,".n(").concat(Nn,", ").concat(En,");\n")),"2"==c&&(o+=s?"var ret = '';\n":"var ret = [];\n"),o+=In(e,n,r,p,c,l,i),"2"==c&&(o+="return ret;");try{r[u?"main":"fn"+t]=Function(kn,Nn,En,o)}catch(e){w("Failed to generate template function:\n\n"+e+" in\n\n"+o+"\n")}return t}function Hn(e,n,r,t,a,l,i,o){var s=", useString: "+(null==n?"".concat(kn,".us"):n?"true":"false"),u=!e,c=t._no;if(r){var p=!e||e.newContext,f=r.isDirective||e&&e.isDirective;(u||e.hasName)&&(s+=", name: '".concat(r.ex,"'")),i&&f&&(u||!e.noTagName)&&(s+=", tagName: "+i,s+=", setTagName: function(c) { ".concat(i," = c }")),o&&(u||e.hasTagProps)&&(s+=", tagProps: "+o),null!=l&&(s+=", props: "+l),s+=", "+(f?"value":"children")+": "+(r.content?"".concat(kn,".r(").concat(kn,", ").concat(Nn,", ").concat(kn,".fn")+An(r.content,r,t,++t._no,p,a,n)+")":"".concat(kn,".np"))}return"{ _njOpts: "+(c+1)+(u||e.hasTmplCtx?", global: ".concat(kn,", context: ").concat(Nn):"")+(u||e.hasOutputH?", outputH: "+!t.useString:"")+s+(null!=a&&(u||e.hasLevel)?", level: "+a:"")+" }"}var $n="nj_custom",Ln=["+","-","*","/","%","===","!==","==","!=","<=",">=","=","+=","<",">","&&","||","?",":"],Fn=["=","+="],Mn={or:"||"};function Wn(e,n,r){var t,a=!1,l=e.isBasicType,i=e.isAccessor,o=e.hasSet;if(l)t=e.name;else{var s=e.name,u=e.parentNum,c="",p=!1;switch(s){case"@index":c="index",a=!0;break;case"@item":c="item",a=!0;break;case"this":c="data",a=function(e){return"".concat(e,"[").concat(e,".length - 1]")};break;case"@data":c="data",a=!0;break;case"@g":c="".concat(kn,".g"),a=$n;break;case"@context":c=Nn,a=$n;break;case"@lt":c="'<'",a=$n;break;case"@gt":c="'>'",a=$n;break;case"@lb":c="'{'",a=$n;break;case"@rb":c="'}'",a=$n;break;case"@q":c="'\"'",a=$n;break;case"@sq":c='"\'"',a=$n}if(u){for(var f=(c=c||"data")==Nn,m=0;m<u;m++)c=f?c+".parent":"parent."+c;a||(p=!0)}if(a||p){var v=a===$n,g=v?c:"".concat(Nn,".")+c;d(a)&&(g=a(g)),t=a?v||!o?g:"{ source: c, value: ".concat(g,", prop: '").concat(c,"', _njSrc: true }"):(i?"".concat(kn,".c("):"")+"".concat(Nn,".d('")+s+"', "+g+(o?", true":"")+")"+(i?", ".concat(Nn)+")":"")}else t=(i?"".concat(kn,".c("):"")+"".concat(Nn,".d('")+s+"'"+(o?", 0, true":"")+")"+(i?", ".concat(Nn)+")":"")}return function(e,n,r,t){return n.useString?r&&t!==$n?"".concat(kn,".es(")+e+")":e:V(e)}(t=t&&Gn(t),r,!l&&!i&&n,a)}function zn(e){var n=Mn[e];return null!=n?n:e}function Kn(e){return Gn(e).replace(/_njNl_/g,"\\n").replace(/'/g,"\\'")}function Gn(e){return e.replace(/\\/g,"\\\\")}function Dn(a,l,i,o){var s=a.strs[0],u="";return O(s)&&(u=a.isAll||""===s?"":"'".concat(Kn(s),"'"),F(a.props,function(e,n){var r=function m(v,e,g,d,h,y){var _=v.filters&&!~Ln.indexOf(zn(v.filters[0].name))?"":e?v.name:Wn(v,g,d),x="";return v.filters&&v.filters.forEach(function(r,e){var n=v.filters[e+1]&&!~Ln.indexOf(zn(v.filters[e+1].name)),t=zn(r.name);if(~Ln.indexOf(t))~Fn.indexOf(t)?_+=".source.".concat(0==e?v.name:H(v.filters[e-1].params[0].name)," ").concat(t," "):_+=" ".concat(t," "),v.filters[e+1]&&!~Ln.indexOf(zn(v.filters[e+1].name))||(r.params[0].filters?(_+="(",_+=m(r.params[0],null,g,d,h,y),_+=")"):_+=Wn(r.params[0],g,d));else if("_"===t){var a="".concat(kn,".f['").concat(t,"'](").concat(x);r.params.length&&(a+=", [",r.params.forEach(function(e,n){a+=m(e,null,g,d,h,y),n<r.params.length-1&&(a+=", ")}),a+="]"),a+=")",x=n?a:(_+=a,"")}else{var l,i,o,s,u=v.isEmpty&&0==e;if("bracket"===t)l="(",i=")";else if("list"===t)l="[",i="]";else if("obj"===t)l="{ ",i=" }",o=!0;else{if("require"==t)l="require";else{var c="".concat(kn,".f['").concat(t,"']");"".concat(kn,".wn('").concat(t,"', 'f')"),l=(s=Ce[t])&&s.onlyGlobal?c:"".concat(kn,".cf(").concat(Nn,".d('").concat(t,"', 0, true) || ").concat(c).concat("",")")}l+="(",i=")"}var p=l;if(u)r.params.forEach(function(e,n){p+=m(e,o,g,d,h,y),n<r.params.length-1&&(p+=", ")});else{p+=0==e?Wn(v,g,d):""!==x?x:v.filters[e-1].params[0].filters?m(v.filters[e-1].params[0],null,g,d,h,y):Wn(v.filters[e-1].params[0],g,d),r.params&&r.params.forEach(function(e,n){p+=", ",p+=e.filters?m(e,null,g,d,h,y):Wn(e,g,d)});var f=v.filters[e+1];"."===t&&f&&"_"===zn(f.name)&&(p+=", true"),s&&s.hasOptions&&(p+=", ".concat(Hn(s,h,null,d,y)))}p+=i,x=n?p:(_+=p,"")}}),_}(e.prop,null,e.escape,l,i,o);if(a.isAll)r="("+r+")";else{var t=a.strs[n+1];r=(""===s&&0==n?"":" + ")+"("+r+")"+(""!==t?" + '".concat(Kn(t),"'"):"")}if(u+=r,a.isAll)return!1},!0)),u}function Bn(e,l,n,i,o,r){var t,a,s=e.params,u=e.paramsEx,c=l.useString,p=u,f="";if(s||p){if(t=n._params++,f="var "+(a="_params"+t)+" = ",s){var m=Object.keys(s),v=m.length;f+="{\n",F(m,function(e,n){var r=Dn(s[e],l,i,o);c||"style"!==e||(r="".concat(kn,".sp(")+r+")");var t=Kn(e),a=s[e].onlyKey;c||(t=se(t)),f+="  '"+t+"': "+(a?i?"'".concat(t,"'"):"true":r)+(n<v-1?",\n":"")},!1),f+="\n};\n"}p?(s||(f+="{};\n"),u&&(f+=In(u.content,u,l,n,{_paramsE:!0},null,i,r,a)),i&&(f+="\n"+a+" = ".concat(kn,".ans(")+a+");\n")):i&&(f+="\n"+a+" = ".concat(kn,".ans({}, ")+a+");\n")}return[f,t]}function In(e,r,t,a,l,i,o,s,u){var c="";return e&&F(e,function(e){var n=e.useString;c+=function(e,n,t,r,a,l,i,o,s,u){var c="",p=t.useString;if("nj_plaintext"===e.type){var f=Dn(e.content[0],t,i,l);if(""===f)return c;var m=qn(e,n,1,a,{text:f},t,l,i,e.allowNewline,o);c+=p?m:V(m)}else if("nj_ex"===e.type){var v,g=r._ex++,d=r._dataRefer++,h=xe[e.ex],y="_ex"+g,_="".concat(kn,".x['").concat(e.ex,"']"),x="";h&&h.onlyGlobal?c+="\nvar "+y+" = "+_+";\n":(c+="\nvar "+y+";\n",c+="var "+(v="_fnH"+r._fnH++)+" = ".concat(Nn,".d('").concat(e.ex,"', 0, true);\n"),c+="if ("+v+") {\n",c+="  "+y+" = "+v+".value;\n",c+="} else {\n",c+="  "+y+" = "+_+";\n",c+="}\n"),x+="var _dataRefer"+d+" = [\n",e.args&&F(e.args,function(e,n){var r=Dn(e,t,i,l);x+="  "+r+","},!0);var b=Bn(e,t,r,i,l,s),j=b[0],P=b[1];x+=Hn(h,i,e,t,l,""!==j?"_params"+P:null,s,u),x+="\n];\n",""!==j&&(x+="".concat(kn,".aa(_params")+P+", _dataRefer"+d+");\n"),c+=j+x,c+=qn(e,n,2,a,{_ex:g,_dataRefer:d,fnH:v},t,l,i,e.allowNewline,o)}else{var S,R,w,C=r._type++,O="_type"+C;if(e.typeRefer)R=Dn(e.typeRefer,t,l),S=e.typeRefer.props[0].prop.name;else S=e.type;if(p)w=R?"".concat(kn,".en(")+R+", '"+S+"')":"'".concat(S,"'");else{var T=S.toLowerCase(),k="";if(!R&&~T.indexOf(".")){var N=S.split(".");T=T.split(".")[0],S=N[0],k=", '".concat(N[1],"'")}w=R?"".concat(kn,".er(")+R+", '"+T+"', ".concat(kn,", '")+S+"', ".concat(Nn,")"):"".concat(kn,".e('")+T+"', ".concat(kn,", '")+S+"', ".concat(Nn)+k+")"}c+="\nvar _type"+C+" = "+w+";\n";var E,A,H=Bn(e,t,r,p,l,O),$=H[0],L=H[1];c+=$,c+=p?"var _children"+(A=r._children++)+" = '';\n":"var _compParam"+(E=r._compParam++)+" = [_type"+C+", "+(""!==$?"_params"+L:"null")+"];\n",c+=In(e.content,e,t,r,p?{_children:"_children"+A}:{_compParam:"_compParam"+E},p&&e.type===I.noWsTag?null:null!=l?l+1:l,i,O),c+=qn(e,n,3,a,p?{_type:C,_typeS:S,_typeR:R,_params:""!==$?L:null,_children:A,_selfClose:e.selfCloseTag}:{_compParam:E},t,l,i,e.allowNewline,o)}return c}(e,r,t,a,l,i,null!=n?n:o,t._firstNode&&0==i,s,u),t._firstNode&&(t._firstNode=!1)},!0),c}function qn(e,n,r,t,a,l,i,o,s,u){var c,p=l.useString,f=null!=o?o:p,m=null==i;switch(r){case 1:c=(!p||s||m?"":u?"nj_root"!==n.type?"".concat(kn,".fl(").concat(Nn,") + "):"":"'\\n' + ")+Zn(i,l,s)+Un(p,u||m)+a.text;break;case 2:c="_ex"+a._ex+".apply("+(a.fnH?a.fnH+" ? "+a.fnH+".source : ".concat(Nn):Nn)+", _dataRefer"+a._dataRefer+")";break;case 3:if(p)if(c=s&&"nlElem"!==s||m?"":u?"nj_root"!==n.type?"".concat(kn,".fl(").concat(Nn,") + "):"":"'\\n' + ",e.type!==I.textTag&&e.type!==I.noWsTag){var v=Zn(i,l,s),g=e.content,d=a._typeR,h=null!=a._params;c+=v+Un(p,u||m)+"'<"+(d?"' + _type"+a._type:a._typeS)+(h?(d?"":"'")+" + _params"+a._params:"")+(d||h?" + '":""),a._selfClose?c+=" />'":(c+=">'",c+=" + _children"+a._children+" + ",c+=(!g||s||m?"":"'\\n' + ")+(g?v:"")+Un(p,m)+"'</"+(d?"' + _type"+a._type+" + '":a._typeS)+">'")}else c+="_children"+a._children;else c="".concat(kn,".H(_compParam")+a._compParam+")"}return"1"===t?"\nreturn "+c+";":"2"===t?f?"\nret += "+c+";\n":"\nret.push("+c+");\n":t._paramsE?"\n"+c+";\n":p?"\n"+t._children+" += "+c+";\n":"\n"+t._compParam+".push("+c+");\n"}function Zn(e,n,r){var t="";if(r&&"nlElem"!==r)return t;if(n.useString&&null!=e&&0<e){t+="'";for(var a=0;a<e;a++)t+="  ";t+="' + "}return t}function Un(e,n){return e&&!n?"".concat(kn,".ls(").concat(Nn,") + "):""}function Jn(e,n,r){var t={useString:r,_no:0,_firstNode:!0};return An(e,n,t,t._no,null,0),t}var Qn=I.preAsts,Vn="_njParam",Xn=["style","script","textarea","xmp",I.textTag],Yn=gn;function er(e){var n,r=""+e,t=Qn[r],i=this.outputH,o=this.tmplRule,a=this.onlyParse,l=this.fileName,s=this.isExpression,u=this.isCss;if(!t){var c=O(e)?[e]:e,p=c.length,f="",m=!1;F(c,function(e,n){var r="";if(0==n&&(s?e=(i?o.firstChar:"")+o.startRule+" "+e:u&&(e="<"+o.extensionRule+'css style="'+e)),n<p-1){var t=e.length-1,a="#"===e[t],l="..."==e.substr(t-2);m=(m=m&&!o["incompleteEnd"+("isR"===m?"R":"")].test(e))||(o.incompleteStartR.test(e)?"isR":o.incompleteStart.test(e)),a?e=e.substr(0,t):l&&(e=e.substr(0,t-2)),r=(a?"#":l?"...":"")+Vn+n,m||(r=o.startRule+r+o.endRule)}n==p-1&&(s?e+=" "+o.endRule+(i?o.lastChar:""):u&&(e+='" />')),f+=e+r},!0);var v=I.includeParser;v&&(f=v(f,l,o)),f=function(e,n){var r=n.commentRule;return e.replace(RegExp("\x3c!--"+r+"[\\s\\S]*?"+r+"--\x3e","g"),"").replace(RegExp("([\\s]+:[^\\s=>]+=(('[^']+')|(\"[^\"]+\")))|("+n.braceParamStr+")","g"),function(e,n,r,t,a,l){return(n||l).replace(ar,function(e){return tr[e]})})}(f,o),i||(I.textMode&&(f="<"+I.textTag+">"+f+"</"+I.textTag+">"),I.noWsMode&&(f="<"+I.noWsTag+">"+f+"</"+I.noWsTag+">")),t=function(e,n,r){var t,a,l=[],i=n.checkElem,o={elem:l,elemName:"root",parent:null},s=null;for(;t=i.exec(e);){var u=t[1],c=t[2],p=t[3],f=t[4],m=t[5];if(s){var v=R(s,4),g=v[0],d=v[1],h=v[2],y=v[3],_=!!c&&yn(p,n);_&&!_[1]&&(Pn(p,n)||Sn(p,n)||bn(_[3])||jn(_[3]).isDirective)?(o=nr(d,o),ir(g,d,h,o.elem,null,n,r)):ur(g,d,h,o.elem,n,r),rr(y,o),s=null}if(u&&""!==u&&cr(u,o.elem),c)if("<"!==c)if(c.indexOf("<!")){var x=yn(p,n);if("/"===p[0])if(p.substr(1).toLowerCase()===a&&(a=null),x||!a){var b=o.elemName;(~b.indexOf(Vn)?~p.indexOf(Vn)||"//"===p:p==="/"+b)&&(o=o.parent)}else cr(c,o.elem);else if("/"===c[c.length-2])x||!a?ur(c,p,f,o.elem,n,r):cr(c,o.elem);else if(x||!a)if(!a&&Yn[p.toLowerCase()])s=[c,p,f,m];else{var j=p.toLowerCase();~Xn.indexOf(j)&&(a=j),o=nr(p,o),ir(c,p,f,o.elem,null,n,r)}else cr(c,o.elem)}else cr(c,o.elem);else null==m&&(m=""),m=c+m;s||rr(m,o)}if(s){var P=R(s,4),S=P[3];ur(P[0],P[1],P[2],o.elem,n,r),rr(S,o)}return l}(f,o,i),x(t,"_njParamCount",{value:p-1}),Qn[r]=t}if(a)n={_njTmpl:t,_njTmplKey:r};else{var g,d=arguments,h=t._njParamCount;if(0<h){x(g={},"_njParam",{value:!0});for(var y=0;y<h;y++)g[Vn+y]=d[y+1]}b(n=g?function(){return _.apply(this,T([g],arguments))}:function(){return _.apply(this,arguments)},{_njTmpl:{value:t},_njTmplKey:{value:r}});var _=I["compile"+(i?"H":"")](n,r,null,null,o)}return n}function nr(e,n){var r={elem:[],elemName:e,parent:n};return n.elem.push(r.elem),r}function rr(e,n){e&&""!==e&&cr(e,n.elem)}var tr={"<":"_njLt_",">":"_njGt_"},ar=/>|</g;function lr(e,n,r,t){return t.extensionRule+(e?"strProp":"prop")+" "+t.startRule+"'"+n.substr((e?t.strPropRule.length:0)+t.propRule.length)+"'"+t.endRule+r}function ir(e,n,r,t,a,l,i){var o,s,u=function(e,n){var r;if(!I.fixTagName)return r;var t=M(e),a=xe[t];return a&&(!a.needPrefix||"onlyUpperCase"==a.needPrefix&&_n.test(e)||"onlyLowerCase"==a.needPrefix&&xn.test(e))&&(r=n.extensionRule+t),r}(n,l);if(u&&(n=u),hn(n,l,!0)){o=e.substring(1,e.length-1),u&&(o=l.extensionRule+M(o));var c=sr(o,l,i);o=c.elem,s=c.params}else if(Sn(n,l))o=lr(!0,n,r,l);else if(Pn(n,l))o=lr(!1,n,r,l);else{var p=sr(e,l,i);o=p.elem,s=p.params}if(a){var f=[o];s&&f.push(s),t.push(f)}else t.push(o),s&&t.push(s)}var or=/([^\s-$.]+)(([$.][^\s-$.]+)*)((-[^\s-$.]+([$.][^\s-$.]+)*)*)/;function sr(e,n,d){var h,y=n.extensionRule,_=n.startRule,x=n.endRule,b=n.firstChar,j=n.lastChar,r=n.directives;return{elem:e=(e=e.replace(n.spreadProp,function(e,n,r,t,a){return r&&(a=r),(h=h||[y+"props"]).push([y+"spread "+(r?b:"")+_+a.replace(/\.\.\./,"")+x+(r?j:"")+"/"])," "})).replace(r,function(e,n,r,t,a,l,i,o,s,u,c,p,f){if(null==u)return e;var m,v;h=h||[y+"props"],c=c.replace(or,function(e,n,r,t,a){return a&&(m=a.substr(1).split("-").map(function(e){var r,t="",a=e.split(/[$.]/);return a.forEach(function(e,n){0==n?r="name:'".concat(e,"'")+(n<a.length-1?",":""):t+="'".concat(e,"'")+(n<a.length-1?",":"")}),"{"+r+(""!=t?"modifiers:["+t+"]":"")+"}"})),r&&(v=r.substr(1).split(/[$.]/).map(function(e){return"'".concat(e,"'")})),n});var g=[y+c+" _njIsDirective"+(m?' arguments="'+b+_+"["+m.join(",")+"]"+x+j+'"':"")+(v?' modifiers="'+_+"["+v.join(",")+"]"+x+'"':"")+(p?"":" /")];return p&&g.push((s?(d?b:"")+_+" ":"")+H(f)+(s?" "+x+(d?j:""):"")),h.push(g)," "}),params:h}}function ur(e,n,r,t,a,l){/\/$/.test(n)&&(n=n.substr(0,n.length-1)),ir(e,n,r,t,!0,a,l)}function cr(e,n){n.push(e)}function pr(c){return function(e,n,r,t,a){if(e){if(d(n)){var l=n;n=l.tmplKey,r=l.fileName,t=l.delimiters,a=l.tmplRule}var i;if(n&&(i=I.templates[n]),!i){var o,s,u=d(e);if(u&&e.main)o=e;else n&&(s=I.asts[n]),s||(u&&"nj_root"===e.type?s=e:(a=a||(t?K(t):I.tmplRule),s=vr(),O(e)&&(e=er.call({tmplRule:a,outputH:c,onlyParse:!0,fileName:r},e)),On(e._njTmpl,s,a)),n&&(I.asts[n]=s)),o=Jn(s.content,s,!c);i=function(e,n){var r={tmplKey:n,us:e.useString,x:I.extensions,f:I.filters,np:j,tf:P,wn:S,n:oe,c:re,sp:ee,r:ce,e:te,er:ae,en:le,aa:ie,an:q,g:I.global,cf:ge};return r.us?(r.ans=ue,r.es=I.escape,r.ls=fe,r.fl=me):(r.h=I.createElement,r.H=ve,r.cp=I.components),F(e,function(e,n){"main"===n?(r[n]=pe(r,e),b(r[n],{_njTmpl:{value:!0}}),r["_"+n]=e):n.indexOf("fn")||(r[n]=e)},!1),r}(o,n),n&&(I.templates[n]=i)}return i.main}}}var fr=pr(),mr=pr(!0);function vr(){var e=E();return e.type="nj_root",e.content=[],e}function gr(r){return function(e,n){return(r?mr:fr)(e,n?{tmplKey:n.tmplKey?n.tmplKey:e._njTmplKey,fileName:n.fileName,delimiters:n.delimiters}:e._njTmplKey).apply(null,s(arguments,1))}}var dr=gr(),hr=gr(!0);function yr(a){return function(e,n){var r=(a?mr:fr)(e,e._njTmplKey);if(n){var t=function(){return r.apply(this,T([n],arguments))};return x(n,"_njParam",{value:!0}),b(t,{_njTmpl:{value:!0}}),t}return r}}var _r=yr(),xr=yr(!0);function br(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},a=e.outputH,n=e.delimiters,l=e.fileName,i=e.isExpression,o=e.isCss,s=n?K(n):I.tmplRule;return function(e){for(var n=arguments.length,r=Array(1<n?n-1:0),t=1;t<n;t++)r[t-1]=arguments[t];return er.apply({tmplRule:s,outputH:a,fileName:l,isExpression:i,isCss:o},arguments)}}function jr(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return e.outputH=!0,br(e)}q(I,{compile:fr,compileH:mr,precompile:function(e,n){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:I.tmplRule,t=3<arguments.length?arguments[3]:void 0,a=vr();if(e.quasis){e=er.call({tmplRule:r,outputH:n,onlyParse:!0,isExpression:e.isExpression,isCss:e.isCss},e.quasis)}else O(e)&&(e=er.call({tmplRule:r,outputH:n,onlyParse:!0},e));On(e._njTmpl,a,r);var l=Jn(a.content,a,!n);return t?{fns:l,ast:a}:l},render:dr,renderH:hr,buildRender:_r,buildRenderH:xr});var Pr=br(),Sr=jr();function Rr(e){for(var n=arguments.length,r=Array(1<n?n-1:0),t=1;t<n;t++)r[t-1]=arguments[t];return(I.outputH?Sr:Pr).apply(null,arguments)()}var wr=jr({isExpression:!0});function Cr(e){for(var n=arguments.length,r=Array(1<n?n-1:0),t=1;t<n;t++)r[t-1]=arguments[t];return wr.apply(null,arguments)()}var Or=jr({isCss:!0});function Tr(e){for(var n=arguments.length,r=Array(1<n?n-1:0),t=1;t<n;t++)r[t-1]=arguments[t];return Or.apply(null,arguments)()}q(I,{createTaggedTmpl:br,createTaggedTmplH:jr,taggedTmpl:Pr,htmlString:Pr,taggedTmplH:Sr,html:Sr,template:Rr,expression:Cr,css:Tr});var kr=I.global;kr.NornJ=kr.nj=I,e.compile=fr,e.compileH=mr,e.css=Tr,e.default=I,e.expression=Cr,e.html=Sr,e.htmlString=Pr,e.registerComponent=Ne,e.registerExtension=be,e.registerFilter=Oe,e.render=dr,e.renderH=hr,e.taggedTmpl=Pr,e.taggedTmplH=Sr,e.template=Rr,Object.defineProperty(e,"__esModule",{value:!0})});
